<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.4. Bases de datos de usuarios y grupos</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Configuración, Localización, Locales, Red, Resolución de nombres, Usuarios, Grupos, Cuentas, Intérprete de línea de órdenes, Consola, Impresión, Gestor de arranque, Compilación de núcleo" /><link
        rel="home"
        href="index.html"
        title="El libro del administrador de Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Capítulo 8. Configuración básica: red, cuentas, impresión..." /><link
        rel="prev"
        href="sect.hostname-name-service.html"
        title="8.3. Definición del nombre de equipo y configuración del servicio de nombres" /><link
        rel="next"
        href="sect.creating-accounts.html"
        title="8.5. Creación de cuentas" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/es-ES/sect.user-group-databases.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Anterior</strong></a></li><li
          class="home">El libro del administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.user-group-databases"></a>8.4. Bases de datos de usuarios y grupos</h2></div></div></div><a
          id="idm140447102569520"
          class="indexterm"></a><a
          id="idm140447102568080"
          class="indexterm"></a><a
          id="idm140447102566640"
          class="indexterm"></a><a
          id="idm140447102565200"
          class="indexterm"></a><div
          class="para">
			Generalmente se almacena la lista de usuarios en el archivo <code
            class="filename">/etc/passwd</code> y el archivo <code
            class="filename">/etc/shadow</code> almacena las contraseñas cifradas. Ambos son archivos de texto en un formato relativamente simple que pueden leerse y modificarse con un editor de texto. Se muestra cada usuario en una línea con varios campos separados por dos puntos («<code
            class="literal">:</code>»).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>NOTA</em></span> Editando archivos de sistema</strong></p></div></div></div><div
            class="para">
			Los archivos de sistema mencionados en este capítulo generalmente son archivos en texto plano y pueden editarse con un editor de texto. Dada su importancia para el funcionamiento intrínseco del sistema siempre es buena idea tomar precauciones extras al editar archivos de sistema. Primero, siempre haga una copia o respaldo de un archivo de sistema antes de abrirlo o modificarlo. Segundo, en servidores o equipos en los que más de una persona puedan acceder al mismo archivo al mismo tiempo, tome las medidas adecuadas para evitar corrupción de archivos.
		</div><div
            class="para">
			Para este propósito basta utilizar la orden <code
              class="command">vipw</code> para editar el archivo <code
              class="filename">/etc/passwd</code> o <code
              class="command">vigr</code> para editar <code
              class="filename">/etc/group</code>. Éstos programas bloquean el archivo en cuestión antes de ejecutar el editor de texto, (<code
              class="command">vi</code> de forma predeterminada a menos que se haya modificado la variable de entorno <code
              class="varname">EDITOR</code>). La opción <code
              class="literal">-s</code> permitirá editar el archivo <span
              class="foreignphrase"><em
                class="foreignphrase">shadow</em></span> correspondiente.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> Crypt, una función unidireccional</strong></p></div></div></div><a
            id="idm140447102554048"
            class="indexterm"></a><div
            class="para">
			<code
              class="command">crypt</code> es una función unidireccional que transforma una cadena (<code
              class="varname">A</code>) a otra cadena (<code
              class="varname">B</code>) de forma que no se pueda obtener <code
              class="varname">A</code> desde <code
              class="varname">B</code>. La única forma de identificar <code
              class="varname">A</code> es probar todos sus posibles valores, revisando uno por uno para verificar si la transformación utilizando dicha función produce <code
              class="varname">B</code> o no. Utiliza hasta 8 caracteres como entrada (la cadena <code
              class="varname">A</code>) y genera una cadena de 13 caracteres imprimibles ASCII (la cadena <code
              class="varname">B</code>).
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.etc-passwd"></a>8.4.1. Lista de usuarios: <code
                    class="filename">/etc/passwd</code></h3></div></div></div><div
            class="para">
				Esta es una lista de los campos en el archivo <code
              class="filename">/etc/passwd</code>:
			</div><a
            id="idm140447102545632"
            class="indexterm"></a><a
            id="idm140447102544512"
            class="indexterm"></a><a
            id="idm140447102543392"
            class="indexterm"></a><a
            id="idm140447102542272"
            class="indexterm"></a><a
            id="idm140447102541152"
            class="indexterm"></a><a
            id="idm140447102540032"
            class="indexterm"></a><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						nombre de usuario, por ejemplo <code
                    class="literal">rhertzog</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						contraseña: esta es una contraseña cifrada por una función unidireccional (<code
                    class="command">crypt</code>), que utiliza <code
                    class="literal">DES</code>, <code
                    class="literal">MD5</code>, <code
                    class="literal">SHA-256</code> o <code
                    class="literal">SHA-512</code>. El valor especial «<code
                    class="literal">x</code>» indica que la contraseña cifrada está almacenada en <code
                    class="filename">/etc/shadow</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uid</code>: número único que identifica a cada usuario;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: número único del grupo principal del usuario (de forma predeterminada, Debian crea un grupo específico para cada usuario);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">GECOS</code>: campo de datos que generalmente contiene el nombre completo del usuario;
					</div></li><li
                class="listitem"><div
                  class="para">
						directorio de inicio de sesión, asignado al usuario para almacenar sus archivos personales (al que generalmente apunta la variable de entorno <code
                    class="varname">$HOME</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						program to execute upon login. This is usually a command interpreter (shell), giving the user free rein. If you specify <code
                    class="command">/bin/false</code> (which does nothing and returns control immediately), the user cannot login.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> Grupo Unix</strong></p></div></div></div><a
              id="idm140447102524112"
              class="indexterm"></a><div
              class="para">
				Un grupo Unix es una entidad que incluye varios usuarios para que puedan compartir archivos fácilmente utilizando el sistema de permisos integrado (obteniendo los mismos permisos). También puede restringir el uso de ciertos programas a un grupo específico.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.etc-shadow"></a>8.4.2. El archivo de contraseñas ocultas y cifradas: <code
                    class="filename">/etc/shadow</code></h3></div></div></div><a
            id="idm140447102520752"
            class="indexterm"></a><a
            id="idm140447102519632"
            class="indexterm"></a><div
            class="para">
				El archivo <code
              class="filename">/etc/shadow</code> contiene los siguientes campos:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						nombre de usuario;
					</div></li><li
                class="listitem"><div
                  class="para">
						contraseña cifrada;
					</div></li><li
                class="listitem"><div
                  class="para">
						varios campos que administran el vencimiento de la contraseña.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOCUMENTACIÓN</em></span> El formato de los archivos <code
                        class="filename">/etc/passwd</code>, <code
                        class="filename">/etc/shadow</code> y <code
                        class="filename">/etc/group</code></strong></p></div></div></div><div
              class="para">
				Éstos formatos están documentados en las siguientes páginas de manual: <span
                class="citerefentry"><span
                  class="refentrytitle">passwd</span>(5)</span>, <span
                class="citerefentry"><span
                  class="refentrytitle">shadow</span>(5)</span> y <span
                class="citerefentry"><span
                  class="refentrytitle">group</span>(5)</span>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SEGURIDAD</em></span> Seguridad del archivo <code
                        class="filename">/etc/shadow</code></strong></p></div></div></div><div
              class="para">
				A diferencia de su contraparte <code
                class="filename">/etc/passwd</code>, <code
                class="filename">/etc/shadow</code> no puede ser leído por usuarios normales. Cualquiera puede leer cualquier contraseña cifrada en <code
                class="filename">/etc/password</code>; un «cracker» podría intentar «romper» (o revelar) una contraseña a través de alguno de los métodos de «fuerza bruta» que, de forma simplificada, adivinan las combinaciones de caracteres utilizadas frecuentemente. Este ataque — llamado «ataque de diccionario» — ya no es posible en sistemas que utilizan <code
                class="filename">/etc/shadow</code>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.account-modification"></a>8.4.3. Modificación de una cuenta o contraseña existente</h3></div></div></div><a
            id="idm140447102502656"
            class="indexterm"></a><a
            id="idm140447102501536"
            class="indexterm"></a><a
            id="idm140447102500416"
            class="indexterm"></a><a
            id="idm140447102499296"
            class="indexterm"></a><a
            id="idm140447102498176"
            class="indexterm"></a><div
            class="para">
				Los siguientes programas permiten modificar la información almacenada en campos específicos de la base de datos de usuarios: <code
              class="command">passwd</code> le permite a un usuario normal cambiar su contraseña que, a su vez, actualiza el archivo <code
              class="filename">/etc/shadow</code>; <code
              class="command">chfn</code> (cambiar el nombre completo: «CHange Full Name»), reservado para el superusuario (root), modifica el campo <code
              class="literal">GECOS</code>. <code
              class="command">chsh</code> (cambiar consola: «CHange SHell») le permite a un usuario cambiar su consola de inicio de sesión, sin embargo las opciones disponibles estarán limitadas a aquellas mencionadas en <code
              class="filename">/etc/shells</code>; el administrador, por el otro lado, no está limitado por esta restricción y puede configurar la consola a cualquier programa de su elección.
			</div><div
            class="para">
				Finalmente <code
              class="command">chage</code> (cambiar edad: «CHange AGE») permite al administrador cambiar la configuración de expiración de la contraseña (la opción <code
              class="literal">-l <em
                class="replaceable">usuario</em></code> mostrará la configuración actual). También puede forzar la expiración de una contraseña utilizando la orden <code
              class="command">passwd -e <em
                class="replaceable">usuario</em></code>, que obligará al usuario a cambiar su contraseña la próxima vez que inicie sesión.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.disabling-account"></a>8.4.4. Desactivación de una cuenta</h3></div></div></div><a
            id="idm140447102489456"
            class="indexterm"></a><a
            id="idm140447102488528"
            class="indexterm"></a><div
            class="para">
				Puede llegar a necesitar «desactivar una cuenta» (bloquear el acceso a un usuario) como castigo, para una investigación o simplemente en caso de una ausencia prolongada o definitiva de un usuario. Una cuenta desactivada significa que el usuario no podrá iniciar sesión y obtener acceso a la máquina. La cuenta se mantiene intacta en el equipo y no se eliminarán archivos o datos; simplemente es inaccesible. Puede lograr esto utilizando <code
              class="command">passwd -l <em
                class="replaceable">usuario</em></code> (bloquear: «lock»). Puede reactivar la cuenta de forma similar, utilizando la opción <code
              class="literal">-u</code> (desbloquear: «unlock»).
			</div><div
            class="sidebar"><a
              id="sidebar.intro-nss"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>YENDO MÁS ALLÁ</em></span> NSS y bases de datos de sistema</strong></p></div></div></div><a
              id="idm140447102483616"
              class="indexterm"></a><a
              id="idm140447102482656"
              class="indexterm"></a><div
              class="para">
				En lugar de utilizar los archivos usuales para administrar la lista de usuarios y grupos puede utilizar otros tipos de bases de datos como LDAP o <code
                class="command">db</code> utilizando el módulo NSS (cambio de servicio de nombres: «Name Service Switch»). Puede encontrar una lista de los módulos utilizados en el archivo <code
                class="filename">/etc/nsswitch.conf</code> bajo los elementos <code
                class="literal">passwd</code>, <code
                class="literal">shadow</code> y <code
                class="literal">group</code>. Revise la <a
                class="xref"
                href="sect.ldap-directory.html#sect.config-nss">Sección 11.7.3.1, “Configuración de NSS”</a> para un ejemplo específico sobre el uso de un módulo NSS para LDAP.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.etc-group"></a>8.4.5. Lista de grupos: <code
                    class="filename">/etc/group</code></h3></div></div></div><div
            class="para">
				Se enumeran los grupos en el archivo <code
              class="filename">/etc/group</code>, una simple base de datos de texto en un formato similar al del archivo <code
              class="filename">/etc/passwd</code> con los siguientes campos:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						nombre del grupo;
					</div></li><li
                class="listitem"><div
                  class="para">
						contraseña (opcional): sólo es utilizada para unirse a un grupo cuando no es un miembro normal (con <code
                    class="command">newgrp</code> o <code
                    class="command">sg</code>, revise el recuadro);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: número único de identificación del grupo;
					</div></li><li
                class="listitem"><div
                  class="para">
						lista de miembros: lista separados por comas de nombres de usuario que son miembros del grupo.
					</div></li></ul></div><div
            class="para">
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> Trabajar con varios grupos</strong></p></div></div></div><a
              id="idm140447102467600"
              class="indexterm"></a><a
              id="idm140447102466480"
              class="indexterm"></a><a
              id="idm140447102465360"
              class="indexterm"></a><a
              id="idm140447102464240"
              class="indexterm"></a><div
              class="para">
				Cada usuario puede ser miembro de varios grupos, uno de los cuales es su «grupo principal». El grupo principal de un usuario se crea de forma predeterminada durante la configuración inicial del usuario. De forma predeterminada, cada archivo que cree el usuario pertenece a él así como también a su grupo principal. Esto no es siempre el comportamiento deseado; por ejemplo, cuando el usuario necesita trabajar en un directorio compartido por un grupo distinto a su grupo principal. En este caso, el usuario necesita cambiar el grupo principal utilizando una de las siguientes órdenes: <code
                class="command">newgrp</code> que inicia una nueva consola, o <code
                class="command">sg</code> que simplemente ejecuta una orden utilizando un grupo alternativo que se provea. Estas órdenes le permiten al usuario unirse a un grupo al que no pertenecen. Si el grupo está protegido por una contraseña necesitarán proveerla antes de ejecutar la orden.
			</div><div
              class="para">
				De forma alternativa, el usuario puede activar el bit <code
                class="literal">setgid</code> en el directorio, que causa que los archivos creados en él pertenezcan al grupo correcto automáticamente. Para más detalles revise el recuadro <a
                class="xref"
                href="sect.rights-management.html#sidebar.setgid-dir"><span
                  class="emphasis"><em>SEGURIDAD</em></span> Directorios <code
                  class="literal">setgid</code> y el <span
                  class="emphasis"><em>bit «sticky»</em></span> (pegajoso)</a>.
			</div><div
              class="para">
				La orden <code
                class="command">id</code> muestra el estado actual del usuario, con su identificador personal (la variable <code
                class="varname">uid</code>), su grupo principal actual (la variable <code
                class="varname">gid</code>) y la lista de grupos a los que pertenece (la variable <code
                class="varname">groups</code>).
			</div></div><a
            id="idm140447102456384"
            class="indexterm"></a><a
            id="idm140447102455264"
            class="indexterm"></a><div
            class="para">
				Los programas <code
              class="command">addgroup</code> y <code
              class="command">delgroup</code> agregan o eliminan un grupo respectivamente. <code
              class="command">groupmod</code> modifica la información de un grupo (su identificador o <code
              class="literal">gid</code>). La orden <code
              class="command">passwd -g <em
                class="replaceable">grupo</em></code> cambia la contraseña del grupo mientras que <code
              class="command">passwd -r -g <em
                class="replaceable">grupo</em></code> elimina dicha contraseña.
			</div><a
            id="idm140447102450192"
            class="indexterm"></a><a
            id="idm140447102449072"
            class="indexterm"></a><a
            id="idm140447102447952"
            class="indexterm"></a><a
            id="idm140447102446832"
            class="indexterm"></a><a
            id="idm140447102445392"
            class="indexterm"></a><a
            id="idm140447102443952"
            class="indexterm"></a><a
            id="idm140447102442512"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> <code
                        class="command">getent</code></strong></p></div></div></div><a
              id="idm140447102440112"
              class="indexterm"></a><div
              class="para">
				El programa <code
                class="command">getent</code> (obtener elementos: «get entries») revisa las bases de datos de sistema de la forma estándar, utilizando las funciones de la biblioteca apropiada que, a su vez, llaman a los módulos NSS configurados en el archivo <code
                class="filename">/etc/nsswitch.conf</code>. El programa acepta uno o dos parámetros: el nombre de la base de datos a revisar y una posible clave de búsqueda. Por lo tanto, la orden <code
                class="command">getent passwd rhertzog</code> proveerá la información de la base de datos de usuarios sobre el usuario <code
                class="literal">rhertzog</code>.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Anterior</strong>8.3. Definición del nombre de equipo y configurac...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Siguiente</strong>8.5. Creación de cuentas</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.user-group-databases.html">ar-MA</a></li><li><a
              href="../da-DK/sect.user-group-databases.html">da-DK</a></li><li><a
              href="../de-DE/sect.user-group-databases.html">de-DE</a></li><li><a
              href="../el-GR/sect.user-group-databases.html">el-GR</a></li><li><a
              href="../en-US/sect.user-group-databases.html">en-US</a></li><li><a
              href="../es-ES/sect.user-group-databases.html">es-ES</a></li><li><a
              href="../fa-IR/sect.user-group-databases.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.user-group-databases.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.user-group-databases.html">hr-HR</a></li><li><a
              href="../id-ID/sect.user-group-databases.html">id-ID</a></li><li><a
              href="../it-IT/sect.user-group-databases.html">it-IT</a></li><li><a
              href="../ja-JP/sect.user-group-databases.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.user-group-databases.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.user-group-databases.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.user-group-databases.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.user-group-databases.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.user-group-databases.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.user-group-databases.html">zh-CN</a></li></ul></div></body></html>
