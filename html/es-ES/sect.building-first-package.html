<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">15.2. Creación de su primer paquete</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Retroadaptación, Recompilación, Paquete fuente, Repositorio, Metapaquete, Desarrollador Debian, Responsable" /><link
        rel="home"
        href="index.html"
        title="El manual del Administrador de Debian" /><link
        rel="up"
        href="debian-packaging.html"
        title="Capítulo 15. Creación de un paquete Debian" /><link
        rel="prev"
        href="debian-packaging.html"
        title="Capítulo 15. Creación de un paquete Debian" /><link
        rel="next"
        href="sect.setup-apt-package-repository.html"
        title="15.3. Creación de un repositorio de paquetes para APT" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/es-ES/sect.building-first-package.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Anterior</strong></a></li><li
          class="home">El manual del Administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.building-first-package"></a>15.2. Creación de su primer paquete</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.18.5.2"></a>15.2.1. Metapaquetes o paquetes falsos</h3></div></div></div><div
            class="para">
				Los paquetes falsos y los metapaquetes son similares en que son cascarones vacíos que sólo existen por los efectos que tienen sus metadatos en el sistema de gestión de paquetes.
			</div><div
            class="para">
				El propósito de un paquete falso es engañar a <code
              class="command">dpkg</code> y <code
              class="command">apt</code> para que crean que un paquete está instalado. Esto permite satisfacer las dependencias de un paquete cuando se instaló el software correspondiente fuera del alcance del sistema de paquetes. Este método funciona, pero debería evitarlo siempre que sea posible ya que no hay garantías que el software instalado manualmente se comporta exactamente de la misma forma que el paquete correspondiente y que otros paquetes que dependan de él funcionarán correctamente.
			</div><div
            class="para">
				Por el otro lado, un metapaquete existe principalmetne como una colección de dependencias, para que su instalación incluya un conjunto de otros paquetes en un solo paso.
			</div><div
            class="para">
				Puede crear ambos tipos de paquetes con los programas <code
              class="command">equivs-control</code> y <code
              class="command">equivs-build</code> (en el paquete <span
              class="pkg pkg">equivs</span>). Si ejecuta <code
              class="command">equivs-control <em
                class="replaceable">archivo</em></code> creará un archivo de cabecera de un paquete Debian que debe editar para que contenga el nombre esperado del paquete, su número de versión, el nombre de su encargado, sus dependencias y su descripción. Puede eliminar todos los demás campos sin un valor predeterminado ya que son opcionales. Los campos <code
              class="literal">Copyright</code>, <code
              class="literal">Changelog</code>, <code
              class="literal">Readme</code> y <code
              class="literal">Extra-Files</code> no son campos estándar en los paquetes Debian, sólo tienen sentido dentro del alcance de <code
              class="command">equivs-build</code> y no serán mantenidos en las cabeceras del paquete generado.
			</div><div
            class="example"><a
              id="id-1.18.5.2.6"></a><p
              class="title"><strong>Ejemplo 15.2. Archivo de cabecera del paquete falso <span
                  class="emphasis"><em>libxml-libxml-perl</em></span></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Sección: perl
Prioridad: optional
Versión-Standards: 3.9.6

Paquete: libxml-libxml-perl
Versión: 2.0116-1
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Dependencias: libxml2 (&gt;= 2.7.4)
Arquitectura: all
Description: Paquete falso - módulo instalado manualmente en site_perl
 Se trata de un paquete falso que hace creer al sistema de 
 empaquetado que este paquete Debian está instalado.
 .
 De hecho, el paquete no se instala si una version más moderna
 del módulo se ha compilado manualmente e instalado en el
 directorio site_perl.</pre></div></div><div
            class="para">
				EL siguiente paso es generar el paquete Debian ejecutando <code
              class="command">equivs-build <em
                class="replaceable">archivo</em></code>. Voilà: se creó el paquete en el directorio actual y lo puede utilizar como cualquier otro paquete Debian.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.18.5.3"></a>15.2.2. Simple compendio de archivos</h3></div></div></div><div
            class="para">
				Los administradores de Falcot Corp necesitaron crear un paquete Debian para facilitar el despliegue de un conjunto de documentos en una gran cantidad de equipos. El administrador a cargo de esta tarea primero leyó la «Guía del nuevo desarrollador de Debian» y luego comenzó a trabajar en su primer paquete. <div
              class="url">→ <a
                href="https://www.debian.org/doc/manuals/maint-guide/">https://www.debian.org/doc/manuals/maint-guide/</a></div>
			</div><div
            class="para">
				El primer paso es crear un directorio <code
              class="filename">falcot-data-1.0</code> que contendrá el paquete fuente objetivo. El paquete, lógicamente, se llamará <code
              class="literal">falcot-data</code> y tendrá el número de versión <code
              class="literal">1.0</code>. El administrador luego ubicará los archivos de documentos en un subdirectorio <code
              class="filename">data</code>. Luego ejecutará <code
              class="command">dh_make</code> (del paquete <span
              class="pkg pkg">dh-make</span>) para agregar los archivos necesarios para el proceso de generación del paquete, que serán almacenados en un subdirectorio <code
              class="filename">debian</code>:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd falcot-data-1.0</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>dh_make --native</code></strong>
<code
              class="computeroutput">
Type of package: single binary, indep binary, multiple binary, library, kernel module, kernel patch?
 [s/i/m/l/k/n] </code><strong
              class="userinput"><code>i</code></strong>
<code
              class="computeroutput">
Maintainer name : Raphael Hertzog
Email-Address   : hertzog@debian.org
Date            : Fri, 04 Sep 2015 12:09:39 -0400
Package Name    : falcot-data
Version         : 1.0
License         : gpl3
Type of Package : Independent
Hit &lt;enter&gt; to confirm:
Currently there is no top level Makefile. This may require additional tuning.
Done. Please edit the files in the debian/ subdirectory now. You should also
check that the falcot-data Makefiles install into $DESTDIR and not in / .
$</code></pre><div
            class="para">
				El tipo de paquete seleccionado (<span
              class="emphasis"><em>binario independiente</em></span>: «indep binary») indica que este paquete fuente generará sólo un paquete binario que puede ser compartido entre todas las arquitecturas (<code
              class="literal">Architecture: all</code>. <span
              class="emphasis"><em>Binario único</em></span> («single binary») es lo contrario y generará sólo un paquete binario que depende de la arquitectura objetivo (<code
              class="literal">Architecture: any</code>). En este caso, esta primera opción es la más relevante, ya que el paquete sólo contiene documentos y ningún programa binario, por lo que se lo puede utilizar de la misma forma en equipos de cualquier arquitectura.
			</div><a
            id="id-1.18.5.3.6"
            class="indexterm"></a><a
            id="id-1.18.5.3.7"
            class="indexterm"></a><div
            class="para">
				El tipo <span
              class="emphasis"><em>binario múltiple</em></span> («multiple binary») corresponde a un paquete fuente que generará varios paquetes binarios. Un caso particular, <span
              class="emphasis"><em>biblioteca</em></span> («library»), es útil para bibliotecas compartidas ya que necesitan seguir reglas de empaquetado estrictas. De forma similar, debería restringir el uso de <span
              class="emphasis"><em>módulo de núcleo</em></span> («kernel module») o <span
              class="emphasis"><em>parche del núcleo</em></span> («kernel patch») a paquetes que contengan módulos de núcleo.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Nombre y dirección de correo del encargado</strong></p></div></div></div><div
              class="para">
				La mayoría de los programas involucrados al mantener paquetes buscarán su nombre y dirección de correo en las variables de entorno <code
                class="varname">DEBFULLNAME</code> y <code
                class="varname">DEBEMAIL</code> o <code
                class="varname">EMAIL</code>. Definirlas de una vez y para siempre le evitará tener que ingresarlas varias veces. Si su consola usual es <code
                class="command">bash</code>, es simple cuestión de agregar las siguientes dos líneas a su archivo <code
                class="filename">~/.bashrc</code> (¡obviamente reemplazará los valores con unos más relevantes!):
			</div><pre
              class="programlisting">
export EMAIL="hertzog@debian.org"
export DEBFULLNAME="Raphael Hertzog"</pre></div><div
            class="para">
				El programa <code
              class="command">dh_make</code> crea un subdirectorio <code
              class="filename">debian</code> con muchos archivos. Algunos son necesarios, en particular <code
              class="filename">rules</code>, <code
              class="filename">control</code>, <code
              class="filename">changelog</code> y <code
              class="filename">copyright</code>. Los archivos con extensión <code
              class="filename">.ex</code> son archivos de ejemplo que puede utilizar modificándolos (y eliminando la extensión) cuando necesite. Si no los necesita, le recomendamos eliminarlos. Debe mantener el archivo <code
              class="filename">compat</code> ya que es necesario para que funcione correctamente la suite de programas <span
              class="emphasis"><em>debhelper</em></span> (todos los que comienzan con el prefijo <code
              class="command">dh_</code>) que son utilizados en varias etapas del proceso de creación del paquete.
			</div><div
            class="para">
				El archivo <code
              class="filename">copyright</code> debe contener la información sobre los autores de los documentos incluidos en el paquete y las licencias relacionadas. En nuestro caso, éstos son documentos internos y su uso está restringido a la empresa Falcot Corp. El archivo <code
              class="filename">changelog</code> predeterminado generalmente es el apropiado; Es sufuciente reemplazar «Initial release» con una explicación más detallada y cambiar la distribución de <code
              class="literal">unstable</code> a <code
              class="literal">internal</code>. También se actualizó el archivo <code
              class="filename">control</code>: se modificó el campo <code
              class="literal">Sección</code> a <span
              class="emphasis"><em>misc</em></span> y se eliminaron los campos <code
              class="literal">Homepage</code>, <code
              class="literal">Vcs-Git</code> y <code
              class="literal">Vcs-Browser</code>. Se completaron los campos de <code
              class="literal">Depends</code> con <code
              class="literal">iceweasel | www-browser</code> para asegurar que exista un navegador web disponible capaz de mostrar los documentos en el paquete.
			</div><div
            class="example"><a
              id="id-1.18.5.3.12"></a><p
              class="title"><strong>Ejemplo 15.3. El archivo <code
                  class="filename">control</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Source: falcot-data
Section: misc
Priority: optional
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Build-Depends: debhelper (&gt;= 9)
Standards-Version: 3.9.5

Paquate: falcot-data
Arquitectura: all
Dependencias: iceweasel | www-browser, ${misc:Depends}
Descripción: Documentación interna de Falcot Corp
 Este paquete proporciona varios documentos que decriben la estructura 
 interna de Falcot Corp.  Incluye:
  - diagrama de la organización
  - contactos para cada departamento.
 .
 Estos documentos NO DEBEN salir de la empresa.
 Solo para USO INTERNO.</pre></div></div><div
            class="example"><a
              id="id-1.18.5.3.13"></a><p
              class="title"><strong>Ejemplo 15.4. El archivo <code
                  class="filename">changelog</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
falcot-data (1.0) internal; urgency=low

  * Entrega inicial.
  * Empecemos con unos pocos documentos:
    - estructura interna de la compañía;
    - contactos para cada departamento.

 -- Raphael Hertzog &lt;hertzog@debian.org&gt;  Fri, 04 Sep 2015 12:09:39 -0400</pre></div></div><div
            class="example"><a
              id="id-1.18.5.3.14"></a><p
              class="title"><strong>Ejemplo 15.5. El archivo <code
                  class="filename">copyright</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Formato: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
Upstream-Name: falcot-data

Ficheros: *
Copyright: 2004-2015 Falcot Corp
Licencia: 
 Todos los derechos reservados.</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> El archivo <code
                        class="filename">Makefile</code></strong></p></div></div></div><a
              id="id-1.18.5.3.15.2"
              class="indexterm"></a><div
              class="para">
				Un archivo <code
                class="filename">Makefile</code> es un script utilizado por el programa <code
                class="command">make</code>; describe las reglas para crear un conjunto de archivos desde otros en un árbol de dependencias (por ejemplo, podemos compilar un programa desde un conjunto de archivos fuente). El archivo <code
                class="filename">Makefile</code> describe estas reglas en el siguiente formato:
			</div><pre
              class="programlisting">
objetivo: fuente1 fuente 2 ...
        orden1
        orden2</pre><div
              class="para">
				La interpretación de esta regla es como sigue: si uno de los archivos <code
                class="literal">fuente*</code> es más reciente que el archivo <code
                class="literal">objetivo</code>, entonces es necesario generar el objetivo utilizando <code
                class="command">orden1</code> y <code
                class="command">orden2</code>.
			</div><div
              class="para">
				Sepa que las líneas de órdenes deben comenzar con un carácter de tabulación; también debe saber que cuando una línea de órdenes comienza con un carácater de guión (<code
                class="literal">-</code>), si éste falla no interrumpirá todo el proceso.
			</div></div><div
            class="para">
				El archivo <code
              class="filename">rules</code> generalmente contiene un conjunto de reglas utilizadas para configurar, compilar e instalar el software en un subdirectorio dedicado (cuyo nombre coincide con el del paquete binario generado). Luego se incluye el contenido de este subdirectorio en el compendio del paquete Debian como si fuera la raíz del sistema de archivos. En nuestro caso, se instalarán los archivos en el subdirectorio <code
              class="filename">debian/falcot-data/usr/share/falcot-data/</code> para que el paquete generado despliegue los archivos en <code
              class="filename">/usr/share/falcot-data/</code>. Se utiliza el archivo <code
              class="filename">rules</code> como si fuera un archivo <code
              class="filename">Makefile</code>, con unos pocos objetivos estándar (incluyendo <code
              class="literal">clean</code> y <code
              class="literal">binary</code>, utilizados para limpiar el directorio fuente y generar el paquete binario respectivamente).
			</div><div
            class="para">
				Si bien este archivo es el corazón del proceso, cada vez más contiene sólo el mínimo indispensable para ejecutar un conjunto estándar de programas que provee la herramienta <code
              class="command">debhelper</code>. Tal es el caso de los archivos generados por <code
              class="command">dh_make</code>. Para instalar nuestros archivos simplemente configuraríamos el comportamiento de <code
              class="command">dh_install</code> creando el siguiente archivo <code
              class="filename">debian/falcot-data.install</code>:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/</pre><div
            class="para">
				En este punto, podemos crear el paquete. Sin embargo, agregaremos una capa de pintura. Debido a que los administradores desean que se pueda acceder fácilmente a los documentos desde los menú de los entornos gráficos de escritorio, añadiremos un fichero <code
              class="filename">falcot-data.desktop</code> y lo instalaremos en <code
              class="filename">/usr/share/applications</code> agregando una segunda línea a <code
              class="filename">debian/falcot-data.install</code>.
			</div><div
            class="example"><a
              id="id-1.18.5.3.20"></a><p
              class="title"><strong>Ejemplo 15.6. El archivo <code
                  class="filename">falcot-data.desktop</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
[Desktop Entry]
Name=Documentaciónn Interna Falcot Corp
Comment=Inicia un navegador para leer la documentación
Exec=x-www-browser /usr/share/falcot-data/index.html
Terminal=false
Type=Application
Categories=Documentation;</pre></div></div><div
            class="para">
				El <code
              class="filename">debian/falcot-data.install</code> actualizado se parece a este:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/
falcot-data.desktop usr/share/applications/</pre><div
            class="para">
				Ahora nuestro paquete fuente está listo. Todo lo que falta es generar el paquete binario con el mismo método que utilizamos para recompilar paquetes: ejecutaremos <code
              class="command">dpkg-buildpackage -us -uc</code> desde el directorio <code
              class="filename">falcot-data-1.0</code>.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Anterior</strong>Capítulo 15. Creación de un paquete Debian</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Siguiente</strong>15.3. Creación de un repositorio de paquetes para...</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.building-first-package.html">ar-MA</a></li><li><a
              href="../da-DK/sect.building-first-package.html">da-DK</a></li><li><a
              href="../de-DE/sect.building-first-package.html">de-DE</a></li><li><a
              href="../el-GR/sect.building-first-package.html">el-GR</a></li><li><a
              href="../en-US/sect.building-first-package.html">en-US</a></li><li><a
              href="../es-ES/sect.building-first-package.html">es-ES</a></li><li><a
              href="../fa-IR/sect.building-first-package.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.building-first-package.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.building-first-package.html">hr-HR</a></li><li><a
              href="../id-ID/sect.building-first-package.html">id-ID</a></li><li><a
              href="../it-IT/sect.building-first-package.html">it-IT</a></li><li><a
              href="../ja-JP/sect.building-first-package.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.building-first-package.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.building-first-package.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.building-first-package.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.building-first-package.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.building-first-package.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.building-first-package.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.building-first-package.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.building-first-package.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.building-first-package.html">zh-TW</a></li></ul></div></body></html>
