<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">B.4. Vissa uppgifter hanteras av kärnan</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-sv-SE-1.0-1" /><meta
        name="keywords"
        content="BIOS, Kärna, Unix, Process, Hierarki, Grundläggande kommandon" /><link
        rel="home"
        href="index.html"
        title="Handbok för Debianadministratören" /><link
        rel="up"
        href="short-remedial-course.html"
        title="Appendix B. Kort snabbkurs" /><link
        rel="prev"
        href="sect.computer-layers.html"
        title="B.3. Hur en dator fungerar inuti: de olika lagren som är inblandade" /><link
        rel="next"
        href="sect.user-space.html"
        title="B.5. Användarrymden" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/sv-SE/sect.kernel-role-and-tasks.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.computer-layers.html"><strong>Föregående</strong></a></li><li
          class="home">Handbok för Debianadministratören</li><li
          class="next"><a
            accesskey="n"
            href="sect.user-space.html"><strong>Nästa</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.kernel-role-and-tasks"></a>B.4. Vissa uppgifter hanteras av kärnan</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.hardware-drivers"></a>B.4.1. Köra hårdvaran</h3></div></div></div><div
            class="para">
				Kärnan har, i första hand, uppgiften att kontrollera hårdvarudelarna, detektera dem, slå på dem när datorn är strömsatt o.s.v. Den gör dem också tillgängliga för programvara på högre nivå med ett förenklat programmeringsgränssnitt, så att program kan dra nytta av enheter utan att behöva känna till detaljer så som vilken expansionsport expansionskortet sitter i. Programmeringsgränssnittet tillhandahåller också ett abstraktionslager; detta låter till exempel videokonferenssystem använda en webbkamera oberoende av tillverkare och modell. Programvara kan helt enkelt använda gränssnittet <span
              class="emphasis"><em>Video for Linux</em></span> (V4L, Video för Linux), varpå kärnan översätter funktionsanropen för detta gränssnitt till de hårdvarukommandon som behövs för den specifika webbkamera som används.
			</div><div
            class="para">
				<a
              id="id-1.21.7.2.3.1"
              class="indexterm"></a> <a
              id="id-1.21.7.2.3.2"
              class="indexterm"></a> <a
              id="id-1.21.7.2.3.3"
              class="indexterm"></a> <a
              id="id-1.21.7.2.3.4"
              class="indexterm"></a> Kärnan exporterar många detaljer om detekterad hårdvara via de virtuella filsystemen <code
              class="filename">/proc/</code> och <code
              class="filename">/sys/</code>. Flera verktyg sammanfattar dessa detaljer. Bland dem finns <code
              class="command">lspci</code> (i paketet <span
              class="pkg pkg">pciutils</span>) som listar PCI-enheter, <code
              class="command">lsusb</code> (i paketet <span
              class="pkg pkg">usbutils</span>) som listar USB-enheter, och <code
              class="command">lspcmcia</code> (i paketet <span
              class="pkg pkg">pcmciautils</span>) som listar PCMCIA-kort. Dessa verktyg är mycket användbara för att identifiera en enhets exakta modellnummer. Denna identifikation tillåter också mer precis sökning på internet, vilket i sin tur leder till mer relevanta dokument.
			</div><div
            class="example"><a
              id="id-1.21.7.2.4"></a><p
              class="title"><strong>Exempel B.1. Exempel på information som tillhandahålls av <code
                  class="command">lspci</code> och <code
                  class="command">lsusb</code></strong></p><div
              class="example-contents"><pre
                class="screen">
<code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>lspci</code></strong>
<code
                  class="computeroutput">[...]
00:02.1 Display controller: Intel Corporation Mobile 915GM/GMS/910GML Express Graphics Controller (rev 03)
00:1c.0 PCI bridge: Intel Corporation 82801FB/FBM/FR/FW/FRW (ICH6 Family) PCI Express Port 1 (rev 03)
00:1d.0 USB Controller: Intel Corporation 82801FB/FBM/FR/FW/FRW (ICH6 Family) USB UHCI #1 (rev 03)
[...]
01:00.0 Ethernet controller: Broadcom Corporation NetXtreme BCM5751 Gigabit Ethernet PCI Express (rev 01)
02:03.0 Network controller: Intel Corporation PRO/Wireless 2200BG Network Connection (rev 05)
$ </code><strong
                  class="userinput"><code>lsusb</code></strong>
<code
                  class="computeroutput">Bus 005 Device 004: ID 413c:a005 Dell Computer Corp.
Bus 005 Device 008: ID 413c:9001 Dell Computer Corp.
Bus 005 Device 007: ID 045e:00dd Microsoft Corp.
Bus 005 Device 006: ID 046d:c03d Logitech, Inc.
[...]
Bus 002 Device 004: ID 413c:8103 Dell Computer Corp. Wireless 350 Bluetooth
</code></pre></div></div><div
            class="para">
				Dessa program har en flagga <code
              class="literal">-v</code> som listar ännu mer detaljerad information (som vanligen inte behövs). Avslutningsvis listar kommandot <code
              class="command">lsdev</code> (i paketet <span
              class="pkg pkg">procinfo</span>) kommunikationsresurser som används av enheter.
			</div><div
            class="para">
				Program får ofta tillgång till enheter genom speciella filer som skapas i <code
              class="filename">/dev/</code> (se sidopanel <a
              class="xref"
              href="sect.creating-accounts.html#sidebar.special-files"><span
                class="emphasis"><em>BACK TO BASICS</em></span> Device access permissions</a>). Dessa är speciella filer som representerar diskenheter (till exempel <code
              class="filename">/dev/hda</code> och <code
              class="filename">/dev/sdc</code>), partitioner (<code
              class="filename">/dev/hda1/</code> eller <code
              class="filename">/dev/sdc3</code>), möss (<code
              class="filename">/dev/input/mouse0</code>), tangentbord (<code
              class="filename">/dev/input/event0</code>), ljudkort (<code
              class="filename">/dev/snd/*</code>), serieportar (<code
              class="filename">/dev/ttyS*</code>), o.s.v.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.filesystems"></a>B.4.2. Filsystem</h3></div></div></div><a
            id="id-1.21.7.3.2"
            class="indexterm"></a><a
            id="id-1.21.7.3.3"
            class="indexterm"></a><div
            class="para">
				Filsystem är en av de väsentligaste aspekterna av kärnan. Unix-system sammanfogar alla lagrade filer i en enda hierarki, vilket låter användare (och program) komma åt data genom att endast känna till dess plats inom den hierarkin.
			</div><div
            class="para">
				Startpunkten för detta hierarkiska träd kallas för roten, <code
              class="filename">/</code>. Denna katalog kan innehålla namngivna underkataloger. Till exempel är <code
              class="literal">home</code> en underkatalog till <code
              class="filename">/</code> som kallas <code
              class="filename">/home/</code>. Denna underkatalog kan i sin tur innehålla andra underkataloger, o.s.v. Varje katalog kan också innehålla filer, i vilka faktisk data kommer att lagras. Således refererar namnet <code
              class="filename">/home/rmas/Skrivbord/hej.txt</code> till en fil med namnet <code
              class="literal">hej.txt</code> lagrad i underkatalogen <code
              class="literal">Skrivbord</code> i underkatalogen <code
              class="literal">rmas</code> i katalogen <code
              class="literal">home</code> som finns i roten. Kärnan översätter mellan detta namngivningssystem och den riktiga fysiska lagringsplatsen på disk.
			</div><div
            class="para">
				Till skillnad från andra operativsystem, finns det bara en sådan hierarki, och den kan integrera data från flera diskar. En av dessa diskar används som roten och de andras ”monteras” som kataloger i hierarkin (Unix-kommandot kallas <code
              class="command">mount</code> (montera)); dess andra diskar är sedan tillgängliga under dessa ”monteringspunkter”. Detta tillåter lagring av användares hemkataloger (vanligtvis lagrade i <code
              class="filename">/home/</code>) på en annan hårddisk, vilken kommer att innehålla katalogerna <code
              class="literal">rhertzog</code> och <code
              class="literal">rmas</code>. När disken är monterad på <code
              class="filename">/home/</code> kommer dessa kataloger att kunna nås på deras vanliga platser, och sökvägar så som <code
              class="filename">/home/rmas/Skrivbord/hej.txt</code> kommer att fortsätta fungera.
			</div><a
            id="id-1.21.7.3.7"
            class="indexterm"></a><div
            class="para">
				Det finns flera filsystemsformat, vilket motsvaras av att det finns många sätt att fysiskt lagra data på diskar. De mest kända är <span
              class="emphasis"><em>ext2</em></span>, <span
              class="emphasis"><em>ext3</em></span> och <span
              class="emphasis"><em>ext4</em></span>, men andra finns också. Till exempel så användes filsystemet <span
              class="emphasis"><em>vfat</em></span> historiskt av operativsystemen DOS och Windows, vilket tillåter att hårddiskar kan fungera under Debian såväl som under Windows. Oavsett vilket så måste filsystem förberedas på en disk innan de kan monteras och denna operation kallas ”formatering”. Kommandon så som <code
              class="command">mkfs.ext3</code> (där <code
              class="command">mkfs</code> står för <span
              class="emphasis"><em>MaKe FileSystem</em></span> (skapa filsystem)) hanterar formatering. Dessa kommandon kräver, som en parameter, en enhetsfil som representerar den partition som ska formateras (till exempel <code
              class="filename">/dev/sda1</code>). Denna operation är destruktiv och bör endast köras en gång, förutom om man avsiktligen vill rensa ett filsystem och börja om från början.
			</div><div
            class="para">
				Det finns också nätverksfilsystem, så som <acronym
              class="acronym">NFS</acronym>, där data inte lagras på en lokal disk. Istället skickas data över nätverket till en server som lagrar och hämtar data vid behov. Filsystemsabstraktionen skyddar användaren från att behöva bry sig: filer förblir åtkomliga på det vanliga hierarkiska sättet.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.shared-functions"></a>B.4.3. Delade funktioner</h3></div></div></div><div
            class="para">
				Då ett antal funktioner används av all programvara är det vettigt att centralisera dem i kärnan. Delad filsystemshantering tillåter till exempel vilket program som helst att öppna en fil med namn, utan att behöva bry sig om var filen är lagrad fysiskt. Filen kan lagras på flera olika delar på en hårddisk, eller delad över flera hårddiskar, eller till och med lagrade på en fjärrfilserver. Delade kommunikationsfunktioner används av program för att utbyta data oberoende av hur data transporteras. Till exempel kan transport ske över en kombination av lokala eller trådlösa nätverk eller över en telefonlinje.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.process-management"></a>B.4.4. Hantera processer</h3></div></div></div><a
            id="id-1.21.7.5.2"
            class="indexterm"></a><div
            class="para">
				En process är en körande instans av ett program. Detta kräver minne för att lagra både programmet självt och dess data. Kärnan är ansvarig för att skapa och spåra dem. När ett program kör tilldelar kärnan först lite minne åt programmet, och läser sedan in den körbara koden från filsystem in i detta minne, och börjar sedan köra koden. Den håller information om denna process, det mest väsentliga är ett identifikationsnummer känt som <span
              class="emphasis"><em>pid</em></span> (<span
              class="emphasis"><em>processidentifierare</em></span>).
			</div><div
            class="para">
				Unix-liknande kärnor (inklusive Linux) kan, likt de flera moderna operativsystem, göra flera saker samtidigt. Med andra ord de tillåter att man kör flera processer ”samtidigt”. Det är faktiskt bara en process som kör åt gången, men kärnan delar in tiden i små intervall och kör varje process i turordning. Då dessa tidsintervall är väldigt korta (i storleksordningen millisekunder), ger detta illusionen av att processerna kör parallell, även om de i verkligheten endast är aktiva under vissa tidsintervall och sover resten av tiden. Kärnans jobb är att justera sina schemaläggningsalgoritmer för att behålla den illusionen, medan systemets globala prestanda maximeras. Om tidsintervallen är för långa kan ett program upplevas som att det inte är responsivt. Om intervallen är för korta förlorar systemet tid då uppgifter växlas mellan allt för fort. Dessa beslut kan justeras med processprioriteter. Högprioriterade processer kommer att köra under länge tidsintervall och oftare än lågprioriterade processer.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOT</em></span> Multiprocessorsystem (och varianter)</strong></p></div></div></div><div
              class="para">
				Begränsningen som beskrivits ovan, om att endast en process kan köra åt gången, gäller inte alltid. Den faktiska restriktionen är att det kan endast finnas en process som kör <span
                class="emphasis"><em>per processorkärna</em></span>. Multiprocessorsystem, system med flera kärnor eller ”hypertrådar” låter flera processor köras parallellt. Samma tidsdelningssystem används fortfarande, för att hantera fall där det finns fler aktiva processer än det finns tillgängliga processorkärnor. Detta är långt i från ovanligt: ett grundläggande system, även ett mestadels vilande, har nästan alltid tiotals körande processer.
			</div></div><div
            class="para">
				Kärnan tillåter förstås att flera oberoende instanser av samma program kör samtidigt. Men var och en kan endast använda sina egna tidsintervall och minne. Deras data förblir därmed oberoende.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.permissions"></a>B.4.5. Rättighetshantering</h3></div></div></div><div
            class="para">
				Unix-liknande system är också fleranvändarsystem. De tillhandahåller ett rättighetssystem som har stöd för separata användare och grupper; det tillåter också styrning av åtgärder baserade på rättigheter. Kärnan hanterar data för varje process, vilket låter den styra rättigheter. För det mesta identifieras en process av användaren som startade den. Den processen tillåts endast utföra de åtgärder som dess ägare kan utföra. Att försöka öppna en fil kräver till exempel att kärnan kontrollerar processidentiteten mot åtkomsträttigheter (för vidare information om detta specifika exempel se <a
              class="xref"
              href="sect.rights-management.html">Avsnitt 9.3, ”Hantera behörigheter”</a>).
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.computer-layers.html"><strong>Föregående</strong>B.3. Hur en dator fungerar inuti: de olika lagren...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Upp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.user-space.html"><strong>Nästa</strong>B.5. Användarrymden</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.kernel-role-and-tasks.html">ar-MA</a></li><li><a
              href="../da-DK/sect.kernel-role-and-tasks.html">da-DK</a></li><li><a
              href="../de-DE/sect.kernel-role-and-tasks.html">de-DE</a></li><li><a
              href="../el-GR/sect.kernel-role-and-tasks.html">el-GR</a></li><li><a
              href="../en-US/sect.kernel-role-and-tasks.html">en-US</a></li><li><a
              href="../es-ES/sect.kernel-role-and-tasks.html">es-ES</a></li><li><a
              href="../fa-IR/sect.kernel-role-and-tasks.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.kernel-role-and-tasks.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.kernel-role-and-tasks.html">hr-HR</a></li><li><a
              href="../id-ID/sect.kernel-role-and-tasks.html">id-ID</a></li><li><a
              href="../it-IT/sect.kernel-role-and-tasks.html">it-IT</a></li><li><a
              href="../ja-JP/sect.kernel-role-and-tasks.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.kernel-role-and-tasks.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.kernel-role-and-tasks.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.kernel-role-and-tasks.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.kernel-role-and-tasks.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.kernel-role-and-tasks.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.kernel-role-and-tasks.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.kernel-role-and-tasks.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.kernel-role-and-tasks.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.kernel-role-and-tasks.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.kernel-role-and-tasks.html">zh-TW</a></li></ul></div></body></html>
