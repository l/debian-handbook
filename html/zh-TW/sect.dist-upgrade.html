<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.6. 升級至下個穩定發行版</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-zh-TW-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="apt.html"
        title="章 6. 維護與更新：APT 工具" /><link
        rel="prev"
        href="sect.package-authentication.html"
        title="6.5. 檢查套件真偽" /><link
        rel="next"
        href="sect.regular-upgrades.html"
        title="6.7. 保持系統在最新狀態" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/zh-TW/sect.dist-upgrade.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>前一頁</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>下一頁</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.dist-upgrade"></a>6.6. 升級至下個穩定發行版</h2></div></div></div><div
          class="para">
			Debian 知名的功能之一是可升級至下個穩定版:<span
            class="foreignphrase"><em
              class="foreignphrase">dist-upgrade</em></span> — 知名的句子 — 相當促進 Debian 的名聲。除了極少的例外，升級電腦系統祗需幾分鐘的時間，或暫十來分鐘，依照從套件儲存庫下載的速度而定.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.3"></a>6.6.1. 建議程序</h3></div></div></div><div
            class="para">
				Debian 各穩定版之間存在相當的差異，升級前應仔細閱讀釋出說明。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>基本</em></span> 釋出說明</strong></p></div></div></div><div
              class="para">
				作業系統 (更寛廣的說，任何軟體都在內) 的釋出說明是一份描述軟體概況的文件，特別關照指定的版本。相對於完成的軟體文件，這些文件相當簡短，通常列出前版之後新生成的功能。也提供升級的程序、對前版使用者的警示、以及若干錯誤更正。
			</div><div
              class="para">
				釋出說明是線上的：當前穩定版的釋出說明使用固定的 URL，舊版的釋出說明可在其代碼名下找到:<div
                class="url">→ <a
                  href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></div> <div
                class="url">→ <a
                  href="http://www.debian.org/releases/wheezy/releasenotes">http://www.debian.org/releases/wheezy/releasenotes</a></div>
			</div></div><div
            class="para">
				本段內容專注於由 <span
              class="distribution distribution">Wheezy</span> 系統升級至 <span
              class="distribution distribution">Jessie</span>。這是系統的主要運作；不是 100% 無風險，必須先備份重要的資料才升級。
			</div><div
            class="para">
				減少安裝的套件，祗安裝絕對必要的套件，才能讓升級容易 (且簡短)。相關的工具包括 <code
              class="command">aptitude</code>、<code
              class="command">deborphan</code> 與 <code
              class="command">debfoster</code> (見 <a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">節 6.2.7, “自動追蹤已安裝的套件”</a>)。例如，您可使用以下命令，再使用 <code
              class="command">aptitude</code> 的互動模式再檢查並微調該移除的套件：
			</div><pre
            class="screen"># <strong
              class="userinput"><code>deborphan | xargs aptitude --schedule-only remove</code></strong></pre><div
            class="para">
				接著開始升級了。首先修改 <code
              class="filename">/etc/apt/sources.list</code> 檔案的內容，告訴 APT 從 <span
              class="distribution distribution">Jessie</span> 而不是從 <span
              class="distribution distribution">Wheezy</span> 提取套件。若檔案內祗有 <span
              class="distribution distribution">Stable</span> 而不是指名代碼，則不需要修改，因為 <span
              class="distribution distribution">Stable</span> 總是指向 Debian 最新的釋出版。修改或不修改都一樣，必須重新載入可用套件資料庫 (使用 <code
              class="command">apt update</code> 命令或 <code
              class="command">synaptic</code> 圖形介面的重新載入鈕)。
			</div><div
            class="para">
				註冊這些新增的套件來源後，首先執行最低量的升級 <code
              class="command">apt upgrade</code>。以兩階段升級，減緩套件管理工具的工作並確保使用最新的套件，納入完整發行版升級所需的錯誤更正與改進。
			</div><div
            class="para">
				第一次升級完成後，就該處理升級本身，<code
              class="command">apt full-upgrade</code>、<code
              class="command">aptitude</code>、或 <code
              class="command">synaptic</code>均可。採用之前應小心檢查建議的舉措：應新增建議的套件或移除建議且不再需要的套件。任何情況下，前端都應與 <span
              class="distribution distribution">Jessie</span> 系統相容且是最新的。所以，必須耐心地等待下載必要的套件，回覆 Debconf 的問題以及在地的組態檔，然後等 APT 完成它的工作。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.4"></a>6.6.2. 處理升級後的問題</h3></div></div></div><div
            class="para">
				僅管 Debian 管理者已經儘力做好份內的工作，主系統的升級仍可能卡卡的不如想像中順利。軟體的新版本可能無法與舊的相容 (例如，可能改變預設行為或資料格式)。同時，儘管在 Debian 釋出前做為詳盡的測試，還是有若干漏網的錯誤。
			</div><div
            class="para">
				可以先安裝 <span
              class="pkg pkg">apt-listchanges</span> package, 套件，在套件升級前先顯示可能問題。由套件維護者編輯的這些資訊且置於 <code
              class="filename">/usr/share/doc/<em
                class="replaceable">套件名</em>/NEWS.Debian</code> 檔案名內，供使用者參考。閱讀該等檔案 (可能經由 <span
              class="pkg pkg">apt-listchanges</span>) 應有助於歸避不好的意外。
			</div><div
            class="para">
				新版的軟體不見得都能順利運作。不夠普及或未經詳實測試就會出現這種現象；在穩定版裡，最後升級的軟體常常後悔。碰到這種情形，首先應查看錯誤追蹤系統 <code
              class="literal">https://bugs.debian.org/<em
                class="replaceable">套件名稱</em></code>，尋找別人提報的踪跡。若尚未被提報，就應動手提報它 <code
              class="command">reportbug</code>。若已被提報，錯誤報告與相關的訊息就是處理該錯誤很好的資訊來源：
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						有時已有補丁，並且列在錯誤報告內；可以在地重新編譯修補破碎的套件 (見 <a
                    class="xref"
                    href="debian-packaging.html#sect.rebuilding-package">節 15.1, “Rebuilding a Package from its Sources”</a>)；
					</div></li><li
                class="listitem"><div
                  class="para">
						否則，使用者可能找到另個解決問題的方法且在報告內分享；
					</div></li><li
                class="listitem"><div
                  class="para">
						再不然，維護者可能已準備並公開修訂套件。
					</div></li></ul></div><div
            class="para">
				很嚴重的錯誤，將有特別的套件供穩定版使用。在這種情況下，修訂後的套件位於 Debian 鏡射站的 <code
              class="literal">proposed-updates</code> 區塊 (見 <a
              class="xref"
              href="apt.html#sect.proposed-updates">節 6.1.2.3, “建議更新”</a>)。對應的款目暫時加在 <code
              class="filename">sources.list</code> 檔案內，可用 <code
              class="command">apt</code> 或 <code
              class="command">aptitude</code> 命令安裝升級套件。
			</div><div
            class="para">
				修訂套件尚未被穩定版管理者認可時，就不會出現在此區塊。使用者必須自己動手認可它。雖然列在此的套件尚未可得，但至少已知在審查中。<div
              class="url">→ <a
                href="https://release.debian.org/proposed-updates/stable.html">https://release.debian.org/proposed-updates/stable.html</a></div>
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>前一頁</strong>6.5. 檢查套件真偽</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一層</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始頁</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>下一頁</strong>6.7. 保持系統在最新狀態</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.dist-upgrade.html">ar-MA</a></li><li><a
              href="../da-DK/sect.dist-upgrade.html">da-DK</a></li><li><a
              href="../de-DE/sect.dist-upgrade.html">de-DE</a></li><li><a
              href="../el-GR/sect.dist-upgrade.html">el-GR</a></li><li><a
              href="../en-US/sect.dist-upgrade.html">en-US</a></li><li><a
              href="../es-ES/sect.dist-upgrade.html">es-ES</a></li><li><a
              href="../fa-IR/sect.dist-upgrade.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.dist-upgrade.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.dist-upgrade.html">hr-HR</a></li><li><a
              href="../id-ID/sect.dist-upgrade.html">id-ID</a></li><li><a
              href="../it-IT/sect.dist-upgrade.html">it-IT</a></li><li><a
              href="../ja-JP/sect.dist-upgrade.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.dist-upgrade.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.dist-upgrade.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.dist-upgrade.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.dist-upgrade.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.dist-upgrade.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.dist-upgrade.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.dist-upgrade.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.dist-upgrade.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.dist-upgrade.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.dist-upgrade.html">zh-TW</a></li></ul></div></body></html>
