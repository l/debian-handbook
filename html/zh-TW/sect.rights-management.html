<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.3. 管理權限</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-TW-1.0-1" /><meta
        name="keywords"
        content="系統啟動, 初始化腳本, SSH, Telnet, 權力, 權限, 監督, Inetd, Cron, 備份, 熱插拔, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="unix-services.html"
        title="章 9. Unix 服務" /><link
        rel="prev"
        href="sect.remote-login.html"
        title="9.2. 遠端登入" /><link
        rel="next"
        href="sect.administration-interfaces.html"
        title="9.4. 管理介面" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/zh-TW/sect.rights-management.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>前一頁</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一頁</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.rights-management"></a>9.3. 管理權限</h2></div></div></div><div
          class="para">
			Linux 是多使用者系統，必須以授權系統控制對檔案與資料夾的合法操作，包括所有的系統資源與設備 (在 Unix 系統裡，任何設備都以檔案或資料夾表示)。此原則適用於所有的 Unix 系統，不過多提醒一次總是好的，尤其碰到有趣相關的不明使用情況。
		</div><a
          id="id-1.12.6.3"
          class="indexterm"></a><a
          id="id-1.12.6.4"
          class="indexterm"></a><a
          id="id-1.12.6.5"
          class="indexterm"></a><a
          id="id-1.12.6.6"
          class="indexterm"></a><a
          id="id-1.12.6.7"
          class="indexterm"></a><a
          id="id-1.12.6.8"
          class="indexterm"></a><div
          class="para">
			每個檔案與資料夾都有三組不同權限的使用者：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					擁有者 (符號為 <code
                  class="literal">u</code> 取自使用者的英文字 “user”)；
				</div></li><li
              class="listitem"><div
                class="para">
					群組擁有者 (符號為 <code
                  class="literal">g</code> 取自群組的英文字 “group”)，代表群組內所有的使用者；
				</div></li><li
              class="listitem"><div
                class="para">
					其他 (符號為 <code
                  class="literal">o</code> 取自其他的英文字 “other”)。
				</div></li></ul></div><div
          class="para">
			三種權利可以組合成：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					讀取 (符號為 <code
                  class="literal">r</code> 取自讀取的英文字 “read”)；
				</div></li><li
              class="listitem"><div
                class="para">
					寫入 (或修改，符號為 <code
                  class="literal">w</code> 取自寫入的英文字 “write”)；
				</div></li><li
              class="listitem"><div
                class="para">
					執行 (符號為 <code
                  class="literal">x</code> 取自執行的英文字 “eXecute”)。
				</div></li></ul></div><a
          id="id-1.12.6.13"
          class="indexterm"></a><a
          id="id-1.12.6.14"
          class="indexterm"></a><a
          id="id-1.12.6.15"
          class="indexterm"></a><a
          id="id-1.12.6.16"
          class="indexterm"></a><div
          class="para">
			以檔案來說，其權利較容易理解：讀取就是允許讀取其內容 (包括複製)、寫入就是允許改變它、而執行就是跑它 (檔案本身必須是程式)。
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setuid</code> 與 <code
                      class="literal">setgid</code> 可執行</strong></p></div></div></div><div
            class="para">
			有兩個權利與可執行檔有關：<code
              class="literal">setuid</code> 和 <code
              class="literal">setgid</code> (符號都是字母 “s”)。我們通常都稱 “位元”，因為布林邏輯可以用 0 或 1 代表。這兩個權利允許使用者以擁有者或群組的權限分別執行該程式。此機制把近用權給予需要較高權限的階層。
		</div><a
            id="id-1.12.6.18.3"
            class="indexterm"></a><a
            id="id-1.12.6.18.4"
            class="indexterm"></a><div
            class="para">
			因為 <code
              class="literal">setuid</code> 根程式係在超級使用者的認證下執行，必須確保它的安全與可靠。的確，使用者可能呼叫一個程式，監禁根使用者，並擁有系統的全部權限，並藉此癱瘓整個系統。
		</div></div><div
          class="para">
			資料夾的處理方式略有不同。讀取其款目 (檔案及資料夾)、寫入包括新增與刪除檔案、而執行則是進入它 (尤其是使用 <code
            class="command">cd</code> 命令)。進入資料夾而不必有讀取權限，執行已知的檔名，若不知其正確的名稱，則無法執行。
		</div><div
          class="sidebar"><a
            id="sidebar.setgid-dir"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setgid</code> 資料夾和 <span
                      class="emphasis"><em>sticky bit</em></span></strong></p></div></div></div><a
            id="id-1.12.6.20.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="literal">setgid</code> 位元也適用於資料夾。在該資料夾新增的項目自動賦予上層資料夾的群組擁有者權限，而不是繼承新增者的主要群組權限。與同組其他使用者共享檔案樹時，這種設定避免使用者改變其主要群組 (以 <code
              class="command">newgrp</code> 命令)。
		</div><a
            id="id-1.12.6.20.4"
            class="indexterm"></a><div
            class="para">
			“sticky” bit (符號為字母 “t”) 是一種祗適用於資料夾的授權。特別用在大家都能寫入的暫時性的資料夾 (如 <code
              class="filename">/tmp/</code>)：但祗限檔案的擁有者 (或上層資料夾的) 才能刪除其檔案。少了這層授權，每個人都能刪除其他人在 <code
              class="filename">/tmp/</code> 裡的檔案。
		</div></div><div
          class="para">
			三個命令控制檔案的授權：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chown <em
                    class="replaceable">user</em> <em
                    class="replaceable">file</em></code> 改變檔案的擁有者；
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chgrp <em
                    class="replaceable">group</em> <em
                    class="replaceable">file</em></code> 改變群組的擁有者；
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chmod <em
                    class="replaceable">rights</em> <em
                    class="replaceable">file</em></code> 改變檔案的權限。
				</div></li></ul></div><div
          class="para">
			有兩種方法表示權限。其中，符號表示最容易理解和記憶。它使用前述的符號。可以經由 (<code
            class="literal">u</code>/<code
            class="literal">g</code>/<code
            class="literal">o</code>)，經過等於 ( <code
            class="literal">=</code>)、加 (<code
            class="literal">+</code>)、或減 (<code
            class="literal">-</code>) 設定每種使用者的權限類型。因此，<code
            class="literal">u=rwx,g+rw,o-r</code> 格式賦予擁有者讀、寫與執行的權限，對群組的擁有者給予讀寫的權限，以及移除其他使用者讀取的權限。命令中未新增或減少的權限不變。字母 <code
            class="literal">a</code> 指所有的英文字 “all”，涵蓋三種類型的使用者，所以 <code
            class="literal">a=rx</code> 給予三種使用者相同的權限 (讀與執行，但沒有寫)。
		</div><a
          id="id-1.12.6.24"
          class="indexterm"></a><a
          id="id-1.12.6.25"
          class="indexterm"></a><a
          id="id-1.12.6.26"
          class="indexterm"></a><a
          id="id-1.12.6.27"
          class="indexterm"></a><a
          id="id-1.12.6.28"
          class="indexterm"></a><div
          class="para">
			每個權限都可對應一個數值 (8 進位)：4 讀、2 寫、1 執行。這些數值可以加起來表示其權限的組合。每個值依序置於不同使用者的類型之後 (擁有者、群組、其他)。
		</div><div
          class="para">
			例如，<code
            class="command">chmod 754 <em
              class="replaceable">file</em></code> 命令將設定以下的權限：擁有者的讀、寫與執行 (因為 7 = 4 + 2 + 1) 權限；群組的讀與執行 (因為 5 = 4 + 1) 權限；其他的讀權限。<code
            class="literal">0</code> 就是沒有權限；因此 <code
            class="command">chmod 600 <em
              class="replaceable">file</em></code> 命令讓擁有者的讀/寫權限，其他的使用者沒有任何權限。最常用的權限組合是 <code
            class="literal">755</code> 供可執行檔案與資料夾，以及 <code
            class="literal">644</code> 供資料檔案。
		</div><div
          class="para">
			還可以設定特別的權限，以同權的原則在原數值之前加入第四個數值，<code
            class="literal">setuid</code>、<code
            class="literal">setgid</code> 和 <code
            class="literal">sticky</code> 的位元數分別是 4、2 和 1。<code
            class="command">chmod 4754</code> 設置 <code
            class="literal">setuid</code> 前述的位元權限。
		</div><div
          class="para">
			八進位標記祗適用於對檔案的一次性設定所有權限；不能以它加入新的權限，如群組擁有者的讀取，因為必須把現在的權限與計算新的數值。
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>秘訣</em></span> 遞迴運算</strong></p></div></div></div><div
            class="para">
			有時需要改變整個檔案樹的權限。前述的命令可加入 <code
              class="literal">-R</code> 選項，在次資料夾內做遞迴運算。
		</div><div
            class="para">
			資料夾與檔案的不同，有時造成遞迴運算的問題。所以，在符號式權限裡加入 “X” 字母。它代表祗對資料夾 (不是檔案) 的執行權。因此，<code
              class="command">chmod -R a+X <em
                class="replaceable">directory</em></code> 對至少一個範疇使用者 (即使祗有一個擁有者) 已經有執行權的所有次資料夾與檔案，祗對所有範疇使用者加入執行權 (<code
              class="literal">a</code>)。
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>秘訣</em></span> 改變使用者和群組</strong></p></div></div></div><div
            class="para">
			通常在改變擁有者的時候，也要改變檔案的群組。<code
              class="command">chown</code> 命令有個特別的語法，用在這個時機：<code
              class="command">chown <em
                class="replaceable">user</em>:<em
                class="replaceable">group</em> <em
                class="replaceable">file</em></code>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>下一步</em></span> <code
                      class="command">umask</code></strong></p></div></div></div><div
            class="para">
			新增檔案時，給予指示性權限，系統使用 <code
              class="command">umask</code> 指令調整該檔案的權限。在 shell 鍵入 <code
              class="command">umask</code> 指令；就可見到 <code
              class="computeroutput">0022</code> 之類的回應。以八進位碼表示的權限，可以系統地移除 (在本例中，給予群組與其他使用者寫入的權限)。
		</div><a
            id="id-1.12.6.35.3"
            class="indexterm"></a><a
            id="id-1.12.6.35.4"
            class="indexterm"></a><a
            id="id-1.12.6.35.5"
            class="indexterm"></a><div
            class="para">
			若指定新的八進位值，<code
              class="command">umask</code> 命令修改 mask。在 shell 初始檔 (如，<code
              class="filename">~/.bash_profile</code>)，它改變預設工作階段的 mask。
		</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>前一頁</strong>9.2. 遠端登入</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一層</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始頁</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一頁</strong>9.4. 管理介面</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.rights-management.html">ar-MA</a></li><li><a
              href="../da-DK/sect.rights-management.html">da-DK</a></li><li><a
              href="../de-DE/sect.rights-management.html">de-DE</a></li><li><a
              href="../el-GR/sect.rights-management.html">el-GR</a></li><li><a
              href="../en-US/sect.rights-management.html">en-US</a></li><li><a
              href="../es-ES/sect.rights-management.html">es-ES</a></li><li><a
              href="../fa-IR/sect.rights-management.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.rights-management.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.rights-management.html">hr-HR</a></li><li><a
              href="../id-ID/sect.rights-management.html">id-ID</a></li><li><a
              href="../it-IT/sect.rights-management.html">it-IT</a></li><li><a
              href="../ja-JP/sect.rights-management.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.rights-management.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.rights-management.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.rights-management.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.rights-management.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.rights-management.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.rights-management.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.rights-management.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.rights-management.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.rights-management.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.rights-management.html">zh-TW</a></li></ul></div></body></html>
