<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.6. 升级至下个稳定发行版</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-zh-CN-1.0-1" /><meta
        name="keywords"
        content="高级包管理工具(Advanced Packaging Tool), apt-get, apt-cache, aptitude 更安全的apt, 新立得包管理器, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="apt.html"
        title="第 6 章 维护和更新：APT 工具" /><link
        rel="prev"
        href="sect.package-authentication.html"
        title="6.5. 检查软件包真伪" /><link
        rel="next"
        href="sect.regular-upgrades.html"
        title="6.7. 保持系统在最新状态" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/zh-CN/sect.dist-upgrade.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>下一页</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.dist-upgrade"></a>6.6. 升级至下个稳定发行版</h2></div></div></div><div
          class="para">
			Debian 知名的功能之一是可升级至下个稳定版:<span
            class="foreignphrase"><em
              class="foreignphrase">dist-upgrade</em></span> — 知名的句子 — 相当促进 Debian 的名声。除了极少的例外，升级电脑系统只需几分钟的时间，或暂十来分钟，依照从软件包保存库下载的速度而定.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.3"></a>6.6.1. 建议进程</h3></div></div></div><div
            class="para">
				Debian 各稳定版之间存在相当的差异，升级前应仔细阅读发布说明。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>基本</em></span> 发布说明</strong></p></div></div></div><div
              class="para">
				操作系统 (更宽广的说，任何软件都在内) 的发布说明是一份描述软件概况的文档，特别关照指定的版本。相对于完成的软件文档，这些文档相当简短，通常列出前版之后新生成的功能。也提供升级的进程、对前版用户的警示、以及若干错误更正。
			</div><div
              class="para">
				Release notes are available online: the release notes for the current stable release have a dedicated URL, while older release notes can be found with their codenames: <div
                class="url">→ <a
                  href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></div> <div
                class="url">→ <a
                  href="http://www.debian.org/releases/jessie/releasenotes">http://www.debian.org/releases/jessie/releasenotes</a></div>
			</div></div><div
            class="para">
				In this section, we will focus on upgrading a <span
              class="distribution distribution">Jessie</span> system to <span
              class="distribution distribution">Stretch</span>. This is a major operation on a system; as such, it is never 100% risk-free, and should not be attempted before all important data has been backed up.
			</div><div
            class="para">
				减少安装的软件包，只安装绝对必要的软件包，才能让升级容易 (且简短)。相关的工具包括 <code
              class="command">aptitude</code>、<code
              class="command">deborphan</code> 与 <code
              class="command">debfoster</code> (见 <a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">第 6.2.7 节 “自动追踪已安装的软件包”</a>)。例如，您可使用以下命令，再使用 <code
              class="command">aptitude</code> 的交互模式再检查并微调该移除的软件包：
			</div><pre
            class="screen"># <strong
              class="userinput"><code>deborphan | xargs aptitude --schedule-only remove</code></strong></pre><div
            class="para">
				Now for the upgrading itself. First, you need to change the <code
              class="filename">/etc/apt/sources.list</code> file to tell APT to get its packages from <span
              class="distribution distribution">Stretch</span> instead of <span
              class="distribution distribution">Jessie</span>. If the file only contains references to <span
              class="distribution distribution">Stable</span> rather than explicit codenames, the change isn't even required, since <span
              class="distribution distribution">Stable</span> always refers to the latest released version of Debian. In both cases, the database of available packages must be refreshed (with the <code
              class="command">apt update</code> command or the refresh button in <code
              class="command">synaptic</code>).
			</div><div
            class="para">
				注册这些添加的软件包来源后，首先运行最低量的升级 <code
              class="command">apt upgrade</code>。以两阶段升级，减缓软件包管理工具的工作并确保使用最新的软件包，纳入完整发行版升级所需的错误更正与改进。
			</div><div
            class="para">
				Once this first upgrade is done, it is time to handle the upgrade itself, either with <code
              class="command">apt full-upgrade</code>, <code
              class="command">aptitude</code>, or <code
              class="command">synaptic</code>. You should carefully check the suggested actions before applying them: you might want to add suggested packages or deselect packages which are only recommended and known not to be useful. In any case, the front-end should come up with a scenario ending in a coherent and up-to-date <span
              class="distribution distribution">Stretch</span> system. Then, all you need is to do is wait while the required packages are downloaded, answer the Debconf questions and possibly those about locally modified configuration files, and sit back while APT does its magic.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.4"></a>6.6.2. 处理升级后的问题</h3></div></div></div><div
            class="para">
				仅管 Debian 管理者已经尽力做好份内的工作，主系统的升级仍可能卡卡的不如想像中顺利。软件的新版本可能无法与旧的兼容 (例如，可能改变缺省行为或数据格式)。同时，尽管在 Debian 发布前做为详尽的测试，还是有若干漏网的错误。
			</div><div
            class="para">
				可以先安装 <span
              class="pkg pkg">apt-listchanges</span> package, 软件包，在软件包升级前先显示可能问题。由软件包维护者编辑的这些信息且置于 <code
              class="filename">/usr/share/doc/<em
                class="replaceable">软件包名</em>/NEWS.Debian</code> 文件名内，供用户参考。阅读该等文件 (可能经由 <span
              class="pkg pkg">apt-listchanges</span>) 应有助于归避不好的意外。
			</div><div
            class="para">
				新版的软件不见得都能顺利运作。不够普及或未经详实测试就会出现这种现象；在稳定版里，最后升级的软件常常后悔。碰到这种情形，首先应查看错误追踪系统 <code
              class="literal">https://bugs.debian.org/<em
                class="replaceable">软件包名称</em></code>，寻找别人提报的踪迹。若尚未被提报，就应动手提报它 <code
              class="command">reportbug</code>。若已被提报，错误报告与相关的消息就是处理该错误很好的信息来源：
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						有时已有补丁，并且列在错误报告内；可以本地重新编译修补破碎的软件包 (见 <a
                    class="xref"
                    href="debian-packaging.html#sect.rebuilding-package">第 15.1 节 “从源码重建安装包”</a>);
					</div></li><li
                class="listitem"><div
                  class="para">
						否则，用户可能找到另个解决问题的方法且在报告内分享;
					</div></li><li
                class="listitem"><div
                  class="para">
						再不然，维护者可能已准备并公开修订软件包。
					</div></li></ul></div><div
            class="para">
				很严重的错误，将有特别的软件包供稳定版使用。在这种情况下，修订后的软件包位于 Debian 镜射站的 <code
              class="literal">proposed-updates</code> 区块 (见 <a
              class="xref"
              href="apt.html#sect.proposed-updates">第 6.1.2.3 节 “计划更新”</a>)。对应的条目暂时加在 <code
              class="filename">sources.list</code> 文件内，可用 <code
              class="command">apt</code> 或 <code
              class="command">aptitude</code> 命令安装升级软件包。
			</div><div
            class="para">
				修订软件包尚未被稳定版管理者认可时，就不会出现在此区块。用户必须自己动手认可它。虽然列在此的软件包尚未可得，但至少已知在审查中。<div
              class="url">→ <a
                href="https://release.debian.org/proposed-updates/stable.html">https://release.debian.org/proposed-updates/stable.html</a></div>
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>上一页</strong>6.5. 检查软件包真伪</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>下一页</strong>6.7. 保持系统在最新状态</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.dist-upgrade.html">ar-MA</a></li><li><a
              href="../da-DK/sect.dist-upgrade.html">da-DK</a></li><li><a
              href="../de-DE/sect.dist-upgrade.html">de-DE</a></li><li><a
              href="../el-GR/sect.dist-upgrade.html">el-GR</a></li><li><a
              href="../en-US/sect.dist-upgrade.html">en-US</a></li><li><a
              href="../es-ES/sect.dist-upgrade.html">es-ES</a></li><li><a
              href="../fa-IR/sect.dist-upgrade.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.dist-upgrade.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.dist-upgrade.html">hr-HR</a></li><li><a
              href="../id-ID/sect.dist-upgrade.html">id-ID</a></li><li><a
              href="../it-IT/sect.dist-upgrade.html">it-IT</a></li><li><a
              href="../ja-JP/sect.dist-upgrade.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.dist-upgrade.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.dist-upgrade.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.dist-upgrade.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.dist-upgrade.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.dist-upgrade.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.dist-upgrade.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.dist-upgrade.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.dist-upgrade.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.dist-upgrade.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.dist-upgrade.html">zh-TW</a></li></ul></div></body></html>
