<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">14.6. 其他安全相关事项</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-CN-1.0-1" /><meta
        name="keywords"
        content="防火墙, 网络过滤, IDS/NIDS" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="security.html"
        title="第 14 章 安全" /><link
        rel="prev"
        href="sect.selinux.html"
        title="14.5. SELinux 简介" /><link
        rel="next"
        href="sect.dealing-with-compromised-machine.html"
        title="14.7. 处理被攻陷的机器" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/zh-CN/sect.other-security-considerations.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.selinux.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.dealing-with-compromised-machine.html"><strong>下一页</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.other-security-considerations"></a>14.6. 其他安全相关事项</h2></div></div></div><div
          class="para">
			Security is not just a technical problem; more than anything, it is about good practices and understanding the risks. This section reviews some of the more common risks, as well as a few best practices which should, depending on the case, increase security or lessen the impact of a successful attack.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.17.9.3"></a>14.6.1. 网页应用程序的内在风险</h3></div></div></div><div
            class="para">
				Web 应用的普遍性导致其剧增。往往是几个并行运行：网页邮件，维基，群件系统，论坛，图片库，博客等等。许多应用依赖于“LAMP”（<span
              class="emphasis"><em>Linux, Apache, MySQL, PHP</em></span>）。不幸的是，很多这种应用在编写的时候没有考虑安全问题。而源于外部世界的数据通常很少或者不去验证。使用特别数值可以将一个调用暗中转换成一个指令，以便于执行另外的替代程序。许多明显的问题随着时间的推移都被修正了，然而新的安全问题又时不时的跳出来。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>词汇</em></span> SQL 注入</strong></p></div></div></div><div
              class="para">
				如果程序以一种不安全的方式将数据插入到 SQL 查询，就会很容易受到 SQL 注入攻击；这个名字指这样一种行为：改变一个参数来执行不同于预期的查询，或者用于破坏数据库，或者用于读取那些不应该读取的数据。<div
                class="url">→ <a
                  href="http://en.wikipedia.org/wiki/SQL_Injection">http://en.wikipedia.org/wiki/SQL_Injection</a></div>
			</div><a
              id="id-1.17.9.3.3.3"
              class="indexterm"></a></div><div
            class="para">
				因此，定期更新 web 应用是必须的，以减少任何攻击者（无论是专业攻击者或者脚本小子）可以利用的已知漏洞。实际的风险取决于所处的情况，从数据销毁到执行任意代码，也包括网络涂改。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.17.9.4"></a>14.6.2. 知道预期什么</h3></div></div></div><div
            class="para">
				网页应用程序的弱点常常是攻击尝试的起点。下面简单的回顾一下可能的后果。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>速览</em></span>过滤 HTTP 查询</strong></p></div></div></div><div
              class="para">
				Apache 2 中包含了可用于过滤 HTTP 请求的模块。可以用来阻止某些攻击者。例如，限制参数的长度可以阻止缓冲区溢出。更一般地，可以在传递给应用程序之前验证其参数并限制其访问。这些甚至可以与动态防火墙更新相结合，违反规则的客户在一定时间内被禁止访问网页服务器。
			</div><div
              class="para">
				设定这些检查是费时，费劲的任务。但当网页应用有一条可疑追踪记录时，就会有所回报。
			</div><div
              class="para">
				<span
                class="emphasis"><em>mod-security2</em></span> (in the <span
                class="pkg pkg">libapache2-mod-security2</span> package) is the main such module. It even comes with many ready-to-use rules of its own (in the <span
                class="pkg pkg">modsecurity-crs</span> package) that you can easily enable.
			</div><a
              id="id-1.17.9.4.3.5"
              class="indexterm"></a><a
              id="id-1.17.9.4.3.6"
              class="indexterm"></a></div><div
            class="para">
				侵入的结果会留下各自痕迹，取决于攻击者的动机。<span
              class="emphasis"><em>脚本小子（Script-kiddies）</em></span>只会用他们在网上找到的方法；常常是涂改页面或者删除数据。狡猾一点的，会在网页中添加无形内容，来提高他们自己网站在搜索引擎中的引用次数。
			</div><div
            class="para">
				A more advanced attacker will go beyond that. A disaster scenario could go on in the following fashion: the attacker gains the ability to execute commands as the <code
              class="literal">www-data</code> user, but executing a command requires many manipulations. To make their life easier, they install other web applications specially designed to remotely execute many kinds of commands, such as browsing the filesystem, examining permissions, uploading or downloading files, executing commands, and even provide a network shell. Often, the vulnerability will allow running a <code
              class="command">wget</code> command that will download some malware into <code
              class="filename">/tmp/</code>, then executing it. The malware is often downloaded from a foreign website that was previously compromised, in order to cover tracks and make it harder to find out the actual origin of the attack.
			</div><div
            class="para">
				此时，攻击者就有足够的行动自由了，他们常常会安装一个 IRC <span
              class="emphasis"><em>机器人－bot</em></span>（一个连接到 IRC 服务器的机器人并且可以通过频道来控制）。该机器人常常用来共享非法文件（未授权的电影或软件拷贝，等等）。一个坚决的攻击者可能会走到更远。<code
              class="literal">www-data</code> 账户不允许对机器的完全存取，攻击者会尝试获取管理员权限。现在，这个还不可能，但是如果网页应用程序不是最新的，内核和其他程序有可能也是过期的；这有时候源于管理员的决断，尽管知道容易遭受攻击，由于没有本地用户仍然忽略更新。然后，攻击者就会利用第二个弱点来取得超级用户权限。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>词汇</em></span>特权升级</strong></p></div></div></div><div
              class="para">
				该术语涵盖了任何用于获得比给定用户正常情况下更多权限的行为。<code
                class="command">sudo</code> 程序被设计用来将管理员权限赋予某些用户。但是，同样的术语也用来描述攻击者利用漏洞获取不当权限。
			</div></div><div
            class="para">
				现在攻击者拥有了机器；他们将试图尽可能长时间的保持其权限。这就要安装 <span
              class="emphasis"><em>后门－rootkit</em></span>，一个取代系统组件的程序，以便攻击者可以在随后的时间重新获取管理员特权；后门软件也会试图隐藏自己和入侵痕迹。被破坏的 <code
              class="command">ps</code> 程序会漏掉一些进程，<code
              class="command">netstat</code> 也不会列出一些活动链接，等等。拥有超级用户权限，攻击者可以观察整个系统，但是不一定能找到重要数据；因此他们会尝试侵入协作网络中其他的机器。分析管理员的账户和历史记录，攻击者会发现哪些机器被经常访问。使用被修改的程序替换 <code
              class="command">sudo</code> 或者 <code
              class="command">ssh</code>，攻击者能截取到部分管理员密码，并将其用在探测到的服务器上．．．入侵就会传播开来。
			</div><div
            class="para">
				这种噩梦可以通过几种方法阻止。接下来的章节会讲述几种方法。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.choosing-the-software-wisely"></a>14.6.3. 明智地选择软件</h3></div></div></div><div
            class="para">
				一旦潜在的安全问题被暴露，就必须在配置服务的每个步骤都要考虑，特别是在选择安装软件的时候。许多网站，例如 <code
              class="literal">SecurityFocus.com</code>，会列出最近发现的漏洞，在一些特殊软件部署之前会给出安全记录。当然，要平衡此信息和所述软件的普及程度：越是使用广泛的软件，越是诱人，因而审查也更严密。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>词汇</em></span> 安全审核</strong></p></div></div></div><div
              class="para">
				安全审核是彻底地阅读和分析某些软件的源代码，并寻找它可能包含的潜在安全漏洞。这种审核通常是预先的，并用于确保程序符合特定的安全需求。
			</div></div><div
            class="para">
				在自由软件的世界里，有大量的选择。选择某一个软件而非另一个，应该基于具体的准则来做出决定。更多的特性暗含着代码背后隐藏着更多的漏洞风险；为某个任务选择最高级的程序实际上可能适得其反，较好的方法通常是选择满足需求最简单的程序。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>词汇</em></span> 0day 漏洞</strong></p></div></div></div><div
              class="para">
				<span
                class="emphasis"><em>零日漏洞</em></span>攻击很难预防；该术语用于描述程序中那些作者还不知道的漏洞。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.managing-a-machine-as-a-whole"></a>14.6.4. 将机器作为整体管理</h3></div></div></div><div
            class="para">
				Most Linux distributions install by default a number of Unix services and many tools. In many cases, these services and tools are not required for the actual purposes for which the administrator set up the machine. As a general guideline in security matters, unneeded software is best uninstalled. Indeed, there is no point in securing an FTP server, if a vulnerability in a different, unused service can be used to get administrator privileges on the whole machine.
			</div><div
            class="para">
				出于同样的原因，防火墙通常配置为只允许访问公共服务。
			</div><div
            class="para">
				Current computers are powerful enough to allow hosting several services on the same physical machine. From an economic viewpoint, such a possibility is interesting: only one computer to administrate, lower energy consumption, and so on. From the security point of view, however, such a choice can be a problem. One compromised service can bring access to the whole machine, which in turn compromises the other services hosted on the same computer. This risk can be mitigated by isolating the services. This can be attained either with virtualization (each service being hosted in a dedicated virtual machine or container), or with AppArmor/SELinux (each service daemon having an adequately designed set of permissions).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.users-are-players"></a>14.6.5. 用户是参与者</h3></div></div></div><div
            class="para">
				谈到安全，要马上考虑保护免受隐藏在互联网丛林里匿名破坏者的攻击；但是，经常被遗忘的事实是－风险也来自内部：离职雇员会下载重要敏感的项目文件并买给竞争对手；大意的销售可能在开前景规划会议时，离开电脑而没有锁定桌面；笨拙的用户可能误删目录；等等。
			</div><div
            class="para">
				对付这些风险可以使用技术手段：授予用户的权限不多于所需求的权限，并且必须进行常规备份。但是在许多情况下，适当的保护也包含培训用户进而规避风险。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>速览</em></span> <span
                        class="pkg pkg">autolog</span></strong></p></div></div></div><div
              class="para">
				<span
                class="pkg pkg">autolog</span> 软件包可以在设定的延时过后自动断开非活动用户。也可以在会话结束后，杀死用户进程，进而防止用户运行守护进程。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.physical-security"></a>14.6.6. 物理安全</h3></div></div></div><div
            class="para">
				如果计算机本身没有受到保护，保护服务和网络是没有意义的。重要数据应该存储在 RAID 阵列可热交换硬盘上，即使硬盘失效，但是数据必须可用。如果送披萨的小伙子能进入大楼，溜进服务器房间并带着几块硬盘逃跑，那么安全的重要方面没有满足。谁可以进入服务器房间？出入被监控了吗？当评估物理安全时，需要考虑这些问题。
			</div><div
            class="para">
				物理安全也包括考虑事故风险，例如火灾。这种特殊风险说明有理由将备份介质保存在单独的建筑物，或者至少保存在防火保险箱内。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.17.9.9"></a>14.6.7. 法律责任</h3></div></div></div><div
            class="para">
				管理员或多或少被用户和网络用户所信任。因此，应避免任何可能被恶人利用的漏洞。
			</div><div
            class="para">
				攻击者控制你的机器，然后用它作为基础（称为“中继系统”）执行其他恶意活动，会导致你法律上的麻烦。因为被攻击方最初会看到攻击源于你的系统，会把你当做攻击者（或者共犯）。在许多情况下，攻击者会使用你的服务器作为垃圾邮件的中继，这并不会有大的影响（除了将你列为黑名单，并限制发送合法邮件），但也不舒服。其他情况下，可能从你的机器产生更大的麻烦，譬如拒绝服务攻击。因为正常服务不可用，数据被损坏，这有时会导致收入损失；有时这也包含着实实在在的成本，因为被攻击方可能启动法律程序。如果未授权的拷贝通过你的服务器共享，版权所有者可以起诉你，以及其他遵从服务级别协议的公司－如果从你的机器遭受攻击，他们必须受到惩罚。
			</div><div
            class="para">
				如果此类情况发生了，自称清白通常是不够的；至少，你要出示在你系统上进行可疑活动源于指定 IP 的证据。这几乎是不可能的，如果你忽略了本章的建议，让攻击者获得特权账户（特别是超级用户）并使用它来掩盖痕迹。
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.selinux.html"><strong>上一页</strong>14.5. SELinux 简介</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.dealing-with-compromised-machine.html"><strong>下一页</strong>14.7. 处理被攻陷的机器</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.other-security-considerations.html">ar-MA</a></li><li><a
              href="../da-DK/sect.other-security-considerations.html">da-DK</a></li><li><a
              href="../de-DE/sect.other-security-considerations.html">de-DE</a></li><li><a
              href="../el-GR/sect.other-security-considerations.html">el-GR</a></li><li><a
              href="../en-US/sect.other-security-considerations.html">en-US</a></li><li><a
              href="../es-ES/sect.other-security-considerations.html">es-ES</a></li><li><a
              href="../fa-IR/sect.other-security-considerations.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.other-security-considerations.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.other-security-considerations.html">hr-HR</a></li><li><a
              href="../id-ID/sect.other-security-considerations.html">id-ID</a></li><li><a
              href="../it-IT/sect.other-security-considerations.html">it-IT</a></li><li><a
              href="../ja-JP/sect.other-security-considerations.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.other-security-considerations.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.other-security-considerations.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.other-security-considerations.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.other-security-considerations.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.other-security-considerations.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.other-security-considerations.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.other-security-considerations.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.other-security-considerations.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.other-security-considerations.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.other-security-considerations.html">zh-TW</a></li></ul></div></body></html>
