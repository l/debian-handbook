<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. اطلاعات-جانبی بسته</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="بسته باینری, بسته سورس, dpkg, وابستگی‌ها, تداخل" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="packaging-system.html"
        title="فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بنیادین" /><link
        rel="prev"
        href="packaging-system.html"
        title="فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بنیادین" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. ساختار یک بسته سورس" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/fa-IR/sect.package-meta-information.html" /></head><body
      dir="rtl"><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.package-meta-information"></a>5.2. اطلاعات-جانبی بسته</h2></div></div></div><a
          id="id-1.8.6.2"
          class="indexterm"></a><a
          id="id-1.8.6.3"
          class="indexterm"></a><div
          class="para">
			یک بسته دبیان تنها شامل فایل‌های مورد نیاز برای نصب روی سیستم نمی‌باشد، بلکه جزئی از یک کل به حساب می‌آید و ارتباط بین خود و سایر بسته‌های موجود در دبیان را توضیح می‌دهد (وابستگی‌ها، تداخل‌ها، پیشنهادها). همچنین شامل اسکریپت‌هایی است که در مراحل گوناگون چرخه‌حیات یک بسته اجرا می‌شوند (نصب، حذف، بروزرسانی). این داده‌ها توسط ابزار مدیریت بسته استفاده می‌شوند اما جزئی از نرم‌افزار موجود در بسته نیستند؛ آن‌ها، درون بسته هستند، به همین دلیل است که نام “اطلاعات-جانبی” به آن‌ها داده شده است (اطلاعاتی درباره سایر اطلاعات).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.control"></a>5.2.1. توضیح: فایل <code
                    class="filename">control</code></h3></div></div></div><a
            id="id-1.8.6.5.2"
            class="indexterm"></a><a
            id="id-1.8.6.5.3"
            class="indexterm"></a><a
            id="id-1.8.6.5.4"
            class="indexterm"></a><div
            class="para">
				این فایل ساختار شبیه به سرآیند ایمیل دارد (استاندارد RFC2822). برای نمونه، فایل <code
              class="filename">control</code> برنامه <span
              class="pkg pkg">apt</span> شبیه زیر است:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.0.9.6
Installed-Size: 3788
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Depends: libapt-pkg4.12 (&gt;= 1.0.9.6), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:4.1.1), libstdc++6 (&gt;= 4.9), debian-archive-keyring, gnupg
Suggests: aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), apt-doc, python-apt
Conflicts: python-apt (&lt;&lt; 0.7.93.2~)
Breaks: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 role::shared-lib, scope::application, scope::utility, sound::player,
 suite::debian, use::downloading, use::organizing, use::searching,
 works-with::audio, works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.0.9.6_amd64.deb
Size: 1107560
MD5sum: a325ccb14e69fef2c50da54e035a4df4
SHA1: 635d09fcb600ec12810e3136d51e696bcfa636a6
SHA256: 371a559ce741394b59dbc6460470a9399be5245356a9183bbeea0f89ecaabb03</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>بازگشت به مقدمات</em></span> استانداردهای اینترنت - RFC</strong></p></div></div></div><a
              id="id-1.8.6.5.7.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.7.3"
              class="indexterm"></a><div
              class="para">
				RFC مخفف عبارت “Request For Comments” است. RFC به سند فنی اطلاق می‌شود که قرار است به صورت یک استاندارد در اینترنت پیاده‌سازی شود. قبل از اینکه به صورت استاندارد درآید، این فایل‌ها برای مرور عمومی (همانطور که از نامیش پیداست) منتشر می‌شوند. IETF (کارگروه مهندسی اینترنت) تصمیمات مرتبط با توسعه این اسناد را به عهده دارد (استاندارد پیشنهادی، استاندارد پیشنویس، استاندارد نهایی).
			</div><div
              class="para">
				RFC 2026 فرآیند استانداردسازی پروتکل‌های اینترنتی را تعریف می‌کند. <div
                class="url">→ <a
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.5.8"></a>5.2.1.1. وابستگی‌ها: فیلد <code
                      class="literal">Depends</code></h4></div></div></div><a
              id="id-1.8.6.5.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.4"
              class="indexterm"></a><div
              class="para">
					وابستگی‌ها در فیلد <code
                class="literal">Depends</code> موجود در سرآیند بسته تعریف می‌شوند. این فیلد فهرستی از شرایط برای کارکرد صحیح بسته را ارایه می‌دهد - این اطلاعات توسط ابزارهایی مانند <code
                class="command">apt</code> برای نصب کتابخانه‌های مورد نیاز بکار گرفته می‌شوند و از نسخه‌های مناسب هر برنامه جهت نصب بسته مورد نیاز استفاده می‌کنند. برای هر وابستگی، امکان محدود کردن طیف نسخه‌ها وجود دارد. به عبارت دیگر، این امکان وجود دارد که بخواهیم بسته <span
                class="pkg pkg">libc6</span> را با نسخه بزرگتر از “2.15” نصب کنیم (<code
                class="command">libc6 (&gt;= 2.15)</code>). عملگرهای مقایسه‌ای نسخه عبارتند از:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: کوچکتر از;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: کوچکتر یا مساوی;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: مساوی;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: بزرگتر یا مساوی;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: بزرگتر از.
						</div></li></ul></div><div
              class="para">
					در فهرست شرایط مورد نیاز، ویرگول به عنوان یک جداکننده عمل می‌کند و باید به صورت یک “and” منطقی تفسیر شود. در همین شرایط، خط عمودی (“|”) بیانگر یک “or” منطقی است. اولویت اجرای بالاتری از “and” دارد و می‌تواند چندین بار استفاده گردد. بنابراین، وابستگی “(A or B) and C” به صورت <code
                class="command">A | B, C</code> نوشته می‌شود. در عوض، عبارت “A or (B and C)” باید به صورت “(A or B) and (A or C)” نوشته شود چراکه فیلد <code
                class="literal">Depends</code> پرانتزهایی که ترتیب اولویت‌های بین “and” و “or” تغییر بدهند، قبول نمی‌کند. بنابراین باید به صورت <code
                class="command">A | B, A | C</code> نوشته شود. <div
                class="url">→ <a
                  href="http://www.debian.org/doc/debian-policy/ch-relationships.html">http://www.debian.org/doc/debian-policy/ch-relationships.html</a></div>
				</div><a
              id="id-1.8.6.5.8.8"
              class="indexterm"></a><div
              class="para">
					سیستم وابستگی‌ها مکانیزم خوبی برای تضمین عملکرد یک برنامه است اما کاربرد دیگری با “meta-packages” نیز دارد. این‌ها بسته‌های خالی هستند که تنها به توضیح وابستگی‌ها می‌پردازند. آن‌ها فرآیند نصب گروهی از برنامه‌ها که توسط نگهدارنده‌شان انتخاب شده است، تسهیل می‌بخشند؛ به همین دلیل، <code
                class="command">apt install <em
                  class="replaceable">meta-package</em></code> به صورت خودکار تمام برنامه‌های مورد نیاز meta-package را نصب می‌کند. <span
                class="pkg pkg">gnome</span>، <span
                class="pkg pkg">kde-full</span> و <span
                class="pkg pkg">linux-image-amd64</span> نمونه‌هایی از meta-packages هستند.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>خط‌مشی دبیان</em></span> <code
                          class="literal">Pre-Depends</code>، نوعی دیگر از <code
                          class="literal">Depends</code></strong></p></div></div></div><a
                id="id-1.8.6.5.8.10.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.10.3"
                class="indexterm"></a><div
                class="para">
					“Pre-dependencies”، که در فیلد “<code
                  class="literal">Pre-Depends</code>” واقع در سرآیند بسته فهرست شده‌اند، وابستگی‌های عادی را کامل می‌کنند؛ نحو آن‌ها یکسان است. یک وابستگی عادی بیان می‌کند که بسته مورد نیاز باید قبل از بسته درخواست‌کننده وابستگی، پیکربندی شود. یک پیش-وابستگی بیان می‌کند که بسته مورد نیاز باید قبل از اجرای اسکریپت pre-installation بسته درخواست‌کننده وابستگی، پیکربندی شود که این مرحله درست قبل از نصب بسته صورت می‌گیرد.
				</div><div
                class="para">
					یک پیش-وابستگی بسیار مورد نیاز <code
                  class="command">apt</code> واقع می‌شود، چراکه به صورت ضمنی ترتیب اجرای بسته‌های مورد نیاز را تعیین می‌کند. به همین منظور، از پیش-وابستگی‌ها استفاده نمی‌شود مگر در شرایط ضروری. همچنین توصیه می‌شود که سایر توسعه‌دهندگان <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> را قبل از ایجاد یک پیش-وابستگی در جریان بگذارید. همچنین امکان انتخاب گزینه‌های دیگر نیز وجود دارد.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>خط‌مشی دبیان</em></span> فیلدهای <code
                          class="literal">Recommends</code>، <code
                          class="literal">Suggests</code> و <code
                          class="literal">Enhances</code></strong></p></div></div></div><a
                id="id-1.8.6.5.8.11.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.11.3"
                class="indexterm"></a><div
                class="para">
					فیلدهای <code
                  class="literal">Recommends</code> و <code
                  class="literal">Suggests</code> بسته‌های مکمل را توضیح می‌دهند. فیلد “recommended”، که مهم‌ترین آن‌ها است، عملکرد کلی بسته را افزایش می‌دهد اما تاثیری رو عملیات موجود روی آن ندارد. فیلد “suggested”، که در درجه دوم اهمیت قرار دارد، بیان می‌کند برخی بسته‌ها می‌توانند عملکرد یکدیگر را بهبود ببخشند، اما بهتر آن است که تنها یکی از آن‌ها نصب گردد.
				</div><div
                class="para">
					شما همیشه باید بسته‌های “recommended” را نصب کنید، مگر اینکه بدانید چرا به آن‌ها نیاز نخواهید داشت. بر عکس همین قضیه، ضرورتی ندارد که بسته‌های “suggested” را نصب کنید مگر اینکه بدانید چرا به آن‌ها نیاز خواهید داشت.
				</div><a
                id="id-1.8.6.5.8.11.6"
                class="indexterm"></a><div
                class="para">
					فیلد <code
                  class="literal">Enhances</code> نیز به پیشنهاد بسته‌ها می‌پردازد اما در یک حوزه متفاوت. در واقع درون بسته‌های پیشنهادی قرار دارد و نه بسته‌ای که از آن بهره می‌برد. نکته جالب اینجاست که امکان اضافه‌کردن یک بسته پیشنهادی بدون تغییر روی بسته اصلی وجود دارد. بنابراین، تمام add-ons، plug-ins و extension یک برنامه می‌توانند در این فهرست قرار گیرند. با اینکه سالیان طولانی از وجود این فیلد می‌گذرد، اما برنامه‌های <code
                  class="command">apt</code> و <code
                  class="command">synaptic</code> از آن استفاده می‌کنند. هدف از آن پیشنهاد قابلیت‌های جداگانه نسبت به فیلد <code
                  class="literal">Suggests</code> است که کاربر می‌تواند از بین آن‌ها انتخاب کند.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.5.9"></a>5.2.1.2. تداخل‌ها: فیلد <code
                      class="literal">Conflicts</code></h4></div></div></div><a
              id="id-1.8.6.5.9.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.4"
              class="indexterm"></a><div
              class="para">
					فیلد <code
                class="literal">Conflicts</code> بسته‌(ها) را مشخص می‌کند که در کنار برنامه اصلی نمی‌توانند نصب گردند. معقول‌ترین حالت برای بسته‌هایی است که نام یکسانی دارند، یا فراهم‌کردن خدمات یکسان روی پورت یکسانی از TCP یا بسته‌هایی که در عملکرد یکدیگر تداخل ایجاد می‌کنند.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> در صورتی که بسته مورد نظر با بسته دیگری تداخل داشته باشد، اقدام به نصب آن نمی‌کند بجز حالتی که بسته جدید جایگزین نسخه قبلی آن شود که در این صورت <code
                class="command">dpkg</code> بسته قدیمی را با جدید جایگزین خواهد کرد. <code
                class="command">apt</code> همیشه از دستورالعمل‌های شما پیروی می‌کند: اگر انتخاب کنید که بسته جدیدی نصب گردد، به صورت خودکار پیشنهاد حذف بسته‌های دردسرساز را به شما می‌دهد.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.5.10"></a>5.2.1.3. ناسازگاری‌ها: فیلد <code
                      class="literal">Breaks</code></h4></div></div></div><a
              id="id-1.8.6.5.10.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.4"
              class="indexterm"></a><div
              class="para">
					فیلد <code
                class="literal">Breaks</code> تاثیر مشابه مانند فیلد <code
                class="literal">Conflicts</code> دارد، اما به طور متفاوتی. نشان می‌دهد که نصب یک بسته، بسته دیگری را “break” می‌کند (یا نسخه مشخصی از آن را). به طور کلی، این عدم سازگاری بین دو بسته، موقتی است و رابطه <code
                class="literal">Breaks</code> به صورت خاص اشاره به نسخه‌های ناسازگار از آن‌ها دارد.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> از نصب برنامه‌ای که با سایر بسته‌ها ناسازگاری داشته و موجب خرابی آن‌ها می‌شود، جلوگیری کرده و <code
                class="command">apt</code> با بروزرسانی بسته خراب به نسخه جدیدتر (که این ناسازگاری را رفع کرده است) تلاش برای حل این مساله می‌کند.
				</div><div
              class="para">
					این گونه شرایط ممکن است در حالتی رخ دهد که بروزرسانی بدون توجه به سازگاری با نسخه‌های قدیمی‌تر اجرا شده باشد: مانند حالتی که نسخه جدید با نسخه قدیم دیگر سازگاری نداشته باشد و باعث خرابی در برنامه دیگری شود بدون آنکه هیچ اطلاعی راجع به آن کسب کند. فیلد <code
                class="literal">Breaks</code> کاربر را در ورود به چنین شرایطی آگاه می‌سازد.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.5.11"></a>5.2.1.4. گزینه‌های فراهم‌شده: فیلد <code
                      class="literal">Provides</code></h4></div></div></div><a
              id="id-1.8.6.5.11.2"
              class="indexterm"></a><div
              class="para">
					این فیلد، مفهوم بسیار جالب “بسته مجازی” را معرفی می‌کند. این بسته‌ها نقش‌های متفاوتی ایفا می‌کنند، اما دو نقش آن از اهمیت خاصی برخوردار هستند. نقش اول شامل کاربرد یک بسته مجازی برای انطباق با یک سرویس عمومی است (بسته، سرویس را “فراهم” می‌کند). نقش دوم نشان می‌دهد که یک بسته جایگزین دیگری می‌شود، و با تمام وابستگی‌های بسته قدیم سازگار خواهد بود. بنابراین این امکان وجود دارد که بدون بکاربردن نام واقعی یک بسته، جایگزینی برای آن تعریف کرد.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>واژگان</em></span> تفاوت بین بسته‌های meta و virtual</strong></p></div></div></div><a
                id="id-1.8.6.5.11.4.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.3"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.4"
                class="indexterm"></a><div
                class="para">
					ضروری است که بین دو بسته meta و virtual تفاوت قائل شویم. اولی شامل بسته‌ای واقعی (به همراه فایل‌های <code
                  class="filename">.deb</code>) است که هدفش بیان وابستگی‌های مربوط به آن بسته است.
				</div><div
                class="para">
					از طرف دیگر، بسته‌های مجازی به صورت فیزیکی وجود ندارند؛ بلکه روشی هستند برای شناسایی بسته‌های حقیقی بر اساس یک سری شرایط خاص و منطقی (سرویس فراهم‌آورده، سازگاری با یک برنامه استاندارد یا یک بسته از پیش موجود).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="id-1.8.6.5.11.5"></a>5.2.1.4.1. فراهم‌آوردن یک “سرویس”</h5></div></div></div><div
                class="para">
						بیاید در مورد اول با جزئیات بیشتری به همراه یک مثال بحث کنیم: گفته می‌شود که تمام سرورهای ایمیل مانند <span
                  class="pkg pkg">postfix</span> یا <span
                  class="pkg pkg">sendmail</span> بسته مجازی <span
                  class="pkg pkg">mail-transport-agent</span> را “فراهم می‌آورد”. بنابراین، هر بسته‌ای که به این سرویس نیاز داشته باشد (مانند میلینگ‌لیست <span
                  class="pkg pkg">smartlist</span> یا <span
                  class="pkg pkg">sympa</span>) به سادگی وابستگی‌های خود را در قالب بسته مجازی <span
                  class="pkg pkg">mail-transport-agent</span> بیان می‌کند تا اینکه بخواهد به فهرست بلندبالا و ناسازگاری از راهکارهای موجود اشاره کند (مانند <code
                  class="command">postfix | sendmail | exim4 | …</code>). علاوه بر این، نصب دو سرور ایمیل روی یک ماشین کار بیهوده‌ای است که به همین دلیل هر کدام از این بسته‌ها، ناسازگاری خود را با بسته مجازی <span
                  class="pkg pkg">mail-transport-agent</span> نشان می‌دهد. مغایرت یک بسته با خودش از طرف سیستم نادیده گرفته می‌شود، اما این تکنیک از نصب دو سرور ایمیل در کنار یکدیگر جلوگیری بعمل می‌آورد.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>خط‌مشی دبیان</em></span> فهرستی از بسته‌های مجازی</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.5.3.2"
                  class="indexterm"></a><div
                  class="para">
						برای آنکه بسته‌های مجازی کاربردی شوند، همه باید روی نامشان توافق داشته باشند. به همین دلیل است که برای نامگذاری آن‌ها در خط‌مشی دبیان استانداردی وجود دارد. این فهرست شامل <span
                    class="pkg pkg">mail-transport-agent</span> برای سرورهای ایمیل، <span
                    class="pkg pkg">c-compiler</span> برای کامپایلرهای زبان برنامه‌نویسی C، <span
                    class="pkg pkg">www-browser</span> برای مرورگرهای وب، <span
                    class="pkg pkg">httpd</span> برای سرورهای وب، <span
                    class="pkg pkg">ftp-server</span> برای سرورهای FTP، <span
                    class="pkg pkg">x-terminal-emulator</span> برای شبیه‌سازی ترمینال در محیط گرافیکی (<code
                    class="command">xterm</code>) و <span
                    class="pkg pkg">x-window-manager</span> برای مدیر پنجره‌ها.
					</div><div
                  class="para">
						فهرست کامل این بسته‌ها روی وب یافت می‌شود. <div
                    class="url">→ <a
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="id-1.8.6.5.11.6"></a>5.2.1.4.2. قابلیت تعویض با بسته‌ای دیگر</h5></div></div></div><div
                class="para">
						فیلد <code
                  class="literal">Provides</code> قابلیت دیگری نیز دارد و آن زمانی است که محتوای یک بسته در بسته بزرگتری قرار می‌گیرد. برای نمونه، ماژول <span
                  class="pkg pkg">libdigest-md5-perl</span> یک ماژول اختیاری در Perl 5.6 بود و به صورت استاندارد در Perl 5.8 قرار گرفته است (و سایر نسخه‌ها، مانند 5.20 که در <span
                  class="distribution distribution">Jessie</span> وجود دارد). بنابراین، بسته <span
                  class="pkg pkg">perl</span> از نسخه 5.8 به بعد با بیان <code
                  class="literal">Provides: libdigest-md5-perl</code> وابستگی‌های مورد نیاز در صورت انتخاب این بسته از طرف کاربر را رعایت می‌کند. بسته <span
                  class="pkg pkg">libdigest-md5-perl</span> در نهایت حذف شد، چراکه دلیلی برای وجود آن با نسخه‌های قدیمی‌تر Perl وجود نداشت.
					</div><div
                class="figure"><a
                  id="id-1.8.6.5.11.6.3"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="کاربرد فیلد Provides بصورتی که وابستگی‌های را خراب نکند" /></div></div><p
                  class="title"><strong>
      شكل 5.1. کاربرد فیلد <code
                      class="literal">Provides</code> بصورتی که وابستگی‌های را خراب نکند</strong></p></div><div
                class="para">
						این ویژگی بسیار کاربردی است، چراکه امکان پیشبینی توسعه خیالی وجود نخواهد داشت و توانایی نحوه نامگزاری ضروری است و سایر جایگزین‌های خودکار از نرم‌افزارهای منسوخ.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>بازگشت به مقدمات</em></span> زبان برنامه‌نویسی Perl</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.6.5.2"
                  class="indexterm"></a><a
                  id="id-1.8.6.5.11.6.5.3"
                  class="indexterm"></a><div
                  class="para">
						Perl (Practical Extraction and Report Language) یک زبان برنامه‌نویسی بسیار محبوب است که شامل بسیاری ماژول‌های آماده بکار جهت طیف گسترده‌ای از برنامه‌ها است که از طریق سرورهای CPAN (Comprehensive Perl Archive Network) توزیع می‌گردند، یک شبکه جامع از بسته‌های Perl. <div
                    class="url">→ <a
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    class="url">→ <a
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						از آنجایی که یک زبان تفسیری بحساب می‌آید، برنامه‌ای که به زبان Perl نوشته می‌شود قبل از اجرا نیازی به کامپایل شدن ندارد. به همین دلیل به برنامه‌های آن “Perl Scripts” گفته می‌شود.
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="id-1.8.6.5.11.7"></a>5.2.1.4.3. محدودیت‌های سابق</h5></div></div></div><div
                class="para">
						بسته‌های مجازی سابق بر این از برخی محدودیت‌ها رنج می‌بردند، که مهم‌ترین آن‌ها نبود شماره نسخه بود. در بازگشت به مثال فوق، یک وابستگی مانند <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code> برخلاف وجود Perl 5.10، توسط سیستم بسته‌بندی هیچگاه درنظر گرفته نمی‌شود - با اینکه اینطور بنظر می‌رسد. سیستم بسته‌بندی، بدون آگاهی از این موضوع، آخرین گزینه موجود را بررسی می‌کند که منجر به عدم تطابق نسخه‌ها می‌گردد.
					</div><div
                class="para">
						این محدودیت در نسخه 1.17.11 از <span
                  class="pkg pkg">dpkg</span> برطرف گشته است و در رابطه با Jessie نیز صادق نیست. بسته‌ها می‌توانند یک نسخه به بسته‌های مجازی که وابستگی <code
                  class="literal">Provides: libdigest-md5-perl (= 1.8)</code> را فراهم می‌آوردند، اضافه کنند.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.5.12"></a>5.2.1.5. فایل‌های جایگزین شده: فیلد <code
                      class="literal">Replaces</code></h4></div></div></div><a
              id="id-1.8.6.5.12.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.4"
              class="indexterm"></a><div
              class="para">
					فیلد <code
                class="literal">Replaces</code> بیان می‌کند بسته شامل فایل‌هایی است که در سایر بسته‌ها وجود دارد، اما بسته بصورت قانونی اقدام به جایگزینی آن‌ها می‌کند. بدون این مشخصات، <code
                class="command">dpkg</code> در عملیات خود با شسکت روبه‌رو می‌شود با بیان اینکه نمی‌تواند روی سایر فایل‌های بسته‌های دیگر بنویسد (به لحاظ فنی، امکان اجرای آن با استفاده از گزینه <code
                class="literal">--force-overwrite</code> وجود دارد، اما عملیات استانداردی بحساب نمی‌آید). این امر، امکان شناسایی مشکلات باالقوه را می‌دهد و نگهدارنده بسته را ملزم می‌سازد که قبل از اضافه کردن چنین فیلدی، به نتایج آن پی ببرد.
				</div><div
              class="para">
					استفاده از این فیلد در صورت تغییر نام بسته یا بکاررفتن آن در بسته دیگری، توجیه پذیر است. همچنین در شرایطی که نگهدارنده بسته تصمیم می‌گیرد فایل‌های جداگانه‌ای در کنار بسته‌های باینری تولید شده از بسته سورس قرار دهد: یک فایل جایگزین شده دیگر متعلق به بسته قدیم نیست، بلکه تنها به بسته جدید تعلق دارد.
				</div><div
              class="para">
					اگر تمام فایل‌های یک بسته موجود تغییر کنند، بسته در شرایط حذف قرار می‌گیرد. در نهایت، این فیلد به <code
                class="command">dpkg</code> کمک می‌کند در شرایط بروز تداخل با سایر بسته‌ها، آن را حذف کند.
				</div><div
              class="sidebar"><a
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>مطالعه بیشتر</em></span> فیلد <code
                          class="literal">Tag</code></strong></p></div></div></div><div
                class="para">
					در مثال فوق که شامل <span
                  class="pkg pkg">apt</span> بود، وجود فیلدی را متوجه می‌شویم که توضیح آن داده نشده است، فیلد <code
                  class="literal">Tag</code>. این فیلد رابطه‌ای بین بسته‌ها را بیان نمی‌کند، بلکه روشی استاندارد جهت طبقه‌بندی بسته‌ها بحساب می‌آید. این طبقه‌بندی بسته‌ها با توجه به شرایط گوناگون (نوع رابط، زبان برنامه‌نویسی، حوزه برنامه و ...) مدت زمان طولانی است که وجود دارد. برخلاف این موضوع، تمام بسته‌ها در این طبقه‌بندی قرار نگرفته و این قابلیت در تمام ابزارهای دبیان نیز پیاده‌سازی نشده است؛ <code
                  class="command">aptitude</code> این برچسب‌ها را نمایش می‌دهد و اجازه می‌دهد که به عنوان شرایط جستجو از آن‌ها استفاده گردد. برای کسانی که شیفته جستجو در <code
                  class="command">aptitude</code> هستند، وبسایت پیشرو امکان پیمایش در پایگاه داده‌ای از این برچسب‌ها را فراهم می‌آورد: <div
                  class="url">→ <a
                    href="http://debtags.alioth.debian.org/">http://debtags.alioth.debian.org/</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.configuration-scripts"></a>5.2.2. اسکریپت‌های پیکربندی</h3></div></div></div><a
            id="id-1.8.6.6.2"
            class="indexterm"></a><a
            id="id-1.8.6.6.3"
            class="indexterm"></a><a
            id="id-1.8.6.6.4"
            class="indexterm"></a><a
            id="id-1.8.6.6.5"
            class="indexterm"></a><a
            id="id-1.8.6.6.6"
            class="indexterm"></a><div
            class="para">
				به جز فایل <code
              class="filename">control</code>، فایل <code
              class="filename">control.tar.gz</code> برای هر بسته دبیان ممکن است شامل تعدادی اسکریپت باشد که توسط <code
              class="command">dpkg</code> در مراحل مختلف از پردازش یک بسته فراخوانی می‌گردند. خط‌مشی دبیان به تشریح گزینه‌های محتمل پرداخته است، اینکه در هر اسکریپت برای چه مرحله و با چه پارامترهایی فراخوانی گردد. این توالی اسکریپت‌ها ممکن است پیچیدگی خود را داشته باشد به صورتی که در هر مرحله از فرآیند نصب یا حذف اگر مشکلی بوجود آید، <code
              class="command">dpkg</code> به صورت خودکار به آخرین حالت صحیح از آن فرآیند باز خواهد گشت (تا جایی که ممکن باشد).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>مطالعه بیشتر</em></span> پایگاه‌داده <code
                        class="command">dpkg</code></strong></p></div></div></div><a
              id="id-1.8.6.6.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.6.8.3"
              class="indexterm"></a><div
              class="para">
				تمام اسکریپت‌های پیکربندی برای بسته‌های نصب شده در دایرکتوری <code
                class="filename">/var/lib/dpkg/info/</code> قرار می‌گیرند، به شکل فایلی که با نام بسته‌اش پیشوند شده باشد. این دایرکتوری همچنین شامل فایلی با فرمت <code
                class="filename">.list</code> است که فهرستی از فایل‌های مرتبط با هر بسته را نمایش می‌دهد.
			</div><div
              class="para">
				فایل <code
                class="filename">/var/lib/dpkg/status</code> شامل مجموعه‌ای از بلوک‌های داده است (در قالب استاندارد معروف ایمیل، RFC 2822) که وضعیت هر بسته را گزارش می‌دهد. اطلاعات مربوط به فایل <code
                class="filename">control</code> هر بسته در زمان نصب به این فایل منتقل می‌شود.
			</div></div><div
            class="para">
				در حالت کالی، اسکریپت <code
              class="filename">preinst</code> قبل از نصب یک بسته اجرا می‌شود، در حالتی که <code
              class="filename">postinst</code> پس از آن اجرا می‌گردد. به همین شکل، اسکریپت <code
              class="filename">prerm</code> قبل از حذف یک بسته و <code
              class="filename">postrm</code> پس از حذف آن اجرا می‌گردد. بروزرسانی یک بسته معادل با حذف بسته سابق و نصب بسته جدید است. ذکر تمام حالت‌های ممکن در اینجا امکانپذیر نیست اما به بررسی دو مورد متداول می‌پردازیم: نصب/بروزرسانی و حذف.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>احتیاط</em></span> نام‌های نمادین اسکریپت‌ها</strong></p></div></div></div><div
              class="para">
				ترتیبی که در این قسمت به بررسی آن می‌پردازیم اسکریپت‌ها را بر اساس نام خاصی فراخوانی می‌کند، مانند <code
                class="command">old-prerm</code> یا <code
                class="command">new-postinst</code>. این‌ها معادل با اسکریپت <code
                class="command">prerm</code> موجود در بسته قدیم (نصب شده قبل از بروزرسانی) و اسکریپت <code
                class="command">postinst</code> موجود در بسته جدید (نصب شده توسط بروزرسانی) هستند.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>نکته</em></span> نمودار حالت</strong></p></div></div></div><div
              class="para">
				مانوج سریواستاوا، نمودارهایی را تهیه کرده است که شیوه فراخوانی این اسکریپت‌ها توسط <code
                class="command">dpkg</code> را نمایش می‌دهند. نمودارهای مشابهی توسط پروژه دبیان بانوان تهیه شده است؛ آن‌ها به صورت ساده‌تری ترسیم شده‌اند که این امر موجب به ناقص بودنشان گردیده است. <div
                class="url">→ <a
                  href="https://people.debian.org/~srivasta/MaintainerScripts.html">https://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                class="url">→ <a
                  href="https://wiki.debian.org/MaintainerScripts">https://wiki.debian.org/MaintainerScripts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.6.12"></a>5.2.2.1. نصب و بروزرسانی</h4></div></div></div><a
              id="id-1.8.6.6.12.2"
              class="indexterm"></a><div
              class="para">
					این اتفاقی است که در حین نصب (یا بروزرسانی) می‌افتد:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							برای بروزرسانی، <code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">new-version</em></code> می‌پردازد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							هنوز برای بروزرسانی، <code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">old-version</em></code> می‌پردازد؛ برای اولین مرتبه نصب، <code
                      class="command">new-preinst install</code> را اجرا می‌کند. ممکن است نسخه قدیم را در آخرین پارامتر قرار دهد، اگر بسته نصب یا به تازگی حذف شده باشد (اما purge نشده باشد، که در این حالت فایل‌های پیکربندی باقی می‌مانند).
						</div></li><li
                  class="listitem"><div
                    class="para">
							فایل‌های بسته جدید از حالت فشرده خارج می‌شوند. اگر فایلی موجود باشد، جایگزین می‌گردد اما در همین حالت یک نسخه پشتیبان از آن گرفته می‌شود.
						</div></li><li
                  class="listitem"><div
                    class="para">
							برای بروزرسانی، <code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">new-version</em></code> می‌پردازد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> تمام داده‌های داخلی (فهرست فایل‌ها، اسکریپت‌های پیکربندی و ...) را بروزرسانی و فایل‌های پشتیبان از نسخه‌های موجود را حذف می‌کند. این نقطه‌ای است که دیگر بازگشتی وجود ندارد: <code
                      class="command">dpkg</code> دیگر به تمام اجرای ضروری جهت بازگشت به حالت قبلی دسترسی نخواهد داشت.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> فایل‌های پیکربندی را بروزرسانی می‌کند و در صورت عدم اجرای خودکار این فرآیند، از کاربر پرسش‌هایی را می‌پرسد. جزئیات این رویه در قسمت <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">
      قسمت 5.2.3, “Checksums، فهرستی از فایل‌های پیکربندی”
    </a> آمده است.
						</div></li><li
                  class="listitem"><div
                    class="para">
							در نهایت، <code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">new-postinst configure <em
                        class="replaceable">last-version-configured</em></code> می‌پردازد تا بسته را پیکربندی کند.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.8.6.6.13"></a>5.2.2.2. حذف بسته</h4></div></div></div><div
              class="para">
					این اتفاقی است که در حین حذف بسته می‌افتد:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">prerm remove</code> می‌پردازد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> تمام فایل‌های بسته را پاک می‌کند، به جز فایل‌های پیکربندی و اسکریپت‌های پیکربندی.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> به فراخوانی <code
                      class="command">postrm remove</code> می‌پردازد. تمام اسکریپت‌های پیکربندی، به جز <code
                      class="filename">postrm</code> حذف می‌شوند. اگر کاربر از گزینه “purge” استفاده نکرده باشد، فرآیند در همین نقطه به پایان می‌رسد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							برای حذف کامل یک بسته (دستوری که به صورت <code
                      class="command">dpkg --purge</code> یا <code
                      class="command">dpkg -P</code> اجرا می‌شود)، فایل‌های پیکربندی نیز حذف می‌گردند، همچنین تعدادی از کپی‌های (<code
                      class="filename">*.dpkg-tmp</code>، <code
                      class="filename">*.dpkg-old</code> و <code
                      class="filename">*.dpkg-new</code>) و فایل‌های موقت؛ <code
                      class="command">dpkg</code> سپس به اجرای <code
                      class="command">postrm-purge</code> می‌پردازد.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>واژگان</em></span> Purge, حذف کامل بسته</strong></p></div></div></div><a
                id="id-1.8.6.6.13.4.2"
                class="indexterm"></a><div
                class="para">
					زمانی که یک بسته دبیان حذف می‌شود، فایل‌های پیکربندی به منظور تسهیل در فرآیند بازنصب احتمالی، نگاه داشته می‌شوند. به همین صورت، داده‌هایی که توسط فرآیند پیش‌زمینه (مانند محتوای یک دایرکتوری سرور LDAP یا محتوای یک پایگاه‌داده سرور SQL) تولید می‌شوند، معمولاً حفظ می‌گردند.
				</div><div
                class="para">
					برای حذف تمام داده‌های مربوط به یک بسته، ضروری است که از دستورات <code
                  class="command">dpkg -P <em
                    class="replaceable">package</em></code>، <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">package</em></code> یا <code
                  class="command">aptitude purge <em
                    class="replaceable">package</em></code> استفاده گردد.
				</div><div
                class="para">
					با توجه به ماهیت حذف چنین داده‌هایی، باید از purge با دقت بیشتری استفاده کرد.
				</div></div><a
              id="id-1.8.6.6.13.5"
              class="indexterm"></a><div
              class="para">
					چهار اسکریپتی که در بالا به توضیحشان پرداختیم توسط اسکریپت <code
                class="filename">config</code> کامل می‌شوند، که توسط بسته‌های مورد استفاده <code
                class="command">debconf</code> جهت جمع‌آوری اطلاعات پیکربندی از کاربر گرفته می‌شود. در زمان نصب، این اسکریپت پرسش‌های مورد نیاز توسط <code
                class="command">debconf</code> را تعریف می‌کند. پاسخ‌ها نیز در پایگاه‌داده <code
                class="command">debconf</code> برای ارجاع بعدی ذخیره می‌گردند. اسکریپت معمولاً توسط <code
                class="command">apt</code> اجرا می‌گردد و درست قبل از نصب بسته‌ها به صورت ترتیبی و یک به یک پرسش‌ها مطرح می‌شود. اسکریپت‌های پیش و پس از نصب می‌توانند از این اطلاعات جهت شخصی‌سازی تنظیمات کاربر استفاده کنند.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ابزار</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="id-1.8.6.6.13.7.2"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">debconf</code> برای حل یک مشکل تکرارشدنی در دبیان بوجود آمده است. تمام بسته‌های دبیان بدون وجود پیکربندی‌هایی که توسط دستورات <code
                  class="command">read</code> و <code
                  class="command">echo</code> در اسکریپت‌های <code
                  class="filename">postinst</code> (و سایر اسکریپت‌های مشابه) گردآوری می‌شوند، قادر به اجرا نخواهند بود. این بدان معنی نیز هست که کاربر در حین نصب یا بروزرسانی سیستم باید منتظر این پرسش‌ها بماند تا به آن‌ها در هر لحظه پاسخ دهد. این شیوه تعامل دستی، حال به لطف ابزار <code
                  class="command">debconf</code> جای خود را به فرآیند خودکار داده است.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> قابلیت‌های بسیاری دارد: مشخص کردن شیوه تعامل را برای توسعه‌دهنده ضروری می‌کند؛ امکان بومی‌سازی تمام رشته‌های موجود در صفحه را فراهم می‌سازد (تمام ترجمه‌ها در فایل <code
                  class="filename">templates</code> هر تعامل قرار می‌گیرند)؛ رابط‌های متفاوتی برای نمایش پرسش‌ها به کاربر دارد (متنی، گرافیکی، غیر-تعاملی) و همچنین امکان پیاده‌سازی یک پایگاه‌داده متمرکز از پاسخ‌ها را می‌دهد تا بتوان روی رایانه‌های دیگر از آن استفاده کرد... اما مهم‌ترین قابلیت آن امکان نمایش تمام پرسش‌ها در یک سطر به کاربر است، قبل از اینکه یک فرآیند طولانی نصب یا بروزرسانی آغاز گردد. کاربر در اینجا می‌تواند به سایر کارهای خود برسد بدون آنکه نیازی به پاسخ دادن به پرسش‌های متعدد در زمان نصب یا بروزرسانی وجود داشته باشد.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.conffiles"></a>5.2.3. Checksums، فهرستی از فایل‌های پیکربندی</h3></div></div></div><a
            id="id-1.8.6.7.2"
            class="indexterm"></a><a
            id="id-1.8.6.7.3"
            class="indexterm"></a><a
            id="id-1.8.6.7.4"
            class="indexterm"></a><a
            id="id-1.8.6.7.5"
            class="indexterm"></a><a
            id="id-1.8.6.7.6"
            class="indexterm"></a><div
            class="para">
				در کنار اسکریپت‌های پیکربندی و داده‌های کنترلی که در قسمت قبل مورد بررسی قرار گرفتند، فایل <code
              class="filename">control.tar.gz</code> از هر بسته دبیان ممکن است شامل فایل‌های دیگری نیز باشد. اولین فایل، <code
              class="filename">md5sums</code> است که شامل کد MD5 تمام فایل‌های موجود در بسته است. برتری اصلی آن هنگام استفاده از <code
              class="command">dpkg --verify</code> (که در قسمت <a
              class="xref"
              href="sect.supervision.html#sect.dpkg-verify">
      قسمت 14.3.3.1, “Auditing Packages with <code
                class="command">dpkg --verify</code>”
    </a> مورد مطالعه قرار می‌دهیم) است که بررسی می‌کند آیا این فایل‌ها از زمان نصب تغییری داشته‌اند یا خیر. نکته اینکه اگر این فایل وجود نداشته باشد، <code
              class="command">dpkg</code> در زمان نصب به صورت خودکار آن را ایجاد می‌کند (و در پایگاه‌داده dpkg مانند سایر فایل‌های کنترلی ذخیره می‌نماید).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> فهرستی از فایل‌های بسته را نمایش می‌دهد که به عنوان فایل‌های پیکربندی باید در نظر گرفته شوند. فایل‌های پیکربندی می‌توانند توسط مدیرسیستم تغییر یابند و <code
              class="command">dpkg</code> هنگام بروزرسانی بسته می‌کوشد تا این تغییرات را حفظ نماید.
			</div><div
            class="para">
				در این وضعیت، <code
              class="command">dpkg</code> به صورت هوشمندانه عمل می‌کند: اگر فایل پیکربندی استاندارد بین دو نسخه تغییری نکرده باشد، کاری انجام نمی‌دهد. اگر، در هر صورت، فایل تغییر کرده باشد، تلاش می‌کند تا آن را بروز نماید. دو حالت ممکن پیش می‌آید: یا مدیرسیستم اقدام به تغییر آن نکرده است که در این حالت <code
              class="command">dpkg</code> به صورت خودکار نسخه جدید را نصب می‌کند؛ یا فایل تغییر کرده است، که در این حالت <code
              class="command">dpkg</code> از مدیرسیستم می‌پرسد کدام نسخه را می‌خواهد نگهداری کند (نسخه قدیم با تغییرات یا نسخه جدید همراه با بسته). برای راهنمایی در اتخاذ این تصمیم، <code
              class="command">dpkg</code> پیشنهاد می‌کند که یک “<code
              class="command">diff</code>” از اختلاف بین دو فایل نمایش داده شود. اگر کاربر اقدام به حفظ نسخه قدیم کند، نسخه جدید در همان مسیر با پسوند <code
              class="filename">.dpkg-dist</code> ذخیره می‌گردد. اگر کاربر نسخه جدید را انتخاب کند، نسخه قدیم با پسوند <code
              class="filename">.dpkg-old</code> در همان مسیر ذخیره می‌گردد. یک اقدام دیگر این است که با توقف فعالیت <code
              class="command">dpkg</code> اقدام به ویرایش فایل در آن لحظه کرده و سپس عملیات مرتبط با فراخوانی اختلاف بین دو فایل (که توسط <code
              class="command">diff</code> مشخص گردید) را اجرا کنیم.
			</div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>مطالعه بیشتر</em></span> پیشگیری از پرسش‌های فایل پیکربندی</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> بروزرسانی‌های فایل پیکربندی را مدیریت می‌کند، اما در هنگام اجرای این عملیات، از مدیرسیستم پرسش‌هایی را مطرح می‌کند. این فرآیند برای افرادی که دوست دارند بروزرسانی بدون دخالت انسان صورت گیرد، ناخوشایند بنظر می‌آید. این همان دلیلی است که برنامه امکان ارائه پاسخ‌های پیش‌فرض به پرسش‌ها را بر اساس یک قاعده مشخص فراهم می‌آورد: <code
                class="command">--force-confold</code> نسخه قبلی از فایل را حفظ می‌کند؛ <code
                class="command">--force-confnew</code> از نسخه جدید فایل استفاده می‌کند (این گزینه‌ها اختیاری هستند، حتی اگر فایل توسط مدیرسیستم تغییر نکرده باشد، که به ندرت پیش می‌آید تاثیر مطلوبی داشته باشد). اضافه‌کردن گزینه <code
                class="command">--force-confdef</code> به <code
                class="command">dpkg</code> می‌گوید هر طور صلاح می‌داند با آن برخورد کند (به عبارت دیگر، زمانی که فایل پیکربندی اصلی تغییر نکرده باشد) و تنها از <code
                class="command">--force-confnew</code> یا <code
                class="command">--force-confold</code> برای سایر حالت‌ها استفاده کند.
			</div><div
              class="para">
				این گزینه‌ها مربوط به <code
                class="command">dpkg</code> هستند، اما در اکثر اوقات مدیرسیستم به صورت مستقیم با <code
                class="command">aptitude</code> یا <code
                class="command">apt-get</code> سروکار دارد. به همین دلیل، دانستن شیوه صحیح فراخوانی این گزینه‌ها برای ارجاع به <code
                class="command">dpkg</code> ضروری است (رابط خط فرمان تقریباً مشابهی دارند با یکدیگر).
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" full-upgrade</code></strong></pre><div
              class="para">
				این گزینه‌ها می‌توانند به صورت مستقیم در فایل پیکربندی <code
                class="command">apt</code> قرار گیرند. برای این کار، خط زیر را در فایل <code
                class="filename">/etc/apt/apt.conf.d/local</code> قرار دهید:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }</pre></div><div
              class="para">
				قرار دادن این گزینه‌ها در فایل پیکربندی به این معنی است که توسط رابط‌های گرافیکی مانند <code
                class="command">aptitude</code> نیز قابل دسترسی هستند.
			</div></div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>مطالعه بیشتر</em></span> وادارکردن dpkg به پرسیدن سوالات پیکربندی</strong></p></div></div></div><div
              class="para">
				گزینه <code
                class="command">--force-confask</code> به <code
                class="command">dpkg</code> می‌‌گوید که تمام پرسش‌های مربوط به فایل پیکربندی را از کاربر بپرسد، حتی آن‌هایی که در حالت عادی پرسیده نمی‌شوند. بنابراین، هنگام نصب مجدد یک بسته با این روش، <code
                class="command">dpkg</code> مجدد تمام پرسش‌های مربوط به فایل‌های پیکربندی را از مدیرسیستم می‌پرسد. این روش مناسبی به منظور نصب مجدد فایل‌های پیکربندی است که حذف گردیده‌اند و کپی دیگری از آنان وجود ندارد: یک عملیات باز-نصب نرمال صورت نمی‌پذیرد، چرا که <code
                class="command">dpkg</code> عملیات حذف را یک تغییر قانونی می‌داند و این امر منجر می‌شود که فایل پیکربندی موردنظر نصب نگردد.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>قبلی</strong>
      فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بن...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>بعدی</strong>5.3. ساختار یک بسته سورس</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.package-meta-information.html">ar-MA</a></li><li><a
              href="../da-DK/sect.package-meta-information.html">da-DK</a></li><li><a
              href="../de-DE/sect.package-meta-information.html">de-DE</a></li><li><a
              href="../el-GR/sect.package-meta-information.html">el-GR</a></li><li><a
              href="../en-US/sect.package-meta-information.html">en-US</a></li><li><a
              href="../es-ES/sect.package-meta-information.html">es-ES</a></li><li><a
              href="../fa-IR/sect.package-meta-information.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.package-meta-information.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.package-meta-information.html">hr-HR</a></li><li><a
              href="../id-ID/sect.package-meta-information.html">id-ID</a></li><li><a
              href="../it-IT/sect.package-meta-information.html">it-IT</a></li><li><a
              href="../ja-JP/sect.package-meta-information.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.package-meta-information.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.package-meta-information.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.package-meta-information.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.package-meta-information.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.package-meta-information.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.package-meta-information.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.package-meta-information.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.package-meta-information.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.package-meta-information.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.package-meta-information.html">zh-TW</a></li></ul></div></body></html>
