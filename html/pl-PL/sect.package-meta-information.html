<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. Pakiet Informacji Meta</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-pl-PL-1.0-1" /><meta
        name="keywords"
        content="Pakiet binarny, Pakiet źródłowy, dpkg, zależności, konflikt" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="packaging-system.html"
        title="Rozdział 5. System Pakowania: Fundamentalne zasady oraz narzędzia" /><link
        rel="prev"
        href="packaging-system.html"
        title="Rozdział 5. System Pakowania: Fundamentalne zasady oraz narzędzia" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. Struktura Pakietu Źródłowego" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/pl-PL/sect.package-meta-information.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Poprzedni</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Następny</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.package-meta-information"></a>5.2. Pakiet Informacji Meta</h2></div></div></div><a
          id="idm139722610420192"
          class="indexterm"></a><a
          id="idm139722610419264"
          class="indexterm"></a><div
          class="para">
			The Debian package is not only an archive of files intended for installation. It is part of a larger whole, and it describes its relationship with other Debian packages (dependencies, conflicts, suggestions). It also provides scripts that enable the execution of commands at different stages in the package's lifecycle (installation, removal, upgrades). These data are used by the package management tools but are not part of the packaged software; they are, within the package, what is called its “meta-information” (information about other information).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.control"></a>5.2.1. Opis pliku <code
                    class="filename">control</code> File</h3></div></div></div><a
            id="idm139722624381728"
            class="indexterm"></a><a
            id="idm139722624380800"
            class="indexterm"></a><a
            id="idm139722624379360"
            class="indexterm"></a><div
            class="para">
				This file uses a structure similar to email headers (as defined by RFC 2822). For example, for <span
              class="pkg pkg">apt</span>, the <code
              class="filename">control</code> file looks like the following:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.0.9.6
Installed-Size: 3788
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Depends: libapt-pkg4.12 (&gt;= 1.0.9.6), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:4.1.1), libstdc++6 (&gt;= 4.9), debian-archive-keyring, gnupg
Suggests: aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), apt-doc, python-apt
Conflicts: python-apt (&lt;&lt; 0.7.93.2~)
Breaks: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 role::shared-lib, scope::application, scope::utility, sound::player,
 suite::debian, use::downloading, use::organizing, use::searching,
 works-with::audio, works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.0.9.6_amd64.deb
Size: 1107560
MD5sum: a325ccb14e69fef2c50da54e035a4df4
SHA1: 635d09fcb600ec12810e3136d51e696bcfa636a6
SHA256: 371a559ce741394b59dbc6460470a9399be5245356a9183bbeea0f89ecaabb03</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>Powrót do podstaw</em></span> RFC — Internetowy Standard</strong></p></div></div></div><a
              id="idm139722624371840"
              class="indexterm"></a><a
              id="idm139722624370880"
              class="indexterm"></a><div
              class="para">
				RFC is the abbreviation of “Request For Comments”. An RFC is generally a technical document that describes what will become an Internet standard. Before becoming standardized and frozen, these standards are submitted for public review (hence their name). The IETF (Internet Engineering Task Force) decides on the evolution of the status of these documents (proposed standard, draft standard, or standard).
			</div><div
              class="para">
				RFC 2026 definiuje proces standaryzacji protokołów internetowych<div
                class="url">→ <a
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722624367680"></a>5.2.1.1. Zależności <code
                      class="literal">Depends</code>Pola</h4></div></div></div><a
              id="idm139722624366400"
              class="indexterm"></a><a
              id="idm139722624499824"
              class="indexterm"></a><a
              id="idm139722624498544"
              class="indexterm"></a><div
              class="para">
					The dependencies are defined in the <code
                class="literal">Depends</code> field in the package header. This is a list of conditions to be met for the package to work correctly — this information is used by tools such as <code
                class="command">apt</code> in order to install the required libraries, in appropriate versions fulfilling the dependencies of the package to be installed. For each dependency, it is possible to restrict the range of versions that meet that condition. In other words, it is possible to express the fact that we need the package <span
                class="pkg pkg">libc6</span> in a version equal to or greater than “2.15” (written “<code
                class="command">libc6 (&gt;= 2.15)</code>”). Version comparison operators are as follows:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: mniejsza od
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: mniejsza od bądź równa do
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: równa się (note that “<code
                      class="literal">2.6.1</code>”nie równa się “<code
                      class="literal">2.6.1-1</code>”);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: większa bądz równa do
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: większa od
						</div></li></ul></div><div
              class="para">
					In a list of conditions to be met, the comma serves as a separator. It must be interpreted as a logical “and”. In conditions, the vertical bar (“|”) expresses a logical “or” (it is an inclusive “or”, not an exclusive “either/or”). Carrying greater priority than “and”, it can be used as many times as necessary. Thus, the dependency “(A or B) and C” is written <code
                class="command">A | B, C</code>. In contrast, the expression “A or (B and C)” should be written as “(A or B) and (A or C)”, since the <code
                class="literal">Depends</code> field does not tolerate parentheses that change the order of priorities between the logical operators “or” and “and”. It would thus be written <code
                class="command">A | B, A | C</code>. <div
                class="url">→ <a
                  href="http://www.debian.org/doc/debian-policy/ch-relationships.html">http://www.debian.org/doc/debian-policy/ch-relationships.html</a></div>
				</div><a
              id="idm139722624482272"
              class="indexterm"></a><div
              class="para">
					The dependencies system is a good mechanism for guaranteeing the operation of a program, but it has another use with “meta-packages”. These are empty packages that only describe dependencies. They facilitate the installation of a consistent group of programs preselected by the meta-package maintainer; as such, <code
                class="command">apt-get install <em
                  class="replaceable">meta-package</em></code> will automatically install all of these programs using the meta-package's dependencies. The <span
                class="pkg pkg">gnome</span>, <span
                class="pkg pkg">kde-full</span> and <span
                class="pkg pkg">linux-image-amd64</span> packages are examples of meta-packages.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DEBIAN POLICY</em></span> <code
                          class="literal">Pre-Depends</code>,bardziej wymagający <code
                          class="literal">Depends</code></strong></p></div></div></div><a
                id="idm139722624475856"
                class="indexterm"></a><a
                id="idm139722624474576"
                class="indexterm"></a><div
                class="para">
					“Pre-dependencies”, which are listed in the “<code
                  class="literal">Pre-Depends</code>” field in the package headers, complete the normal dependencies; their syntax is identical. A normal dependency indicates that the package in question must be unpacked and configured before configuration of the package declaring the dependency. A pre-dependency stipulates that the package in question must be unpacked and configured before execution of the pre-installation script of the package declaring the pre-dependency, that is before its installation.
				</div><div
                class="para">
					A pre-dependency is very demanding for <code
                  class="command">apt</code>, because it adds a strict constraint on the ordering of the packages to install. As such, pre-dependencies are discouraged unless absolutely necessary. It is even recommended to consult other developers on <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> before adding a pre-dependency. It is generally possible to find another solution as a work-around.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>Polityka Debiana</em></span> <code
                          class="literal">Rekomenduje</code>, <code
                          class="literal">Proponuje</code>, oraz <code
                          class="literal">poprawia</code>pola</strong></p></div></div></div><a
                id="idm139722624467776"
                class="indexterm"></a><a
                id="idm139722624466496"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Recommends</code> and <code
                  class="literal">Suggests</code> fields describe dependencies that are not compulsory. The “recommended” dependencies, the most important, considerably improve the functionality offered by the package but are not indispensable to its operation. The “suggested” dependencies, of secondary importance, indicate that certain packages may complement and increase their respective utility, but it is perfectly reasonable to install one without the others.
				</div><div
                class="para">
					Powinieneś zawsze instalować rekomendowane pakiety, chyba że wiesz dokładnie dlaczego ich nie potrzebujesz. Nie jest wtedy wymagane instalowania sugerowanych pakietów chyba że wiesz że ich potrzebujesz.
				</div><a
                id="idm139722624462672"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Enhances</code> field also describes a suggestion, but in a different context. It is indeed located in the suggested package, and not in the package that benefits from the suggestion. Its interest lies in that it is possible to add a suggestion without having to modify the package that is concerned. Thus, all add-ons, plug-ins, and other extensions of a program can then appear in the list of suggestions related to the software. Although it has existed for several years, this last field is still largely ignored by programs such as <code
                  class="command">apt-get</code> or <code
                  class="command">synaptic</code>. Its purpose is for a suggestion made by the <code
                  class="literal">Enhances</code> field to appear to the user in addition to the traditional suggestions — found in the <code
                  class="literal">Suggests</code> field.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722624457744"></a>5.2.1.2. Konflikt <code
                      class="literal">Konflikt</code> Pola</h4></div></div></div><a
              id="idm139722624456464"
              class="indexterm"></a><a
              id="idm139722624455504"
              class="indexterm"></a><a
              id="idm139722624454224"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Conflicts</code> field indicates when a package cannot be installed simultaneously with another. The most common reasons for this are that both packages include a file of the same name, or provide the same service on the same TCP port, or would hinder each other's operation.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> will refuse to install a package if it triggers a conflict with an already installed package, except if the new package specifies that it will “replace” the installed package, in which case <code
                class="command">dpkg</code> will choose to replace the old package with the new one. <code
                class="command">apt-get</code> always follows your instructions: if you choose to install a new package, it will automatically offer to uninstall the package that poses a problem.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722624449120"></a>5.2.1.3. Incompatibilities: the <code
                      class="literal">Breaks</code> Field</h4></div></div></div><a
              id="idm139722624447840"
              class="indexterm"></a><a
              id="idm139722624446880"
              class="indexterm"></a><a
              id="idm139722624445600"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Breaks</code> field has an effect similar to that of the <code
                class="literal">Conflicts</code> field, but with a special meaning. It signals that the installation of a package will “break” another package (or particular versions of it). In general, this incompatibility between two packages is transitory, and the <code
                class="literal">Breaks</code> relationship specifically refers to the incompatible versions.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> will refuse to install a package that breaks an already installed package, and <code
                class="command">apt-get</code> will try to resolve the problem by updating the package that would be broken to a newer version (which is assumed to be fixed and, thus, compatible again).
				</div><div
              class="para">
					This type of situation may occur in the case of updates without backwards compatibility: this is the case if the new version no longer functions with the older version, and causes a malfunction in another program without making special provisions. The <code
                class="literal">Breaks</code> field prevents the user from running into these problems.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722624439056"></a>5.2.1.4. Provided Items: the <code
                      class="literal">Provides</code> Field</h4></div></div></div><a
              id="idm139722624437776"
              class="indexterm"></a><div
              class="para">
					This field introduces the very interesting concept of a “virtual package”. It has many roles, but two are of particular importance. The first role consists in using a virtual package to associate a generic service with it (the package “provides” the service). The second indicates that a package completely replaces another, and that for this purpose it can also satisfy the dependencies that the other would satisfy. It is thus possible to create a substitution package without having to use the same package name.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> Meta-package and virtual package</strong></p></div></div></div><a
                id="idm139722609594848"
                class="indexterm"></a><a
                id="idm139722609593888"
                class="indexterm"></a><a
                id="idm139722609592448"
                class="indexterm"></a><div
                class="para">
					It is essential to clearly distinguish meta-packages from virtual packages. The former are real packages (including real <code
                  class="filename">.deb</code> files), whose only purpose is to express dependencies.
				</div><div
                class="para">
					Virtual packages, however, do not exist physically; they are only a means of identifying real packages based on common, logical criteria (service provided, compatibility with a standard program or a pre-existing package, etc.).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm139722609589504"></a>5.2.1.4.1. Providing a “Service”</h5></div></div></div><div
                class="para">
						Let us discuss the first case in greater detail with an example: all mail servers, such as <span
                  class="pkg pkg">postfix</span> or <span
                  class="pkg pkg">sendmail</span> are said to “provide” the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. Thus, any package that needs this service to be functional (e.g. a mailing list manager, such as <span
                  class="pkg pkg">smartlist</span> or <span
                  class="pkg pkg">sympa</span>) simply states in its dependencies that it requires a <span
                  class="pkg pkg">mail-transport-agent</span> instead of specifying a large yet incomplete list of possible solutions (e.g. <code
                  class="command">postfix | sendmail | exim4 | …</code>). Furthermore, it is useless to install two mail servers on the same machine, which is why each of these packages declares a conflict with the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. A conflict between a package and itself is ignored by the system, but this technique will prohibit the installation of two mail servers side by side.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>DEBIAN POLICY</em></span> List of virtual packages</strong></p></div></div></div><a
                  id="idm139722609581760"
                  class="indexterm"></a><div
                  class="para">
						For virtual packages to be useful, everyone must agree on their name. This is why they are standardized in the Debian Policy. The list includes among others <span
                    class="pkg pkg">mail-transport-agent</span> for mail servers, <span
                    class="pkg pkg">c-compiler</span> for C programming language compilers, <span
                    class="pkg pkg">www-browser</span> for web browsers, <span
                    class="pkg pkg">httpd</span> for web servers, <span
                    class="pkg pkg">ftp-server</span> for FTP servers, <span
                    class="pkg pkg">x-terminal-emulator</span> for terminal emulators in graphical mode (<code
                    class="command">xterm</code>), and <span
                    class="pkg pkg">x-window-manager</span> for window managers.
					</div><div
                  class="para">
						The full list can be found on the Web. <div
                    class="url">→ <a
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm139722609573168"></a>5.2.1.4.2. Interchangeability with Another Package</h5></div></div></div><div
                class="para">
						The <code
                  class="literal">Provides</code> field is also interesting when the content of a package is included in a larger package. For example, the <span
                  class="pkg pkg">libdigest-md5-perl</span> Perl module was an optional module in Perl 5.6, and has been integrated as standard in Perl 5.8 (and later versions, such as 5.20 present in <span
                  class="distribution distribution">Jessie</span>). As such, the package <span
                  class="pkg pkg">perl</span> has since version 5.8 declared <code
                  class="literal">Provides: libdigest-md5-perl</code> so that the dependencies on this package are met if the user has Perl 5.8 (or newer). The <span
                  class="pkg pkg">libdigest-md5-perl</span> package itself has eventually been deleted, since it no longer had any purpose when old Perl versions were removed.
					</div><div
                class="figure"><a
                  id="idm139722609568064"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="Use of a Provides field in order to not break dependencies" /></div></div><p
                  class="title"><strong>Rysunek 5.1. Use of a <code
                      class="literal">Provides</code> field in order to not break dependencies</strong></p></div><div
                class="para">
						This feature is very useful, since it is never possible to anticipate the vagaries of development, and it is necessary to be able to adjust to renaming, and other automatic replacement, of obsolete software.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>BACK TO BASICS</em></span> Perl, a programming language</strong></p></div></div></div><a
                  id="idm139722609563056"
                  class="indexterm"></a><a
                  id="idm139722609562096"
                  class="indexterm"></a><div
                  class="para">
						Perl (Practical Extraction and Report Language) is a very popular programming language. It has many ready-to-use modules that cover a vast spectrum of applications, and that are distributed by the CPAN (Comprehensive Perl Archive Network) servers, an exhaustive network of Perl packages. <div
                    class="url">→ <a
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    class="url">→ <a
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						Since it is an interpreted language, a program written in Perl does not require compilation prior to execution. This is why they are called “Perl scripts”.
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm139722609558016"></a>5.2.1.4.3. Past Limitations</h5></div></div></div><div
                class="para">
						Virtual packages used to suffer from some limitations, the most significant of which was the absence of a version number. To return to the previous example, a dependency such as <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code>, despite the presence of Perl 5.10, would never be considered as satisfied by the packaging system — while in fact it most likely is satisfied. Unaware of this, the package system chose the least risky option, assuming that the versions do not match.
					</div><div
                class="para">
						This limitation has been lifted in <span
                  class="pkg pkg">dpkg</span> 1.17.11, and is no longer relevant in Jessie.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722609554464"></a>5.2.1.5. Replacing Files: The <code
                      class="literal">Replaces</code> Field</h4></div></div></div><a
              id="idm139722609553184"
              class="indexterm"></a><a
              id="idm139722609552224"
              class="indexterm"></a><a
              id="idm139722609550944"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Replaces</code> field indicates that the package contains files that are also present in another package, but that the package is legitimately entitled to replace them. Without this specification, <code
                class="command">dpkg</code> fails, stating that it can not overwrite the files of another package (technically, it is possible to force it to do so with the <code
                class="literal">--force-overwrite</code> option, but that's not considered standard operation). This allows identification of potential problems and requires the maintainer to study the matter prior to choosing whether to add such a field.
				</div><div
              class="para">
					The use of this field is justified when package names change or when a package is included in another. This also happens when the maintainer decides to distribute files differently among various binary packages produced from the same source package: a replaced file no longer belongs to the old package, but only to the new one.
				</div><div
              class="para">
					If all of the files in an installed package have been replaced, the package is considered to be removed. Finally, this field also encourages <code
                class="command">dpkg</code> to remove the replaced package where there is a conflict.
				</div><div
              class="sidebar"><a
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> The <code
                          class="literal">Tag</code> field</strong></p></div></div></div><div
                class="para">
					In the <span
                  class="pkg pkg">apt</span> example above, we can see the presence of a field that we have not yet described, the <code
                  class="literal">Tag</code> field. This field does not describe a relationship between packages, but is simply a way of categorizing a package in a thematic taxonomy. This classification of packages according to several criteria (type of interface, programming language, domain of application, etc.) has been available for a long time. Despite this, not all packages have accurate tags and it is not yet integrated in all Debian tools; <code
                  class="command">aptitude</code> displays these tags, and allows them to be used as search criteria. For those who are repelled by <code
                  class="command">aptitude</code>'s search criteria, the following website allows navigation of the tag database: <div
                  class="url">→ <a
                    href="http://debtags.alioth.debian.org/">http://debtags.alioth.debian.org/</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm139722609539280"></a>5.2.2. Configuration Scripts</h3></div></div></div><a
            id="idm139722609538480"
            class="indexterm"></a><a
            id="idm139722609537360"
            class="indexterm"></a><a
            id="idm139722609536240"
            class="indexterm"></a><a
            id="idm139722609535120"
            class="indexterm"></a><a
            id="idm139722609534000"
            class="indexterm"></a><div
            class="para">
				In addition to the <code
              class="filename">control</code> file, the <code
              class="filename">control.tar.gz</code> archive for each Debian package may contain a number of scripts, called by <code
              class="command">dpkg</code> at different stages in the processing of a package. The Debian Policy describes the possible cases in detail, specifying the scripts called and the arguments that they receive. These sequences may be complicated, since if one of the scripts fails, <code
              class="command">dpkg</code> will try to return to a satisfactory state by canceling the installation or removal in progress (insofar as it is possible).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> <code
                        class="command">dpkg</code>'s database</strong></p></div></div></div><a
              id="idm139722609528592"
              class="indexterm"></a><a
              id="idm139722609527472"
              class="indexterm"></a><div
              class="para">
				All of the configuration scripts for installed packages are stored in the <code
                class="filename">/var/lib/dpkg/info/</code> directory, in the form of a file prefixed with the package's name. This directory also includes a file with the <code
                class="filename">.list</code> extension for each package, containing the list of files that belong to that package.
			</div><div
              class="para">
				The <code
                class="filename">/var/lib/dpkg/status</code> file contains a series of data blocks (in the format of the famous mail headers, RFC 2822) describing the status of each package. The information from the <code
                class="filename">control</code> file of the installed packages is also replicated there.
			</div></div><div
            class="para">
				In general, the <code
              class="filename">preinst</code> script is executed prior to installation of the package, while the <code
              class="filename">postinst</code> follows it. Likewise, <code
              class="filename">prerm</code> is invoked before removal of a package and <code
              class="filename">postrm</code> afterwards. An update of a package is equivalent to removal of the previous version and installation of the new one. It is not possible to describe in detail all the possible scenarios here, but we will discuss the most common two: an installation/update and a removal.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Symbolic names of the scripts</strong></p></div></div></div><div
              class="para">
				The sequences described in this section call configuration scripts by specific names, such as <code
                class="command">old-prerm</code> or <code
                class="command">new-postinst</code>. They are, respectively, the <code
                class="command">prerm</code> script contained in the old version of the package (installed before the update) and the <code
                class="command">postinst</code> script contained in the new version (installed by the update).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> State diagrams</strong></p></div></div></div><div
              class="para">
				Manoj Srivastava made these diagrams explaining how the configuration scripts are called by <code
                class="command">dpkg</code>. Similar diagrams have also been developed by the Debian Women project; they are a bit simpler to understand, but less complete. <div
                class="url">→ <a
                  href="http://people.debian.org/~srivasta/MaintainerScripts.html">http://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                class="url">→ <a
                  href="http://wiki.debian.org/MaintainerScripts">http://wiki.debian.org/MaintainerScripts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722609512640"></a>5.2.2.1. Installation and Upgrade</h4></div></div></div><a
              id="idm139722609511872"
              class="indexterm"></a><div
              class="para">
					Here is what happens during an installation (or an update):
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							For an update, <code
                      class="command">dpkg</code> calls the <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">new-version</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Still for an update, <code
                      class="command">dpkg</code> then executes <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">old-version</em></code>; for a first installation, it executes <code
                      class="command">new-preinst install</code>. It may add the old version in the last parameter, if the package has already been installed and removed since (but not purged, the configuration files having been retained).
						</div></li><li
                  class="listitem"><div
                    class="para">
							The new package files are then unpacked. If a file already exists, it is replaced, but a backup copy is temporarily made.
						</div></li><li
                  class="listitem"><div
                    class="para">
							For an update, <code
                      class="command">dpkg</code> executes <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">new-version</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> updates all of the internal data (file list, configuration scripts, etc.) and removes the backups of the replaced files. This is the point of no return: <code
                      class="command">dpkg</code> no longer has access to all of the elements necessary to return to the previous state.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> will update the configuration files, asking the user to decide if it is unable to automatically manage this task. The details of this procedure are discussed in <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">Sekcja 5.2.3, „Sumy kontrolne, lista plików konfiguracyjnych”</a>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Finally, <code
                      class="command">dpkg</code> configures the package by executing <code
                      class="command">new-postinst configure <em
                        class="replaceable">last-version-configured</em></code>.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139722609494160"></a>5.2.2.2. Usuwanie pakietów</h4></div></div></div><div
              class="para">
					O to co zachodzi podczas usuwania pakietów:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> wywołuje komendę <code
                      class="command">prerm remove</code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> usuwa wszystkie pliki pakietów, z wyjątkiem plików konfiguracyjnych i skryptów konfiguracyjnych.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> uruchamia komendę <code
                      class="command">postrm remove</code>. Wszystkie skrypty konfiguracyjne, poza <code
                      class="filename">postrm</code>, zostały usunięte. Jeśli użytkownik nie użył opcji "purge", proces dobiega końca.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Dla całkowitego skasowania pakietów (Wydanie polecenia <code
                      class="command">dpkg --purge</code> albo <code
                      class="command">dpkg -P</code>), w tym usunięciu również plików konfiguracyjnych, wraz z ustaloną liczbą ich kopii (<code
                      class="filename">*.dpkg-tmp</code>, <code
                      class="filename">*.dpkg-old</code>, <code
                      class="filename">*.dpkg-new</code>) i plików tymczasowych; <code
                      class="command">dpkg</code> następnie wykonaj <code
                      class="command">postrm purge</code>.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SŁOWNIK</em></span> Purge, całkowite usunięcie</strong></p></div></div></div><a
                id="idm139722609481024"
                class="indexterm"></a><div
                class="para">
					Podczas gdy pakiet Debiana jest usuwany, pliki konfiguracyjne są zatrzymywane w porządku ułatwiającym ich możliwą ponowną instalacje. Podobnie, dane generowane przez demona (takie jak zawartość katalogu serwera LDAP, albo zawartość bazy danych serwera SQL) są zwykle zatrzymywane.
				</div><div
                class="para">
					Do usunięcia wszystkich danych skojarzonych z pakietem, niezbędne jest "całkowite usunięcie" pakietu komendą, <code
                  class="command">dpkg -P <em
                    class="replaceable">nazwa pakietu</em></code>, <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">nazwa pakietu</em></code> albo <code
                  class="command">aptitude purge <em
                    class="replaceable">nazwa pakietu</em></code>.
				</div><div
                class="para">
					Given the definitive nature of such data removals, a purge should not be taken lightly.
				</div></div><a
              id="idm139722609475616"
              class="indexterm"></a><div
              class="para">
					The four scripts detailed above are complemented by a <code
                class="filename">config</code> script, provided by packages using <code
                class="command">debconf</code> to acquire information from the user for configuration. During installation, this script defines in detail the questions asked by <code
                class="command">debconf</code>. The responses are recorded in the <code
                class="command">debconf</code> database for future reference. The script is generally executed by <code
                class="command">apt</code> prior to installing packages one by one in order to group all the questions and ask them all to the user at the beginning of the process. The pre- and post-installation scripts can then use this information to operate according to the user's wishes.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NARZĘDZIE</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="idm139722609469152"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">debconf</code> został stworzony, żeby rozwiązać powtarzające się problemy z Debianem. Wszystkie pakiety Debiana nie są zdolne funkcjonować bez minimalnej konfiguracji zadając zazwyczaj zapytania z użyciem komend <code
                  class="command">echo</code> oraz <code
                  class="command">read</code> w <code
                  class="filename">postinst</code> skryptach powłoki (i w innych podobnych skryptach). Ale to także oznacza że podczas większej instalacji albo aktualizacji użytkownik musi przebywać przed komputerem odpowiadając na przeróżne zapytania, które mogą się pojawić w każdej chwili. Te ręczne interakcje zostały niemal całkowicie rozwiązane, dzięki użyciu narzędzia jakim jest <code
                  class="command">debconf</code>.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> ma wiele interesujących cech: wymaga on od programisty sprecyzowania interakcji z użytkownikiem; pozwala wyświetlić użytkownikowi lokalizacje wszystkich ciągów znaków (wszystkie tłumaczenia są przechowywane w plikach tymczasowych opisujących interakcje); posiada różne interfejsy do wyświetlania zapytań skierowanych do użytkownika (tryb tekstowy, tryb graficzny, nie-interaktywny ); i umożliwia stworzenie centralnej bazy danych odpowiedzi w celu dzielenia tych samych konfiguracji na różnych komputerach... ale najważniejsze jest to że jest teraz możliwość przedstawienia wszystkich zapytań użytkownikowi w wierszu, przed rozpoczęciem długiej instalacji albo aktualizacji. Użytkownik może zająć się swoimi sprawami podczas gdy system sam sobie radzi z instalacją, bez konieczności wpatrywania się w ekran w oczekiwaniu na zapytanie.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.conffiles"></a>5.2.3. Sumy kontrolne, lista plików konfiguracyjnych</h3></div></div></div><a
            id="idm139722609461184"
            class="indexterm"></a><a
            id="idm139722609460064"
            class="indexterm"></a><a
            id="idm139722609458944"
            class="indexterm"></a><a
            id="idm139722609457984"
            class="indexterm"></a><a
            id="idm139722609456544"
            class="indexterm"></a><div
            class="para">
				Oprócz zarządcy skryptów i kontroli danych wspomnianych już w poprzednich sekcjach, <code
              class="filename">control.tar.gz</code> archiwum pakietów Debiana może zawierać inne interesujące pliki. Pierwszy , <code
              class="filename">md5sums</code>, zawiera MD5 sumy kontrolne dla wszystkich plików pakietu. Główną zaletą jest to, że umożliwia to narzędziom takim jak <code
              class="command">debsums</code> (które będziemy badać w <a
              class="xref"
              href="sect.supervision.html#sect.debsums">Sekcja 14.3.3.1, „Auditing Packages: <code
                class="command">debsums</code> and its Limits”</a>) sprawdzenie czy te pliki były modyfikowane od czasu ich instalacji. Zauważ, że kiedy ten plik nie istnieje, <code
              class="command">dpkg</code> dynamicznie go wygeneruje podczas instalacji (i zostanie zachowany w bazie danych dpkg tak jak inne pliki kontrolne).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> zestawienia plików pakietowych, które muszą być obsługiwane jako pliki konfiguracyjne. Pliki konfiguracyjne mogą być modyfikowane przez administratora i <code
              class="command">dpkg</code> spróbuje przechować zmiany podczas aktualizacji pakietów.
			</div><div
            class="para">
				W istocie, w tej sytuacji <code
              class="command">dpkg</code> zachowuje się na tyle inteligentnie na ile to jest możliwe; Jeśli standardowy plik konfiguracyjny nie został zmieniony pomiędzy dwoma wersjami, nie podejmuje żadnych działań. Jeśli jednak plik był modyfikowany spróbuje wtedy go uaktualnić. Są możliwe dwa przypadki: Albo administrator nie modyfikował tego pliku konfiguracyjnego, w takim razie <code
              class="command">dpkg</code> automatycznie instaluje nową wersję; albo plik był zmieniany i w takim razie <code
              class="command">dpkg</code> pyta administratora, którą wersję chciałby użyć (starą wersję ze zmianami albo nową dostarczoną wraz z pakietem). Dla ułatwienia podjęcia tej decyzji <code
              class="command">dpkg</code> oferuje wyświetlenie “<code
              class="command">diff</code>” który pokazuje różnice pomiędzy dwiema wersjami. Jeśli użytkownik postanowi zachować starą wersję, nowa wersja będzie przechowywana w tej samej lokalizacji, w pliku z rozszerzeniem <code
              class="filename">.dpkg-dist</code>. Jeśli użytkownik wybierze nową wersję, stara wersja będzie przechowywana w pliku o rozszerzeniu <code
              class="filename">.dpkg-old</code>. Inna dostępna akcja polega na chwilowym przerwaniu <code
              class="command">dpkg</code> w celu edycji pliku i próby przeinstalowania odpowiednich modyfikacji (poprzednio zidentyfikowanych z pomocą <code
              class="command">diff</code>).
			</div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IDĄC DALEJ</em></span> Unikanie zapytań pliku konfiguracyjnego</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> obsługuje aktualizacje pliku konfiguracyjnego, ale w trakcie regularnie przerywa swoją pracę, żeby zapytam administratora o dane wejściowe. To czyni go mniej przyjemnym dla tych, którzy chcieliby uruchomić aktualizacje w sposób bez interaktywny. Dlatego właśnie program ten oferuje opcje pozwalające systemowi na automatyczne odpowiadanie zgodnie z tą samą logiką : <code
                class="command">--force-confold</code>zatrzymuje starą wersję pliku; <code
                class="command">--force-confnew</code>użyje nowej wersji programu (wybory te są respektowane, nawet jeśli plik nie został zmieniony przez administratora, który rzadko kiedy chce ich dokonywać). Dodanie opcji <code
                class="command">--force-confdef</code> mówi <code
                class="command">dpkg</code> żeby sam zdecydował kiedy jest to możliwe(inaczej mówiąc, kiedy oryginalny plik konfiguracyjny nie był modyfikowany), i użył tylko <code
                class="command">--force-confnew</code> lub <code
                class="command">--force-confold</code> dla innych przypadków.
			</div><div
              class="para">
				Opcje te dotyczą <code
                class="command">dpkg</code>, ale przez większą część czasu administrator będzie pracować bezpośrednio z programami <code
                class="command">aptitude</code> albo <code
                class="command">apt-get</code>. Niezbędna jest zatem znajomość składni używanej do wskazania opcji przekazywanych do komendy <code
                class="command">dpkg</code> (ich interfejsy z wierszem poleceń są bardzo podobne do siebie)
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</code></strong></pre><div
              class="para">
				Opcje te mogą być przechowywane bezpośrednio w konfiguracji <code
                class="command">apt</code>. Żeby to zrobić, po prostu wpisz do pliku <code
                class="filename">/etc/apt/apt.conf.d/local</code> następującą linię:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }
</pre></div><div
              class="para">
				Załączenie tej opcji w pliku konfiguracyjnym oznacza, że będzie to także użyte w interfejsie graficznym jak na przykład <code
                class="command">aptitude</code>.
			</div></div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IDĄC DALEJ</em></span> Zmuszanie dpkg do zadawania pytań plikowi konfiguracyjnemu </strong></p></div></div></div><div
              class="para">
				Opcja <code
                class="command">--force-confask</code> żąda od <code
                class="command">dpkg</code> wyświetlenia zapytań dotyczących plików konfiguracyjnych, nawet w przypadku gdy nie są zwykle potrzebne. Więc, kiedy instalujemy ponownie pakiet z tą opcją, <code
                class="command">dpkg</code> zapyta ponownie o wszystkie pliki konfiguracyjne zmodyfikowane przez administratora. To jest bardzo poręczne, zwłaszcza dla przeinstalowania oryginalnego pliku konfiguracyjnego, jeśli został on usunięty i nie jest dostępna żadna kopia: zwykła re-instalacja nie zadziała, ponieważ <code
                class="command">dpkg</code> uważa usunięcia za formę zasadnej modyfikacji, zatem nie zainstaluje pożądanego pliku konfiguracyjnego.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Poprzedni</strong>Rozdział 5. System Pakowania: Fundamentalne zasad...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Początek rozdziału</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Spis treści</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Następny</strong>5.3. Struktura Pakietu Źródłowego</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.package-meta-information.html">ar-MA</a></li><li><a
              href="../da-DK/sect.package-meta-information.html">da-DK</a></li><li><a
              href="../de-DE/sect.package-meta-information.html">de-DE</a></li><li><a
              href="../el-GR/sect.package-meta-information.html">el-GR</a></li><li><a
              href="../en-US/sect.package-meta-information.html">en-US</a></li><li><a
              href="../es-ES/sect.package-meta-information.html">es-ES</a></li><li><a
              href="../fa-IR/sect.package-meta-information.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.package-meta-information.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.package-meta-information.html">hr-HR</a></li><li><a
              href="../id-ID/sect.package-meta-information.html">id-ID</a></li><li><a
              href="../it-IT/sect.package-meta-information.html">it-IT</a></li><li><a
              href="../ja-JP/sect.package-meta-information.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.package-meta-information.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.package-meta-information.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.package-meta-information.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.package-meta-information.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.package-meta-information.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.package-meta-information.html">zh-CN</a></li></ul></div></body></html>
