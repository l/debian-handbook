<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">15.2. Å bygge din første pakke</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Bakdør, Gjenoppbygge, Kildepakke, Arkiv, Meta-pakke, Debian-utvikler, Vedlikeholder" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="debian-packaging.html"
        title="Kapittel 15. Å lage en Debian-pakke" /><link
        rel="prev"
        href="debian-packaging.html"
        title="Kapittel 15. Å lage en Debian-pakke" /><link
        rel="next"
        href="sect.setup-apt-package-repository.html"
        title="15.3. Å lage en pakkebrønn for APT" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/nb-NO/sect.building-first-package.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.building-first-package"></a>15.2. Å bygge din første pakke</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.18.5.2"></a>15.2.1. Meta-pakker eller falsk pakker</h3></div></div></div><div
            class="para">
				Falske pakker og meta-pakker er like ved at de er tomme skall som bare eksisterer for effektene meta-dataene deres har på pakkehåndteringsstabelen.
			</div><div
            class="para">
				Formålet med en falsk pakke er å lure <code
              class="command">dpkg</code> og <code
              class="command">apt</code> til å tro at noen pakker er installert, selv om de bare er et tomt skall. Dette tillater å tilfredsstille avhengigheter i en pakke når den tilsvarende programvaren ble installert utenfor rammen av pakkesystemet. En slik metode fungerer, men bør likevel unngås når det er mulig, ettersom det ikke er noen garanti for at den manuelt installerte programvaren oppfører seg akkurat som den tilsvarende pakken ville ha gjort, og andre pakker som er avhengig av den, ikke vil fungere ordentlig.
			</div><div
            class="para">
				På den annen side, en meta-pakke består oftest som en samling av avhengigheter, slik at montering av meta-pakken faktisk vil føre inn et sett av andre pakker i et enkelt trinn.
			</div><div
            class="para">
				Begge disse pakkesalgene kan lages av kommandoene <code
              class="command">equivs-control</code> og <code
              class="command">equivs-build</code> (i <span
              class="pkg pkg">equivs</span>-pakken). Kommandoene <code
              class="command">equivs-control <em
                class="replaceable">filen</em></code> oppretter en Debian-pakke topptekstfil som skal redigeres for å inneholde navnet på den forventede pakken, dens versjonsnummer, navnet på vedlikeholderen, avhengighetene, og beskrivelsen. Andre felt uten en standardverdi er valgfrie, og kan slettes. Feltene <code
              class="literal">Copyright</code>, <code
              class="literal">Changelog</code>, <code
              class="literal">Readme</code> og <code
              class="literal">Extra-Files</code> er ikke standard felt i Debian-pakker; de bare gir mening innenfor rammen av <code
              class="command">equivs-build</code>, og de vil ikke bli beholdt i overskriftene til den genererte pakken.
			</div><div
            class="example"><a
              id="id-1.18.5.2.6"></a><p
              class="title"><strong>Eksempel 15.2. Topptekstfil for den falske pakken <span
                  class="emphasis"><em>libxml-libxml-perl</em></span></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Section: perl
Priority: optional
Standards-Version: 3.9.6

Package: libxml-libxml-perl
Version: 2.0116-1
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Depends: libxml2 (&gt;= 2.7.4)
Architecture: all
Description: Fake package - module manually installed in site_perl
 This is a fake package to let the packaging system
 believe that this Debian package is installed. 
 .
 In fact, the package is not installed since a newer version
 of the module has been manually compiled &amp; installed in the
 site_perl directory.</pre></div></div><div
            class="para">
				Det neste skrittet er å generere Debian-pakken med kommandoen <code
              class="command">equivs-build <em
                class="replaceable">filen</em></code>. Og plutselig er pakken opprettet i den gjeldende katalogen, og kan håndteres som enhver annen Debian-pakke ville blitt.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.18.5.3"></a>15.2.2. Et enkelt filarkiv</h3></div></div></div><div
            class="para">
				For å lette utplasseringen av et sett med dokumentasjon på et stort antall maskiner, trenger Falcot Corp-administratorene å lage en Debian-pakke. Administratoren med ansvaret for denne oppgaven leser først «Guide for nye Debian vedlikeholder» («New Maintainer's Guide»), og begynner så å jobbe med sin første pakke. <div
              class="url">→ <a
                href="https://www.debian.org/doc/manuals/maint-guide/">https://www.debian.org/doc/manuals/maint-guide/</a></div>
			</div><div
            class="para">
				Det første skrittet er å lage en <code
              class="filename">falcot-data-1.0</code>-mappe som skal inneholde mål-kildepakken. Pakken vil logisk nok få navnet <code
              class="literal">falcot-data</code>, og bære versjonsnummeret <code
              class="literal">1.0</code>. Administratoren plasserer så dokumentasjonsfilene i en <code
              class="filename">data</code>-undermappe. Så påkaller de <code
              class="command">dh_make</code>-kommandoen (fra <span
              class="pkg pkg">dh-make</span>-pakken) for å legge til filene som kreves for pakke-genereringsprosessen - som alle blir lagret i en <code
              class="filename">debian</code>-undermappe:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd falcot-data-1.0</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>dh_make --native</code></strong>
<code
              class="computeroutput">
Type of package: single binary, indep binary, multiple binary, library, kernel module, kernel patch?
 [s/i/m/l/k/n] </code><strong
              class="userinput"><code>i</code></strong>
<code
              class="computeroutput">
Maintainer name : Raphael Hertzog
Email-Address   : hertzog@debian.org
Date            : Fri, 04 Sep 2015 12:09:39 -0400
Package Name    : falcot-data
Version         : 1.0
License         : gpl3
Type of Package : Independent
Hit &lt;enter&gt; to confirm:
Currently there is no top level Makefile. This may require additional tuning.
Done. Please edit the files in the debian/ subdirectory now. You should also
check that the falcot-data Makefiles install into $DESTDIR and not in / .
$</code></pre><div
            class="para">
				Den valgte pakketypen (<span
              class="emphasis"><em>enkelt binære (indep binary)</em></span>) indikerer at denne kildepakken vil generere en enkelt binærpakke som kan deles på tvers av alle arkitekturer (<code
              class="literal">Architecture: all</code>). <span
              class="emphasis"><em>enkelt binære</em></span> virker som en motpart, og fører til en enkelt binærpakke som er avhengig av målarkitekturen (<code
              class="literal">Architecture: any</code>). I dette tilfellet er valget mer relevant, siden pakken bare inneholder dokumentasjon, og ingen binære programmer, slik at den kan brukes på samme måten på datamaskiner av alle arkitekturer.
			</div><a
            id="id-1.18.5.3.6"
            class="indexterm"></a><a
            id="id-1.18.5.3.7"
            class="indexterm"></a><div
            class="para">
				<span
              class="emphasis"><em>multippel binær</em></span>-typen svarer til en kildekodepakke som leder til forskjellige binærpakker. Et spesielt tilfelle, <span
              class="emphasis"><em>bibliotek</em></span>, er nyttig for delte biblioteker, siden de må følge strenge pakkeregler. På lignende måte skal <span
              class="emphasis"><em>kernel module</em></span>, eller <span
              class="emphasis"><em>kernel patch</em></span> begrenses til pakker som inneholder kjernemoduler.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPS</em></span> Vedlikeholders navn og e-post</strong></p></div></div></div><div
              class="para">
				De fleste programmene involvert i pakkevedlikeholdet vil søke etter ditt navn og e-postadresse i <code
                class="varname">DEBFULLNAME</code> og <code
                class="varname">DEBEMAIL</code>, eller <code
                class="varname">EMAIL</code>-miljøvariabler. Ved å definere dem en gang for alle, vil du unngå å måtte sortere dem flere ganger. Hvis ditt vanlige skall er <code
                class="command">bash</code>, er det bare å legge til følgende to linjer i din <code
                class="filename">~/.bashrc</code>-file (du vil ganske sikkert erstatte verdiene med noen mer relevante!):
			</div><pre
              class="programlisting">
export EMAIL="hertzog@debian.org"
export DEBFULLNAME="Raphael Hertzog"</pre></div><div
            class="para">
				Kommandoen <code
              class="command">dh_make</code> laget en <code
              class="filename">debian</code>-undermappe med mange filer. Noen kreves, spesielt <code
              class="filename">rules</code>, <code
              class="filename">control</code>, <code
              class="filename">changelog</code> og <code
              class="filename">copyright</code>. Filer med <code
              class="filename">.ex</code>-forlengelsen er eksempelfiler som kan brukes ved å modifisere dem (og fjerne forlengelsen) når det passer. Når de ikke er nødvendige, anbefales det å fjerne dem. <code
              class="filename">compat</code> bør beholdes, ettersom den er nødvendig for riktig funksjon av <span
              class="emphasis"><em>debhelper</em></span>-programpakken (som alle begynner med <code
              class="command">dh_</code>-forstavelsen), og som brukes på ulike stadier i pakkebyggingsprosessen.
			</div><div
            class="para">
				<code
              class="filename">copyright</code> må inneholde informasjon om forfatterne av dokumentasjonen som er inkludert i pakken, og den tilhørende lisensen. I vårt tilfelle er intern dokumentasjon og bruken av den begrenset til til Falcot Corp-selskapet. Standardfilen <code
              class="filename">changelog</code> er vanligvis hensiktsmessig; den erstatter «Første utgivelse» med en mer detaljert forklaring, og endre disgtribusjonen fra <code
              class="literal">unstable</code> til <code
              class="literal">internal</code> er nok. <code
              class="filename">control</code>-filen ble også oppdatert: <code
              class="literal">Section</code>-feltet er forandret til <span
              class="emphasis"><em>misc</em></span>, og <code
              class="literal">Homepage</code>, <code
              class="literal">Vcs-Git</code> og <code
              class="literal">Vcs-Browser</code>-feltene ble forandret. <code
              class="literal">Depends</code>-feltene ble komplettert med <code
              class="literal">iceweasel | www-browser</code> for å sikre tilgjengeligheten for en pålitelig nettleser som kan vise dokumentasjonen i pakken.
			</div><div
            class="example"><a
              id="id-1.18.5.3.12"></a><p
              class="title"><strong>Eksempel 15.3. <code
                  class="filename">control</code>-filen</strong></p><div
              class="example-contents"><pre
                class="programlisting">
Source: falcot-data
Section: misc
Priority: optional
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Build-Depends: debhelper (&gt;= 9)
Standards-Version: 3.9.5

Package: "falcot-data
Architecture: all
Depends: iceweasel | www-browser, ${misc:Depends}
Description: Internal Falcot Corp Documentation
 This package provides several documents describing the internal
 structure at Falcot Corp.  This includes:
  - organization diagram
  - contacts for each department.
 .
 These documents MUST NOT leave the company.
 Their use is INTERNAL ONLY.</pre></div></div><div
            class="example"><a
              id="id-1.18.5.3.13"></a><p
              class="title"><strong>Eksempel 15.4. <code
                  class="filename">changelog</code>-filen</strong></p><div
              class="example-contents"><pre
                class="programlisting">
falcot-data (1.0) internal; urgency=low

  * Initial Release.
  * Let's start with few documents:
    - internal company structure;
    - contacts for each department.

 -- Raphael Hertzog &lt;hertzog@debian.org&gt;  Fri, 04 Sep 2015 12:09:39 -0400</pre></div></div><div
            class="example"><a
              id="id-1.18.5.3.14"></a><p
              class="title"><strong>Eksempel 15.5. <code
                  class="filename">copyright</code>-filen</strong></p><div
              class="example-contents"><pre
                class="programlisting">
Format: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
Upstream-Name: falcot-data

Files: *
Copyright: 2004-2015 Falcot Corp
License: 
 All rights reserved.</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DET GRUNNLEGGENDE</em></span> <code
                        class="filename">Makefile</code>-fil</strong></p></div></div></div><a
              id="id-1.18.5.3.15.2"
              class="indexterm"></a><div
              class="para">
				<code
                class="filename">Makefile</code>-filen er et skript som brukes av <code
                class="command">make</code>-programmet: Det beskriver regler for hvordan man skal bygge et sett med filer fra hverandre i et tre med avhengigheter (for eksempel kan et program bygges fra et sett med kildefiler). <code
                class="filename">Makefile</code>-filen beskriver disse reglene i det følgende formatet:
			</div><pre
              class="programlisting">
target: source1 source2 ...
        command1
        command2</pre><div
              class="para">
				Tolkningen av slik regel er som følger: Hvis en av <code
                class="literal">source*</code>-filene er nyere enn <code
                class="literal">target</code>-filen, trenger målet generering ved å bruke <code
                class="command">command1</code> og <code
                class="command">command2</code>.
			</div><div
              class="para">
				Merk at kommandolinjene må starte med et TAB-tegn; Merk også at når en kommandolinje starter med en skråstrek (<code
                class="literal">-</code>), avbryter ikke feil i kommandoen hele prosessen.
			</div></div><div
            class="para">
				Filen <code
              class="filename">rules</code> inneholder vanligvis et sett med regler til å konfigurere, bygge og installere programvaren i en egen underkatalog (oppkalt etter den genererte binære pakken). Innholdet i denne underkatalogen blir deretter arkivert i Debian-pakken som om det var roten i filsystemet. I vårt tilfelle vil filene bli installert i <code
              class="filename">debian/falcot-data/usr/share/falcot-data/</code>-undermappe, slik at å installere den genererte pakken, vil plassere filene under <code
              class="filename">/usr/share/falcot-data/</code>. Filen <code
              class="filename">rules</code> blir brukt som en <code
              class="filename">Makefile</code>, med noen få standard mål (medregnet <code
              class="literal">clean</code> og <code
              class="literal">binary</code>, respektivt brukt til å rydde opp i kildemappen og generere binærpakken).
			</div><div
            class="para">
				Selv om denne filen er hjertet av prosessen, inneholder den i økende grad bare et minimum for å kjøre et standard sett med kommandoer gitt av <code
              class="command">debhelper</code>-verktøyet. Slik er tilfellet for filer generert av <code
              class="command">dh_make</code>. For å installere våre filer må vi ganske enkelt sette opp atferden til <code
              class="command">dh_install</code>-kommandoen ved å lage den følgende <code
              class="filename">debian/falcot-data.install</code>-filen:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/</pre><div
            class="para">
				På dette tidspunktet kan pakken opprettes. Vi vil imidlertid legge til et malingstrøk. Siden administratorene ønsker at dokumentasjonen blir lett tilgjengelig fra menyene i grafiske skrivebordsmiljøer, legger vi til en <code
              class="filename">falcot-data.desktop</code>-file og får den installert i <code
              class="filename">/usr/share/applications</code> ved å legger til en andre linje til <code
              class="filename">debian/falcot-data.install</code>.
			</div><div
            class="example"><a
              id="id-1.18.5.3.20"></a><p
              class="title"><strong>Eksempel 15.6. Filen <code
                  class="filename">falcot-data.desktop</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
[Desktop Entry]
Name=Internal Falcot Corp Documentation
Comment=Starts a browser to read the documentation
Exec=x-www-browser /usr/share/falcot-data/index.html
Terminal=false
Type=Application
Categories=Documentation;</pre></div></div><div
            class="para">
				Den oppdaterte <code
              class="filename">debian/falcot-data.install</code> ser slik ut:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/
falcot-data.desktop usr/share/applications/</pre><div
            class="para">
				Vår kildepakke er nå klar. Alt som gjenstår å gjøre er å generere den binære pakken med den samme metoden vi brukte tidligere for å bygge om pakker: vi kjører <code
              class="command">dpkg-buildpackage -us -uc</code>-kommandoen fra <code
              class="filename">falcot-data-1.0</code>-mappen.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Forrige</strong>Kapittel 15. Å lage en Debian-pakke</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Neste</strong>15.3. Å lage en pakkebrønn for APT</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.building-first-package.html">ar-MA</a></li><li><a
              href="../da-DK/sect.building-first-package.html">da-DK</a></li><li><a
              href="../de-DE/sect.building-first-package.html">de-DE</a></li><li><a
              href="../el-GR/sect.building-first-package.html">el-GR</a></li><li><a
              href="../en-US/sect.building-first-package.html">en-US</a></li><li><a
              href="../es-ES/sect.building-first-package.html">es-ES</a></li><li><a
              href="../fa-IR/sect.building-first-package.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.building-first-package.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.building-first-package.html">hr-HR</a></li><li><a
              href="../id-ID/sect.building-first-package.html">id-ID</a></li><li><a
              href="../it-IT/sect.building-first-package.html">it-IT</a></li><li><a
              href="../ja-JP/sect.building-first-package.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.building-first-package.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.building-first-package.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.building-first-package.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.building-first-package.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.building-first-package.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.building-first-package.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.building-first-package.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.building-first-package.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.building-first-package.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.building-first-package.html">zh-TW</a></li></ul></div></body></html>
