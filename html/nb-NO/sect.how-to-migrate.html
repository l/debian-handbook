<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">3.2. Hvordan migrere</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Gjeldende oppsett, Gjenbruk, Overflytting" /><link
        rel="home"
        href="index.html"
        title="Debian-administratorens håndbok" /><link
        rel="up"
        href="existing-setup.html"
        title="Kapittel 3. Å analysere gjeldende oppsett og migrering" /><link
        rel="prev"
        href="existing-setup.html"
        title="Kapittel 3. Å analysere gjeldende oppsett og migrering" /><link
        rel="next"
        href="installation.html"
        title="Kapittel 4. Installasjon" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/nb-NO/sect.how-to-migrate.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Forrige</strong></a></li><li
          class="home">Debian-administratorens håndbok</li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.how-to-migrate"></a>3.2. Hvordan migrere</h2></div></div></div><a
          id="id-1.6.5.2"
          class="indexterm"></a><div
          class="para">
			For å sikre kontinuitet i tjenestene må hver datamaskin-migrasjon planlegges og gjennomføres etter planen. Dette prinsippet gjelder uansett hvilket operativsystem som brukes.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.6.5.4"></a>3.2.1. Kartlegge og identifisere tjenester</h3></div></div></div><div
            class="para">
				Selv om det ser enkelt ut, er dette trinnet helt nødvendig. En seriøs administrator kjenner virkelig de viktigste oppgavene til hver server, men slike roller kan endre seg, og noen ganger kan erfarne brukere ha installert "ville" tjenester. Å vite at de eksisterer i det minste vil tillate deg å bestemme hva du skal gjøre med dem, heller enn å slette dem måfå.
			</div><div
            class="para">
				For dette formålet, er det fornuftig å informere brukerne av prosjektet før tjeneren migreres. For å involvere dem i prosjektet, kan det være nyttig å installere de vanligste gratisprogrammene på sine datamaskiner før migrasjonen, som de vil møte igjen etter overgangen til Debian; LibreOffice og Firefox er de beste eksemplene her.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.6.5.4.4"></a>3.2.1.1. Nettverk og prosesser</h4></div></div></div><a
              id="id-1.6.5.4.4.2"
              class="indexterm"></a><div
              class="para">
					<code
                class="command">nmap</code>-verktøyet (i pakken med samme navn) vil raskt identifisere internettjenester i en nettverkstilkoblet maskin uten engang å kreve innlogging. Bare bruk følgende kommando på en annen maskin koblet til samme nettverk:
				</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>nmap mirwiz</code></strong>
<code
                class="computeroutput">Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-24 11:34 CET
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.0037s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIV</em></span> Bruk <code
                          class="command">netstat</code> for å finne listen med tilgjengelige tjenester</strong></p></div></div></div><div
                class="para">
					På en Linux maskin vil <code
                  class="command">netstat -tupan</code>-kommandoen vise listen over aktive eller TCP sesjoner som venter, samt UDP-porter som kjørende programmer er knyttet opp til. Dette muliggjør å identifisere tjenestene som tilbys på nettet.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> IPv6</strong></p></div></div></div><div
                class="para">
					Noen nettverkkommanoer vil virke enten med IPv4 (vanligvis forvalgt) eller med IPv6. Disse innkluderer <code
                  class="command">nmap</code> og <code
                  class="command">netstat</code> kommanoer, men også andre, som <code
                  class="command">route</code> eller <code
                  class="command">ip</code>. Det normale er at dette muliggjøres ved å velge kommandolinjen <em
                  class="parameter"><code>-6</code></em>.
				</div></div><div
              class="para">
					Hvis serveren er en Unix-maskin med skallkontoer til brukere, er det interessant å finne ut om prosessene utføres i bakgrunnen i eierens fravær. Kommandoen <code
                class="command">ps auxw</code> viser en liste med alle prosesser med sin brukeridentitet. Ved å sjekke denne informasjonen opp mot resultatet av <code
                class="command">who</code>-kommandoen, som gir en liste over innloggede brukere, er det mulig å identifisere problematiske eller ikke synlige tjenere eller programmer som kjører i bakgrunnen. Å se på <code
                class="filename">crontabs</code> (tabeller som automatisk lister handlinger satt opp av brukere) vil ofte gi interessant informasjon om oppgaver tjeneren har utført (en full forklaring av <code
                class="command">cron</code> er tilgjengelig på <a
                class="xref"
                href="sect.task-scheduling-cron-atd.html">Seksjon 9.7, «Scheduling Tasks with <code
                  class="command">cron</code> and <code
                  class="command">atd</code>»</a>).
				</div><div
              class="para">
					Uansett er det viktig å ta backup av dine tjenere: Det tillater gjenoppretting av informasjon i ettertid, når brukere rapporterer spesifikke problemer som følge av migrasjonen.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.6.5.5"></a>3.2.2. Backup av konfigureringen</h3></div></div></div><div
            class="para">
				Det er lurt å beholde konfigurasjonen til hver identifiserte tjeneste for å kunne installere den tilsvarende på den oppdaterte tjeneren. Minstekravet er å lage en sikkerhetskopi av konfigurasjonsfilene .
			</div><div
            class="para">
				For Unix maskiner, er konfigurasjonsfilene vanligvis funnet i <code
              class="filename">/etc/</code>, men de kan befinne seg i en underkatalog av <code
              class="filename">/usr/local/</code>. Dette er tilfellet dersom et program har blitt installert fra kilden, heller enn som en pakke. I noen tilfeller kan man også finne dem under <code
              class="filename">/opt/</code>.
			</div><div
            class="para">
				For administrative datatjenester (for eksempel databaser), er det sterkt anbefalt å eksportere dataene til et standard format som vil være lett for den nye programvaren å importere. Et slikt format er vanligvis i tekstmodus og dokumentert; det kan for eksempel være en SQL utskift av en database, eller en LDIF fil for en LDAP-tjener.
			</div><div
            class="figure"><a
              id="id-1.6.5.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-2.png"
                  alt="Databasebackup" /></div></div><p
              class="title"><strong>Figur 3.2. Databasebackup</strong></p></div><div
            class="para">
				Hver tjener programvare er forskjellig, og det er umulig å beskrive alle eksisterende tilfeller i detalj. Sammenlign dokumentasjon for den eksisterende og den nye programvaren for å identifisere hvilke deler som kan eksporteres (og dermed re-importeres) og de som vil kreve manuell håndtering. Å leser denne boken vil avklare konfigureringen av de viktigste Linux-tjenerprogrammene.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.6.5.6"></a>3.2.3. Å overta en eksisterende Debian-tjener</h3></div></div></div><a
            id="id-1.6.5.6.2"
            class="indexterm"></a><a
            id="id-1.6.5.6.3"
            class="indexterm"></a><a
            id="id-1.6.5.6.4"
            class="indexterm"></a><div
            class="para">
				For effektivt å ta over vedlikeholdet av maskinen, kan man analysere en maskin som allerede kjører med Debian.
			</div><div
            class="para">
				Den første filen for sjekking er <code
              class="filename">/etc/debian_version</code>, som vanligvis inneholder versjonsnummeret for det installerte Debian-systemet (det er en del av <span
              class="emphasis"><em>base-files</em></span> pakken). Hvis det indikerer <code
              class="literal"><em
                class="replaceable">codename</em>/sid</code>, betyr det at systemet ble oppdatert med pakker som kommer fra en av utviklingsistribusjoner (enten testing eller ustabile).
			</div><div
            class="para">
				<code
              class="command">apt-show-versions</code> programmet (fra Debian pakken med samme navn) sjekker listen over installerte pakker og identifiserer de tilgjengelige versjonene.<code
              class="command">aptitude</code> kan også brukes til disse oppgavene, om enn på en mindre systematisk måte.
			</div><div
            class="para">
				Et blikk på <code
              class="filename">/etc/apt/sources.list</code>-filen (og <code
              class="filename">/etc/apt/sources.list.d/</code>-katalogen) viser hvor de installerte Debian-pakker sannsynligvis kommer fra. Hvis mange ukjente kilder vises, kan administratoren velge å fullstendig reinstallere maskinens system for å sikre optimal kompatibilitet med programvaren levert av Debian.
			</div><div
            class="para">
				<code
              class="filename">sources.list</code> filen er ofte en god indikator: flertallet av administratorene beholder, iallefall i kommentarene, listen over APT-kilder som tidligere ble brukt. Men du bør ikke glemme at tidligere brukte kilder kan ha blitt slettet, og at noen tilfeldige pakker tatt fra Internettet kan ha blitt installert manuelt (med <code
              class="command">dpkg</code>-kommandoen). I dette tilfelle er maskinen misvisende som en "standard" Debian. Dette er grunnen til at du bør være oppmerksom på enhver indikasjon som vil avdekke tilstedeværelsen av eksterne pakker (forekomsten av <code
              class="filename">deb</code> filer i uvanlige kataloger, pakkeversjon-numre med en spesiell endelse som indikerer at de stammer fra kilder utenfor Debian prosjektet, som for eksempel <code
              class="literal">ubuntu</code> eller <code
              class="literal">lmde</code>, etc.)
			</div><div
            class="para">
				På samme måte er det interessant å analysere innholdet av <code
              class="filename">/usr/local/</code>-katalogen, hvis formål er å inneholde programmer kompilert og installert manuelt. Listing av programvare installert på denne måten er instruktivt, siden dette reiser spørsmål om grunnene til ikke å bruke den tilsvarende Debian-pakken, hvis en slik pakke eksisterer.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>RASK TITT</em></span> <span
                        class="pkg pkg">cruft</span></strong></p></div></div></div><div
              class="para">
				Den <span
                class="pkg pkg">cruft</span> utdaterte pakken foreslår å liste tilgjengelige filer som ikke hører hjemme i noen pakke. Den har noen filtre (mer eller mindre effektive, og mer eller mindre oppdatert) for å unngå rapportering av noen legitime filer (filer generert av Debian-pakker, eller genererte konfigurasjonsfiler ikke styrt av <code
                class="command">dpkg</code>, etc.).
			</div><div
              class="para">
				Vær forsiktig å ikke blindt slette at som <code
                class="command">cruft</code> måtte liste!
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.6.5.7"></a>3.2.4. Å installere Debian</h3></div></div></div><div
            class="para">
				Når all nødvendig informasjon om den aktuelle tjeneren er kjent, kan vi slå den av og starte installasjonen av Debian på den.
			</div><a
            id="id-1.6.5.7.3"
            class="indexterm"></a><div
            class="para">
				For å velge den riktige versjonen, må vi kjenne datamaskinens arkitektur. Hvis den er en rimelig fersk PC, er den mest sannsynlig en amd64 (eldre PCer er vanligvis i386). I andre tilfelle, kan vi avgrense mulighetene ut fra det systemet som ble brukt tidligere.
			</div><div
            class="para">
				<a
              class="xref"
              href="sect.how-to-migrate.html#tab-corresp">Tabell 3.1</a> er ikke ment å være uttømmende, men kan være nyttig. I alle fall er den opprinnelige dokumentasjonen for datamaskinen den mest pålitelige kilden for å finne denne informasjonen.
			</div><div
            class="table"><a
              id="tab-corresp"></a><p
              class="title"><strong>Tabell 3.1. Samsvarende operativsystem og arkitektur</strong></p><div
              class="table-contents"><table
                xmlns:d="http://docbook.org/ns/docbook"
                class="lt-4-cols gt-7-rows"
                summary="Samsvarende operativsystem og arkitektur"><colgroup><col /><col /></colgroup><thead><tr><th>Operativsystem</th><th>Arkitektur(er)</th></tr></thead><tbody><tr><td>DEC Unix (OSF/1)</td><td>alpha, mipsel</td></tr><tr><td>HP Unix</td><td>ia64, hppa</td></tr><tr><td>IBM AIX</td><td>powerpc</td></tr><tr><td>Irix</td><td>mips</td></tr><tr><td>OS X</td><td>amd64, powerpc, i386</td></tr><tr><td>z/OS, MVS</td><td>s390x, s390</td></tr><tr><td>Solaris, SunOS</td><td>sparc, i386, m68k</td></tr><tr><td>Ultrix</td><td>mips</td></tr><tr><td>VMS</td><td>alpha</td></tr><tr><td>Windows 95/98/ME</td><td>i386</td></tr><tr><td>Windows NT/2000</td><td>i386, alpha, ia64, mipsel</td></tr><tr><td>Windows XP / Windows Server 2008</td><td>i386, amd64, ia64</td></tr><tr><td>Windows Vista / Windows 7 / Windows 8</td><td>i386, amd64</td></tr></tbody></table></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>MASKINVARE</em></span> 64 bit PC vs 32 bit PC</strong></p></div></div></div><a
              id="id-1.6.5.7.7.2"
              class="indexterm"></a><a
              id="id-1.6.5.7.7.3"
              class="indexterm"></a><div
              class="para">
				De fleste nye datamaskiner har 64 bit Intel eller AMD-prosessorer, som er kompatible med eldre 32 bits prosessorer; derfor fungerer programvare kompilert for "i386" arkitektur. På den annen side, dette kompatibilitetsmodus utnytter ikke fullt ut egenskapene til disse nye prosessorene. Dette er grunnen til Debian leverer "amd64"-arkitekturen, som kjører på AMD-brikker så vel som Intel "em64t"-prosessorer (inkludert de fleste i Core-serien), som er svært lik AMD64.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.6.5.8"></a>3.2.5. Installere og konfigurere de valgte tjenestene</h3></div></div></div><div
            class="para">
				Når Debian er installert, må vi installere og konfigurere en etter en av alle de tjenestene som denne datamaskinen må ha. Den nye konfigurasjonen må ta hensyn til den foregående for å sikre en myk overgang. All informasjonen som samles inn i de to første trinnene vil være nyttig for å fullføre denne delen.
			</div><div
            class="figure"><a
              id="id-1.6.5.8.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-4.png"
                  alt="Å installere de valgte tjenestene" /></div></div><p
              class="title"><strong>Figur 3.3. Å installere de valgte tjenestene</strong></p></div><div
            class="para">
				Før du jumper inn i denne øvelsen med begge føttene, er det sterkt anbefalt at du leser resten av denne boken. Etter det du vil ha en mer presis forståelse av hvordan du konfigurerer de forventede tjenestene.
			</div><div
            class="para">
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Forrige</strong>Kapittel 3. Å analysere gjeldende oppsett og migr...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Neste</strong>Kapittel 4. Installasjon</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.how-to-migrate.html">ar-MA</a></li><li><a
              href="../da-DK/sect.how-to-migrate.html">da-DK</a></li><li><a
              href="../de-DE/sect.how-to-migrate.html">de-DE</a></li><li><a
              href="../el-GR/sect.how-to-migrate.html">el-GR</a></li><li><a
              href="../en-US/sect.how-to-migrate.html">en-US</a></li><li><a
              href="../es-ES/sect.how-to-migrate.html">es-ES</a></li><li><a
              href="../fa-IR/sect.how-to-migrate.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.how-to-migrate.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.how-to-migrate.html">hr-HR</a></li><li><a
              href="../id-ID/sect.how-to-migrate.html">id-ID</a></li><li><a
              href="../it-IT/sect.how-to-migrate.html">it-IT</a></li><li><a
              href="../ja-JP/sect.how-to-migrate.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.how-to-migrate.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.how-to-migrate.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.how-to-migrate.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.how-to-migrate.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.how-to-migrate.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.how-to-migrate.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.how-to-migrate.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.how-to-migrate.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.how-to-migrate.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.how-to-migrate.html">zh-TW</a></li></ul></div></body></html>
