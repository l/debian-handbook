<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Глава 5. Пакетная система: Инструменты и основные принципы</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Двоичный пакет, Пакет исходных кодов, dpkg, зависимости, конфликт" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="prev"
        href="sect.after-first-boot.html"
        title="4.3. After the First Boot" /><link
        rel="next"
        href="sect.package-meta-information.html"
        title="5.2. Метаинформация пакета" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ru-RU/packaging-system.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>След.</strong></a></li></ul><div
        xml:lang="ru-RU"
        class="chapter"
        lang="ru-RU"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  id="packaging-system"></a>Глава 5. Пакетная система: Инструменты и основные принципы</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="packaging-system.html#sect.binary-package-structure">5.1. Структура двоичных пакетов</a></span></dt><dt><span
                class="section"><a
                  href="sect.package-meta-information.html">5.2. Метаинформация пакета</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.control">5.2.1. Описание: файл <code
                        class="filename">control</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#idm139917857158640">5.2.2. Сценарии настройки</a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.conffiles">5.2.3. Контрольные суммы, список конфигурационных файлов</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.source-package-structure.html">5.3. Структура исходного пакета</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#idm139917856936672">5.3.1. Формат</a></span></dt><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#idm139917856879792">5.3.2. Использование в Debian</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.manipulating-packages-with-dpkg.html">5.4. Работа с пакетами при помощи <code
                    class="command">dpkg</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm139917856866016">5.4.1. Установка пакетов</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm139917856826912">5.4.2. Удаление пакета</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm139917856813344">5.4.3. Запросы к базе данных <code
                        class="command">dpkg</code> и анализ файлов <code
                        class="filename">.deb</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm139917856762240">5.4.4. Файл журнала <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#sect.multi-arch">5.4.5. Поддержка мультиархитектуры</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.coexistence-with-other-packaging-systems.html">5.5. Сосуществование с другими пакетными системами</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Как системному администратору Debian, вам постоянно придется работать спакетами <code
              class="filename">.deb</code>, которые содержат, к примеру, программы или документацию, установку и сопровождение которых они облегчают. Поэтому неплохо было бы знать, что они из себя представляют, и как с ними работать.
	</div></div><div
          class="para">
		В этой главе описывается структура и содержание «двоичных» и «исходных» пакетов. Первые являются файлами <code
            class="filename">.deb</code>, которые можно использовать непосредственно с помощью <code
            class="command">dpkg</code>, в то время как последние содержат исходный код программ, а также инструкции для сборки двоичных пакетов.
	</div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    id="sect.binary-package-structure"></a>5.1. Структура двоичных пакетов</h2></div></div></div><a
            id="idm139917870962448"
            class="indexterm"></a><a
            id="idm139917860318384"
            class="indexterm"></a><div
            class="para">
			Формат пакета Debian устроен таким образом, что его содержимое может быть извлеченно в любой Unix-системе, где есть такие команды как <code
              class="command">ar</code>, <code
              class="command">tar</code> и <code
              class="command">gzip</code> (иногда также <code
              class="command">xz</code> или <code
              class="command">bzip2</code>). Это, казалось бы, простое свойство пакета важно для переносимости и аварийного восстановления.
		</div><div
            class="para">
			Imagine, for example, that you mistakenly deleted the <code
              class="command">dpkg</code> program, and that you could thus no longer install Debian packages. <code
              class="command">dpkg</code> being a Debian package itself, it would seem your system would be done for... Fortunately, you know the format of a package and can therefore download the <code
              class="filename">.deb</code> file of the <span
              class="pkg pkg">dpkg</span> package and install it manually (see sidebar <a
              class="xref"
              href="packaging-system.html#sidebar.dpkg-apt-ar"><span
                class="emphasis"><em>ИНСТРУМЕНТЫ</em></span> <code
                class="command">dpkg</code>, <code
                class="command">APT</code> и <code
                class="command">ar</code></a>). If by some misfortune one or more of the programs <code
              class="command">ar</code>, <code
              class="command">tar</code> or <code
              class="command">gzip</code>/<code
              class="command">xz</code>/<code
              class="command">bzip2</code> have disappeared, you will only need to copy the missing program from another system (since each of these operates in a completely autonomous manner, without dependencies, a simple copy will suffice). If your system suffered some even more outrageous fortune, and even these don't work (maybe the deepest system libraries are missing?), you should try the static version of <code
              class="command">busybox</code>, which is even more self-contained, and provides subcommands such as <code
              class="command">busybox ar</code>, <code
              class="command">busybox tar</code> and <code
              class="command">busybox gunzip</code>.
		</div><div
            class="sidebar"><a
              id="sidebar.dpkg-apt-ar"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ИНСТРУМЕНТЫ</em></span> <code
                        class="command">dpkg</code>, <code
                        class="command">APT</code> и <code
                        class="command">ar</code></strong></p></div></div></div><a
              id="idm139917870924096"
              class="indexterm"></a><a
              id="idm139917870922976"
              class="indexterm"></a><a
              id="idm139917870921856"
              class="indexterm"></a><div
              class="para">
			<code
                class="command">dpkg</code> — программа для распаковки, анализа и установки файлов <code
                class="filename">.deb</code>.
		</div><div
              class="para">
			<code
                class="command">APT</code> предствляет собой группу программ, которые позволяют выполнять высокоуровневые модификации в системе: установку или удаление пакета (сохраняя зависимости удовлетворёнными), обновление системы, отбражение списка дотупных пакетов и т. д.
		</div><div
              class="para">
			<a
                id="idm139917860447488"
                class="indexterm"></a> Что касается программы <code
                class="command">ar</code>, она работает с файлами формата с тем же названием: <code
                class="command">ar t <em
                  class="replaceable">архив</em></code> покажет список файлов, содержавшихся в архиве, <code
                class="command">ar x <em
                  class="replaceable">архив</em></code> извлекает файлы из архива в текущий каталог, <code
                class="command">ar d <em
                  class="replaceable">архив</em> <em
                  class="replaceable">файл</em></code> удаляет файл из архива и т. д. На её странице man (<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>) можно найти более подробную документацию. <code
                class="command">ar</code> — это рудиментарный инструмент, который редко применяется администраторами Unix. Как правило, они используют <code
                class="command">tar</code> — более развитую программу управления архивами и файлами. Это и является причиной того, почему так легко можно восстановить <code
                class="command">dpkg</code> в случае ошибочного удаления. Вам нужно только загрузить пакет Debian и извлечь его содержимое из архива <code
                class="filename">data.tar.gz</code> в корень системы (<code
                class="filename">/</code>):
		</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>tar -C / -p -xzf data.tar.gz</code></strong></pre></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>К ОСНОВАМ</em></span> Обозначения страниц man</strong></p></div></div></div><div
              class="para">
			Начинающих могут привести в замешательство ссылки на «<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>» в литературе. Это общепринятое обозначения страницы man под названием <code
                class="literal">ar</code> в разделе 1.
		</div><div
              class="para">
			Иногда это обозначение используется также для устранения двусмысленности, например для выбора между командой <code
                class="command">printf</code>, также обозначаемой <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(1)</span>, и функцией <code
                class="function">printf</code> в языке программирования C, на которую ссылаются как <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(3)</span>.
		</div><div
              class="para">
			В <a
                class="xref"
                href="solving-problems.html">Глава 7, <em>Решение проблем и поиск необходимой информации</em></a> о страницах руководства рассказывается более подробно (см. <a
                class="xref"
                href="solving-problems.html#sect.manual-pages">Раздел 7.1.1, «Страницы руководств»</a>).
		</div></div><div
            class="para">
			Обратите внимание на содержимое файла <code
              class="filename">.deb</code>:
		</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ar t dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">debian-binary
control.tar.gz
data.tar.gz
$ </code><strong
              class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ls</code></strong>
<code
              class="computeroutput">control.tar.gz  data.tar.gz  debian-binary  dpkg_1.16.10_i386.deb
$ </code><strong
              class="userinput"><code>tar tzf data.tar.gz | head -n 15</code></strong>
<code
              class="computeroutput">./
./var/
./var/lib/
./var/lib/dpkg/
./var/lib/dpkg/parts/
./var/lib/dpkg/info/
./var/lib/dpkg/alternatives/
./var/lib/dpkg/updates/
./etc/
./etc/logrotate.d/
./etc/logrotate.d/dpkg
./etc/dpkg/
./etc/dpkg/dpkg.cfg.d/
./etc/dpkg/dpkg.cfg
./etc/alternatives/
$ </code><strong
              class="userinput"><code>tar tzf control.tar.gz</code></strong>
<code
              class="computeroutput">./
./conffiles
./postinst
./md5sums
./prerm
./preinst
./control
./postrm
$ </code><strong
              class="userinput"><code>cat debian-binary</code></strong>
<code
              class="computeroutput">2.0</code></pre><div
            class="para">
			Как вы видите, архив <code
              class="command">ar</code> пакета Debian состоит из трех файлов:
		</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">debian-binary</code>. This is a text file which simply indicates the version of the <code
                    class="filename">.deb</code> file used (in 2015: version 2.0).
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">control.tar.gz</code>. Этот архивный файл содержит всю доступную метаинформацию, например название и версию пакета. Эта метаинформация также позволяет инструментам управления пакетами определить, возможно ли установить или удалить пакет, например в соответствии со списком уже установленных в системе пакетов.
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">data.tar.gz</code>. Этот архив содержит все файлы, которые необходимо извлечь из пакета; то есть в нем хранятся все исполняемые файлы, документация и т. п. Некоторые пакеты могут использовать и другие форматы сжатия, и в таком случае файл будет называться по-другому (<code
                    class="filename">data.tar.bz2</code> для bzip2, <code
                    class="filename">data.tar.xz</code> для XZ, <code
                    class="filename">data.tar.lzma</code> для LZMA).
				</div></li></ul></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Пред.</strong>4.3. After the First Boot</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>След.</strong>5.2. Метаинформация пакета</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/packaging-system.html">ar-MA</a></li><li><a
              href="../da-DK/packaging-system.html">da-DK</a></li><li><a
              href="../de-DE/packaging-system.html">de-DE</a></li><li><a
              href="../el-GR/packaging-system.html">el-GR</a></li><li><a
              href="../en-US/packaging-system.html">en-US</a></li><li><a
              href="../es-ES/packaging-system.html">es-ES</a></li><li><a
              href="../fa-IR/packaging-system.html">fa-IR</a></li><li><a
              href="../fr-FR/packaging-system.html">fr-FR</a></li><li><a
              href="../hr-HR/packaging-system.html">hr-HR</a></li><li><a
              href="../id-ID/packaging-system.html">id-ID</a></li><li><a
              href="../it-IT/packaging-system.html">it-IT</a></li><li><a
              href="../ja-JP/packaging-system.html">ja-JP</a></li><li><a
              href="../pl-PL/packaging-system.html">pl-PL</a></li><li><a
              href="../pt-BR/packaging-system.html">pt-BR</a></li><li><a
              href="../ro-RO/packaging-system.html">ro-RO</a></li><li><a
              href="../ru-RU/packaging-system.html">ru-RU</a></li><li><a
              href="../tr-TR/packaging-system.html">tr-TR</a></li><li><a
              href="../zh-CN/packaging-system.html">zh-CN</a></li></ul></div></body></html>
