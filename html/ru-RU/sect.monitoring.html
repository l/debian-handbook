<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">12.4. Мониторинг</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ru-RU-1.0-1" /><meta
        name="keywords"
        content="RAID, LVM, FAI, Пресидинг, Мониторинг, Виртуализация, Xen, LXC" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="advanced-administration.html"
        title="Глава 12. Углублённое администрирование" /><link
        rel="prev"
        href="sect.automated-installation.html"
        title="12.3. Автоматизированная установка" /><link
        rel="next"
        href="workstation.html"
        title="Глава 13. Workstation" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ru-RU/sect.monitoring.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.automated-installation.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="workstation.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.monitoring"></a>12.4. Мониторинг</h2></div></div></div><div
          class="para">
			Мониторинг — это общее понятие, и разные его аспекты преследуют разные цели: с одной стороны, отслеживание использования машинных ресурсов позволяет предсказать их исчерпание и необходимость их увеличения; с другой стороны, уведомление администратора, когда сервис стал недоступен или работает некорректно, означает, что возникающие проблемы будут устраняться скорее.
		</div><div
          class="para">
			<span
            class="emphasis"><em>Munin</em></span> покрывает первую область, отображая графики истории ряда параметров (используемой ОЗУ, занятого дискового пространства, загрузки процессора, сетевого трафика, нагрузки Apache/MySQL, и т. п.). <span
            class="emphasis"><em>Nagios</em></span> покрывает вторую область, регулярно проверяя, что сервисы работают и доступны, и посылая аварийные уведомления по соответствующим каналам (e-mail, текстовые сообщения и т. п.). Оба построены модульно, что позволяет легко создавать новые плагины для мониторинга специфических параметров и сервисов.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>АЛЬТЕРНАТИВА</em></span> Zabbix, комплексный инструмент мониторинга</strong></p></div></div></div><a
            id="idm139917848773136"
            class="indexterm"></a><div
            class="para">
			Хотя Munin и Nagios используются очень широко, они — не единственные игроки на поле мониторинга, и каждый из них выполняет только половину задачи (отображение графиков с одной стороны, аварийные оповещения с другой). Zabbix же объединяет обе части мониторинга; у него также есть веб-интерфейс для настройки наиболее общих аспектов. Он развивался скачкообразно на протяжении последних нескольких лет и теперь может считаться достойным конкурентом; к сожалению, Zabbix не попал в Debian <span
              class="distribution distribution">Wheezy</span> из-за сроков релиза, но пакеты будут предоставлены как бэкпорты или в неофициальных репозиториях. <div
              class="url">→ <a
                href="http://www.zabbix.org/">http://www.zabbix.org/</a></div>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>АЛЬТЕРНАТИВА</em></span> Icinga, ответвление Nagios</strong></p></div></div></div><a
            id="idm139917848768528"
            class="indexterm"></a><div
            class="para">
			Из-за расхождения во взглядах на модель разработки Nagios (который контролируется компанией) часть разработчиков создала ответвление Nagios под названием Icinga. Icinga остаётся совместимым — по крайней мере пока — с настройками и плагинами Nagios, но добавляет дополнительный функционал. <div
              class="url">→ <a
                href="http://www.icinga.org/">http://www.icinga.org/</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.munin"></a>12.4.1. Настройка Munin</h3></div></div></div><a
            id="idm139917848765104"
            class="indexterm"></a><div
            class="para">
				Назначение Munin — наблюдать за множеством машин, и вполне естественно, что он имеет клиент-серверную архитектуру. Центральный узел — построитель графиков — собирает данные со всех наблюдаемых узлов и создаёт графики истории.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139917848763520"></a>12.4.1.1. Настройка узлов для мониторинга</h4></div></div></div><div
              class="para">
					Первый шаг — установка пакета <span
                class="pkg pkg">munin-node</span>. Демон, устанавливаемый этим пакетом, слушает порт 4949 и отправляет данные, собранные всеми активными плагинами. Каждый плагин представляет собой простую программу, возвращающую описание собранных данных и последнее измеренное значение. Плагины хранятся в <code
                class="filename">/usr/share/munin/plugins/</code>, но на деле используются только те из них, символьные ссылки на которые присутствуют в <code
                class="filename">/etc/munin/plugins/</code>.
				</div><div
              class="para">
					После установки пакета набор активных плагинов определяется в зависимости от доступного программного обеспечение и текущей настройки узла. Однако такая автоматическая настройка должна поддерживаться каждым плагином, и, как правило, бывает неплохо проверить результаты и исправить их вручную. Было бы неплохо иметь полную документацию по каждому плагину, но, к сожалению, официальная документация отсутствует. К счастью, все плагины являются сценариями, и большинство их довольно просты и содержат подробные комментарии. Так что просмотр содержимого <code
                class="filename">/etc/munin/plugins/</code> — хороший способ понять, для чего нужен каждый плагин, и определиться, какие из них следует удалить. Аналогичным образом можно включить интересный плагин, найденный в <code
                class="filename">/usr/share/munin/plugins/</code>, просто создав символьную ссылку на него с помощью <code
                class="command">ln -sf /usr/share/munin/plugins/<em
                  class="replaceable">plugin</em> /etc/munin/plugins/</code>. Заметьте, что когда имя плагина заканчивается символом подчёркивания «_», плагину требуется параметр. Этот параметр должен храниться в имени символьной ссылки; например, плагин «if_» следует включить, создав символьную ссылку <code
                class="filename">if_eth0</code>, тогда он будет отслеживать сетевой трафик на интерфейсе eth0.
				</div><div
              class="para">
					Когда плагины настроены, следует отредактировать конфигурацию демона, описав правила контроля доступа к собранным данным. Для этого служат директивы <code
                class="literal">allow</code> в файле <code
                class="filename">/etc/munin/munin-node.conf</code>. Настройка по умолчанию — <code
                class="literal">allow ^127\.0\.0\.1$</code>, она разрешает доступ только с локального узла. Обычно администратору требуется добавить аналогичную строку, содержащую IP-адрес узла построения графиков, а затем перезапуститьдемон с помощью <code
                class="command">invoke-rc.d munin-node restart</code>.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>УГЛУБЛЯЕМСЯ</em></span> Создание локальных плагинов</strong></p></div></div></div><div
                class="para">
					Несмотря на нехватку официальной документации для стандартных плагинов, Munin содержит подробную документацию о том, как плагины должны себя вести, и как разрабатывать новые плагины. <div
                  class="url">→ <a
                    href="http://munin-monitoring.org/wiki/Documentation">http://munin-monitoring.org/wiki/Documentation</a></div>
				</div><div
                class="para">
					Лучше всего тестировать плагин, запуская его в тех же самых условиях, в которых он будет вызываться munin-node; их можно имитировать, запустив <code
                  class="command">munin-run <em
                    class="replaceable">plugin</em></code> от имени суперпользователя. Возможный второй параметр этой команды (например <code
                  class="literal">config</code>) передаётся как параметр плагину.
				</div><div
                class="para">
					Когда плагин вызывается с параметром <code
                  class="literal">config</code>, он должен описать себя, вернув набор полей:
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo munin-run load config
</code></strong><code
                  class="computeroutput">graph_title Load average
graph_args --base 1000 -l 0
graph_vlabel load
graph_scale no
graph_category system
load.label load
graph_info The load average of the machine describes how many processes are in the run-queue (scheduled to run "immediately").
load.info 5 minute load average
</code></pre><div
                class="para">
					Разные доступные поля описаны в спецификации «протокола конфигурации», доступной на веб-сайте Munin. <div
                  class="url">→ <a
                    href="http://munin-monitoring.org/wiki/protocol-config">http://munin-monitoring.org/wiki/protocol-config</a></div>
				</div><div
                class="para">
					Будучи вызванным без параметра, плагин просто возвращает последние измеренные значения; к примеру, вызов <code
                  class="command">sudo munin-run load</code> может вернуть <code
                  class="literal">load.value 0.12</code>.
				</div><div
                class="para">
					Наконец, когда плагин вызывается с параметром <code
                  class="literal">autoconf</code>, он должен вернуть «yes» (и статус выхода 0) или «no» (и статус выхода 1) в зависимости от того, следует ли включать плагин на этом узле.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139917848742672"></a>12.4.1.2. Настройка построителя графиков</h4></div></div></div><div
              class="para">
					«Построитель графиков» — это просто компьютер, собирающий данные и создающий на их основании графики. Необходимое для него программное обеспечение находится в пакете <span
                class="pkg pkg">munin</span>. Стандартная конфигурация запускает <code
                class="command">munin-cron</code> (раз в 5 минут), который собирает данные со всех узлов, перечисленных в <code
                class="filename">/etc/munin/munin.conf</code> (по умолчанию там указан только локальный узел), сохраняет данные в файлах RRD (<span
                class="emphasis"><em>Round Robin Database</em></span> — формат файлов, разработанный для хранения данных, меняющихся со временем), хранящихся в <code
                class="filename">/var/lib/munin/</code>, и генерирующий HTML-страницу с графиками в <code
                class="filename">/var/cache/munin/www/</code>.
				</div><div
              class="para">
					Итак, все наблюдаемые машины должны быть перечислены в конфигурационном файле <code
                class="filename">/etc/munin/munin.conf</code>. Каждая машина указывается как целая секция с именем, соответствующим машине, и как минимум записью <code
                class="literal">address</code>, содержащей её IP-адрес.
				</div><pre
              class="programlisting">[ftp.falcot.com]
    address 192.168.0.12
    use_node_name yes
</pre><div
              class="para">
					Секции могут быть более сложными и описывать дополнительные графики, которые могут быть созданы путём сочетания данных с разных машин. Примеры, приведённые в конфигурационном файле, будут неплохой начальной точкой для настройки.
				</div><div
              class="para">
					Последний шаг — публикация сгенерированных страниц; для этого требуется настроить веб-сервер таким образом, чтобы содержимое <code
                class="filename">/var/cache/munin/www/</code> было доступно на сайте. Доступ к этому сайту зачастую будет ограничен с помощью или механизма аутентификации, или правил контроля доступа по IP-адресам. Подробности см. в <a
                class="xref"
                href="sect.http-web-server.html">Раздел 11.2, «Web Server (HTTP)»</a>.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.nagios"></a>12.4.2. Настройка Nagios</h3></div></div></div><a
            id="idm139917848732240"
            class="indexterm"></a><div
            class="para">
				В отличие от Munin, Nagios не требует обязательной установки чего бы то ни было на наблюдаемых узлах; чаще всего NAgios используется для проверки доступности сетевых сервисов. Например, Nagios может подключиться к веб-серверу и проверить, что конкретная веб-страница может быть получена за заданное время.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139917848730528"></a>12.4.2.1. Установка</h4></div></div></div><div
              class="para">
					Первый шаг установки Nagios заключается в установке пакетов <span
                class="pkg pkg">nagios3</span>, <span
                class="pkg pkg">nagios-plugins</span> и <span
                class="pkg pkg">nagios3-doc</span>. В процессе установки настраивается веб-интерфейс и создаётся первый пользователь <code
                class="literal">nagiosadmin</code> (для которого запрашивается пароль). Других пользователей можно добавить в файл <code
                class="filename">/etc/nagios3/htpasswd.users</code> с помощью команды <code
                class="command">htpasswd</code> из состава Apache. Если во время установки не отображался диалог Debconf, задать пароль пользователя <code
                class="literal">nagiosadmin</code> можно с помощью <code
                class="command">dpkg-reconfigure nagios3-cgi</code>.
				</div><div
              class="para">
					Открыв в обозревателе <code
                class="literal">http://<em
                  class="replaceable">server</em>/nagios3/</code>, можно попасть в веб-интерфейс; заметьте, что Nagios отслеживает некоторые параметры машины, на которой он запущен. Однако некоторые интерактивные функции, такие как добавление комментариев к узлу, не работают. Они выключены в конфигурации Nagios по умолчанию, которая сильно ограничена в целях безопасности.
				</div><div
              class="para">
					Как описано в <code
                class="filename">/usr/share/doc/nagios3/README.Debian</code>, для включения некоторых функций требуется отредактировать <code
                class="filename">/etc/nagios3/nagios.cfg</code> и установить в нём значение параметра <code
                class="literal">check_external_commands</code> в «1». Нам также потребуется дать права на запись в каталог, используемый Nagios, с помощью таких команд:
				</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>/etc/init.d/nagios3 stop</code></strong>
<code
                class="computeroutput">[...]
# </code><strong
                class="userinput"><code>dpkg-statoverride --update --add nagios www-data 2710 /var/lib/nagios3/rw
</code></strong><code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg-statoverride --update --add nagios nagios 751 /var/lib/nagios3
</code></strong><code
                class="computeroutput"># </code><strong
                class="userinput"><code>/etc/init.d/nagios3 start</code></strong>
<code
                class="computeroutput">[...]</code></pre></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm139917848718256"></a>12.4.2.2. Настройка</h4></div></div></div><div
              class="para">
					Веб-интерфейс Nagios довольно симпатичный, но не позволяет менять настройки или добавлять наблюдаемые узлы и сервисы. Вся конфигурация управляется через файлы, указанные в центральном конфигурационном файле <code
                class="filename">/etc/nagios3/nagios.cfg</code>.
				</div><div
              class="para">
					В эти файлы не стоит погружаться, не вникнув в некоторые базовые принципы Nagios. В конфигурации перечисляются объекты следующих типов:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>host</em></span> (узел) — машина, которую необходимо наблюдать;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>hostgroup</em></span> (группа узлов) — набор узлов, которые следует сгруппировать вместе при отображении или для учёта некоторых общих элементов конфигурации;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>service</em></span> (сервис) — тестируемый элемент, относящийся к узлу или группе узлов. Это, как правило, проверка сетевого сервиса, хотя сюда может входить и проверка, держатся ли некоторые параметры на приемлемом уровне (например свободное дисковое пространство или загрузка процессора);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>servicegroup</em></span> (группа сервисов) — набор сервисов, которые следует сгруппировать вместе при отображении;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>contact</em></span> (контакт) — лицо, которому следует направлять аварийные предупреждения;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>contactgroup</em></span> (группа контактов) — набор таких контактов;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>timeperiod</em></span> (временной интервал) — промежуток времени, в течение которого должны быть проверены некоторые сервисы;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>command</em></span> (команда) — командная строка, выполняемая для проверки данного сервиса.
						</div></li></ul></div><div
              class="para">
					У каждого объекта, в соответствии с его типом, есть набор свойств, которые можно менять. Полный список слишком длинен, чтобы приводить его здесь, поэтому отметим только самые важные свойства и отношения между объектами.
				</div><div
              class="para">
					Сервис использует команду для проверки состояния некой функциональности на узле (или группе узлов) на протяжении временного интервала. В случае проблемы Nagios отправляет предупреждение всем членам группы контактов, привязанной к сервису. Предупреждение отправляется каждому члену в соответствии с каналом, описанным в соответствующем объекте контакта.
				</div><div
              class="para">
					Система наследования позволяет легко разделять наборы свойств между объектами без дублирования информации. Более того, начальная конфигурация уже включает набор стандартных объектов; зачастую для определения новых узлов, сервисов и контактов достаточно сделать их потомками стандартных объектов. Файлы в <code
                class="filename">/etc/nagios3/conf.d/</code> — хороший источник информации о том, как это работает.
				</div><div
              class="para">
					Администраторы Falcot Corp используют следующую конфигурацию:
				</div><div
              class="example"><a
                id="idm139917848700608"></a><p
                class="title"><strong>Пример 12.3. Файл <code
                    class="filename">/etc/nagios3/conf.d/falcot.cfg</code></strong></p><div
                class="example-contents"><pre
                  class="programlisting">define contact{
    name                            generic-contact
    service_notification_period     24x7
    host_notification_period        24x7
    service_notification_options    w,u,c,r
    host_notification_options       d,u,r
    service_notification_commands   notify-service-by-email
    host_notification_commands      notify-host-by-email
    register                        0 ; Template only
}
define contact{
    use             generic-contact
    contact_name    rhertzog
    alias           Raphael Hertzog
    email           hertzog@debian.org
}
define contact{
    use             generic-contact
    contact_name    rmas
    alias           Roland Mas
    email           lolando@debian.org
}

define contactgroup{
    contactgroup_name     falcot-admins
    alias                 Falcot Administrators
    members               rhertzog,rmas
}

define host{
    use                   generic-host ; Name of host template to use
    host_name             www-host
    alias                 www.falcot.com
    address               192.168.0.5
    contact_groups        falcot-admins
    hostgroups            debian-servers,ssh-servers
}
define host{
    use                   generic-host ; Name of host template to use
    host_name             ftp-host
    alias                 ftp.falcot.com
    address               192.168.0.6
    contact_groups        falcot-admins
    hostgroups            debian-servers,ssh-servers
}

# 'check_ftp' command with custom parameters
define command{
    command_name          check_ftp2
    command_line          /usr/lib/nagios/plugins/check_ftp -H $HOSTADDRESS$ -w 20 -c 30 -t 35
}

# Generic Falcot service
define service{
    name                  falcot-service
    use                   generic-service
    contact_groups        falcot-admins
    register              0
}

# Services to check on www-host
define service{
    use                   falcot-service
    host_name             www-host
    service_description   HTTP
    check_command         check_http
}
define service{
    use                   falcot-service
    host_name             www-host
    service_description   HTTPS
    check_command         check_https
}
define service{
    use                   falcot-service
    host_name             www-host
    service_description   SMTP
    check_command         check_smtp
}

# Services to check on ftp-host
define service{
    use                   falcot-service
    host_name             ftp-host
    service_description   FTP
    check_command         check_ftp2
}
</pre></div></div><div
              class="para">
					This configuration file describes two monitored hosts. The first one is the web server, and the checks are made on the HTTP (80) and secure-HTTP (443) ports. Nagios also checks that an SMTP server runs on port 25. The second host is the FTP server, and the check includes making sure that a reply comes within 20 seconds. Beyond this delay, a <span
                class="emphasis"><em>warning</em></span> is emitted; beyond 30 seconds, the alert is deemed critical. The Nagios web interface also shows that the SSH service is monitored: this comes from the hosts belonging to the <code
                class="literal">ssh-servers</code> hostgroup. The matching standard service is defined in <code
                class="filename">/etc/nagios3/conf.d/services_nagios2.cfg</code>.
				</div><div
              class="para">
					Обратите внимание на использование наследования: то, что объект наследует другому объекту, указывается с помощью «use <em
                class="replaceable">имя-родителя</em>». Родительский объект должен быть идентифицируемым, для чего ему должно быть установлено свойство «name <em
                class="replaceable">идентификатор</em>». Если родительский объект не является реальным объектом, а служит только для создания потомков, следует установить есу свойство «register 0»; оно укажет Nagios, что объект не надо учитывать, и тогда нехватка некоторых параметров, которые в ином случае были бы обязательными, будет проигнорирована.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ДОКУМЕНТАЦИЯ</em></span> Список свойств объектов</strong></p></div></div></div><div
                class="para">
					Более глубокое понимание различных способов настройки Nagios можно получить с помощью документации, предоставляемой пакетом <span
                  class="pkg pkg">nagios3-doc</span>. Эта документация непосредственно доступна через веб-интерфейс, с помощью ссылки «Документация» в верхнем левом углу. Она включает список всех типов объектов со всеми свойствами, которыми они могут быть наделены. Там же описано, как создавать новые плагины.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>УГЛУБЛЯЕМСЯ</em></span> Удалённые проверки с помощью NRPE</strong></p></div></div></div><div
                class="para">
					Многие плагины Nagios позволяют проверять ряд параметров локально на узле; если требуется производить такие проверки на многих машинах, в то время как центральная установка будет их собирать информацию, нужно установить плагин NRPE (<span
                  class="emphasis"><em>Nagios Remote Plugin Executor</em></span>). Пакет <span
                  class="pkg pkg">nagios-nrpe-plugin</span> должен быть установлен на сервере Nagios, а <span
                  class="pkg pkg">nagios-nrpe-server</span> — на узлах, где следует запускать локальные проверки. Последний читает конфигурацию из <code
                  class="filename">/etc/nagios/nrpe.cfg</code>. Этот файл должен содержать список проверок, которые могут запускаться удалённо, и IP-адреса машин, которые могут их запускать. На стороне Nagios эти удалённые проверки включаются путём добавления соответствующих сервисов с использованием новой команды <span
                  class="emphasis"><em>check_nrpe</em></span>.
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.automated-installation.html"><strong>Пред.</strong>12.3. Автоматизированная установка</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="workstation.html"><strong>След.</strong>Глава 13. Workstation</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.monitoring.html">ar-MA</a></li><li><a
              href="../da-DK/sect.monitoring.html">da-DK</a></li><li><a
              href="../de-DE/sect.monitoring.html">de-DE</a></li><li><a
              href="../el-GR/sect.monitoring.html">el-GR</a></li><li><a
              href="../en-US/sect.monitoring.html">en-US</a></li><li><a
              href="../es-ES/sect.monitoring.html">es-ES</a></li><li><a
              href="../fa-IR/sect.monitoring.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.monitoring.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.monitoring.html">hr-HR</a></li><li><a
              href="../id-ID/sect.monitoring.html">id-ID</a></li><li><a
              href="../it-IT/sect.monitoring.html">it-IT</a></li><li><a
              href="../ja-JP/sect.monitoring.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.monitoring.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.monitoring.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.monitoring.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.monitoring.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.monitoring.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.monitoring.html">zh-CN</a></li></ul></div></body></html>
