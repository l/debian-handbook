<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.2. Настройка Сети</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Конфигурация, Локализация, Локали, Сеть, Разрешение имён, Пользователи, Группы, Аккаунты, Интерпретатор командной строки, Оболочка, Печать, Загрузчик, Компиляция ядра" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Глава 8. Базовая конфигурация: Сеть, Аккаунты, Печать..." /><link
        rel="prev"
        href="basic-configuration.html"
        title="Глава 8. Базовая конфигурация: Сеть, Аккаунты, Печать..." /><link
        rel="next"
        href="sect.hostname-name-service.html"
        title="8.3. Присваивание Имени Компьютеру (Hostname) и Настройка Службы Имен" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ru-RU/sect.network-config.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.network-config"></a>8.2. Настройка Сети</h2></div></div></div><div
          class="sidebar"><a
            id="sidebar.networking-basics"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>К ОСНОВАМ</em></span> Необходимое понятие о сети (Ethernet, IP адрес, подсети, широковещательная рассылка пакетов)</strong></p></div></div></div><a
            id="id-1.11.6.2.2"
            class="indexterm"></a><a
            id="id-1.11.6.2.3"
            class="indexterm"></a><a
            id="id-1.11.6.2.4"
            class="indexterm"></a><a
            id="id-1.11.6.2.5"
            class="indexterm"></a><a
            id="id-1.11.6.2.6"
            class="indexterm"></a><a
            id="id-1.11.6.2.7"
            class="indexterm"></a><a
            id="id-1.11.6.2.8"
            class="indexterm"></a><div
            class="para">
			Большинство современных локальных сетей используют протокол Ethernet, где данные разделяются на небольшие блоки, называемые кадрами и передаются по кабелю - за один раз - один кадр. Скорость передачи данных изменяется от 10 Мб/с для старых карт Ethernet до 10 Гбит/с - в новейших картах (с более распространенными в настоящее время скорость вырастает с 100 Мб/с до 1 Гбит/с). Наиболее широко используемые кабели называются 10BASE-T, 100BASE-T, 1000BASE-T или 10GBASE-T, которые в зависимости от своей пропускной способности могут надежно обеспечить передачу данных (Т означает “витая пара”); эти провода на окончаниях оформляются разъемами RJ45. Имеются и другие типы кабелей, используемых в основном для скорости 1 Гбит/с и выше.
		</div><a
            id="id-1.11.6.2.10"
            class="indexterm"></a><a
            id="id-1.11.6.2.11"
            class="indexterm"></a><div
            class="para">
			IP-адрес представляет собой номер, используемый для идентификации сетевого интерфейса на компьютере, на локальной сети или в Интернете. В настоящее время наиболее распространенной версией протокола является IP (IPv4). Номер IP кодируется в 32 бита, и обычно представляет из себя 4 блока 3-х значных чисел, разделенных точками (например <code
              class="literal">192.168.0.1</code>), значение каждого блока находится в интервале от 0 до 255 (включительно, что соответствует 8-ми битной кодировке). Следующая версия протокола IPv6 расширяет адресное пространство до 128-бит, а сами адреса обычно представляют из себя последовательность из шестнадцатеричных чисел, разделенные на колонки через двоеточие (например, 2001:0db8:13bb:0002:0000:0000:0000:0020, или 2001:db8:13bb:2::20 для краткости).
		</div><a
            id="id-1.11.6.2.13"
            class="indexterm"></a><a
            id="id-1.11.6.2.14"
            class="indexterm"></a><a
            id="id-1.11.6.2.15"
            class="indexterm"></a><div
            class="para">
			Маска подсети (netmask) определяется в двоичном коде, у которой адрес IP делится на две части - одна определяет адрес в наружной сети (например интернет), а вторая часть - определяет адрес машины во внутренней (локальной) сети. В примере, приведенном здесь, сконфигурирован статичный адрес IPv4, маска подсети, <code
              class="literal">255.255.255.0</code> (24 "1"-к и следом за ними 8 "0"-й в бинарном представлении, то есть 11111111111111111111111100000000) указывает на то, что первые 24 бит статичного IP-адреса соотносятся с адресом в наружной сети (например интернет или, в крупной сети, - надсеть -то есть сеть, рангом повыше), и другие 8 являются специфическими для данной машины. В IPv6, для удобочитаемости, только количество “1”-к выражено; маска сети для IPv6-сети может, таким образом, быть <code
              class="literal">64</code>.
		</div><div
            class="para">
			В IP-адресе, который приведен выше, номером машины является 0. Диапазон сетевых IPv4-адресов в сформированной сети часто синтаксически указывается следующим образом, <span
              class="emphasis"><em>a.b.c.d/e</em></span>, в котором <span
              class="emphasis"><em>a.b.c.d</em></span> является сетевым адресом и <span
              class="emphasis"><em>e</em></span> - количество бит затрагивающие сетевую часть в IP-адресе. Пример сети, таким образом, можно записать: <code
              class="literal">192.168.0.0/24</code>. Похожий синтаксис и в IPv6: <code
              class="literal">2001:db8:13bb:2::/64</code>.
		</div><a
            id="id-1.11.6.2.18"
            class="indexterm"></a><a
            id="id-1.11.6.2.19"
            class="indexterm"></a><div
            class="para">
			Маршрутизатор представляет собой устройство, которое соединяет несколько сетей друг с другом. Весь трафик, проходящий через маршрутизатор, направляется в нужную сеть. Для этого, маршрутизатор анализирует входящие пакеты и перенаправляет их в соответствии с IP-адресом места их конечного назначения. Маршрутизатор часто знают как шлюз; в этой конфигурации, он работает как машина, которая помогает выйти за пределы своей локальной сети (по направлению к расширенной сети, такой как Интернет).
		</div><a
            id="id-1.11.6.2.21"
            class="indexterm"></a><div
            class="para">
			Специальный широковещательный адрес (broadcast address - xxx.xxx.xxx.255) устанавливает непосредственную связь всех станций в сети. Почти никогда не “направляется по определённому маршруту”, его функции в сети - рассылка компьютерам данной сети дейтаграмм. Следовательно, это значит, что пакеты с данными, адрессованные в этот специальный широковещательный адрес никогда не проходят через маршрутизатор (broadcast address выполняют функцию только внутри сети).
		</div><div
            class="para">
			Данная глава посвящена адресам IPv4, поскольку они сейчас наиболее часто используются. К особенностям протокола IPv6 мы обращаемся в разделе <a
              class="xref"
              href="sect.ipv6.html">Раздел 10.5, «IPv6»</a>, но основные принципы остаются теми же.
		</div></div><div
          class="para">
			The network is automatically configured during the initial installation. If Network Manager gets installed (which is generally the case for full desktop installations), then it might be that no configuration is actually required (for example, if you rely on DHCP on a wired connection and have no specific requirements). If a configuration is required (for example for a WiFi interface), then it will create the appropriate file in <code
            class="filename">/etc/NetworkManager/system-connections/</code>.
		</div><div
          class="para">
			If Network Manager is not installed, then the installer will configure <span
            class="pkg pkg">ifupdown</span> by creating the <code
            class="filename">/etc/network/interfaces</code> file. A line starting with <code
            class="literal">auto</code> gives a list of interfaces to be automatically configured on boot by the <code
            class="literal">networking</code> service.
		</div><div
          class="para">
			In a server context, <span
            class="pkg pkg">ifupdown</span> is thus the network configuration tool that you usually get. That is why we will cover it in the next sections.
		</div><a
          id="id-1.11.6.6"
          class="indexterm"></a><a
          id="id-1.11.6.7"
          class="indexterm"></a><a
          id="id-1.11.6.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>АЛЬТЕРНАТИВА</em></span> Диспетчер сети</strong></p></div></div></div><a
            id="id-1.11.6.9.2"
            class="indexterm"></a><div
            class="para">
			If Network Manager is particularly recommended in roaming setups (see <a
              class="xref"
              href="sect.network-config.html#sect.roaming-network-config">Раздел 8.2.5, «Автоматическая настройки сети для мобильных пользователей»</a>), it is also perfectly usable as the default network management tool. You can create “System connections” that are used as soon as the computer boots either manually with a <code
              class="filename">.ini</code>-like file in <code
              class="filename">/etc/NetworkManager/system-connections/</code> or through a graphical tool (<code
              class="command">nm-connection-editor</code>). Just remember to deactivate all entries in <code
              class="filename">/etc/network/interfaces</code> if you want Network Manager to handle them. <div
              class="url">→ <a
                href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings</a></div> <div
              class="url">→ <a
                href="https://developer.gnome.org/NetworkManager/1.6/ref-settings.html">https://developer.gnome.org/NetworkManager/1.6/ref-settings.html</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.interface-ethernet"></a>8.2.1. Интерфейс Ethernet</h3></div></div></div><div
            class="para">
				Если компьютер имеет Ethernet-карту, IP-сеть, что будет с ней связанна это должно быть настроено выбирая один из двух методов. Простейшим методом является динамическая настройка с DHCP, и это потребует установки DHCP-сервера в локальной сети. Здесь же можно определить имя вашего компьютера, которое будет соответствовать имени <code
              class="literal">hostname</code> в примере ниже. Запущенный DHCP-сервер рассылает информацию о том, как настроена сеть, всем компьютерам в локальной сети.
			</div><a
            id="id-1.11.6.10.3"
            class="indexterm"></a><a
            id="id-1.11.6.10.4"
            class="indexterm"></a><div
            class="example"><a
              id="example.config-dhcp"></a><p
              class="title"><strong>Пример 8.1. Настройка DHCP</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet dhcp
  hostname arrakis
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IN PRACTICE</em></span> Names of network interfaces</strong></p></div></div></div><a
              id="id-1.11.6.10.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.3"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.4"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.5"
              class="indexterm"></a><div
              class="para">
				By default, the kernel attributes generic names such a <code
                class="literal">eth0</code> (for wired Ethernet) or <code
                class="literal">wlan0</code> (for WiFi) to the network interfaces. The number in those names is a simple incremental counter representing the order in which they have been detected. With modern hardware, that order might change for each reboot and thus the default names are not reliable.
			</div><div
              class="para">
				Fortunately, systemd and udev are able to rename the interfaces as soon as they appear. The default name policy is defined by <code
                class="filename">/lib/systemd/network/99-default.link</code> (see <span
                class="citerefentry"><span
                  class="refentrytitle">systemd.link</span>(5)</span> for an explanation of the <code
                class="literal">NamePolicy</code> entry in that file). In practice, the names are often based on the device's physical location (as guessed by where they are connected) and you will see names starting with <code
                class="literal">en</code> for wired ethernet and <code
                class="literal">wl</code> for WiFi. In the example above, the rest of the name indicates, in abbreviated form, a PCI (<code
                class="literal">p</code>) bus number (<code
                class="literal">0</code>), a slot number (<code
                class="literal">s31</code>), a function number (<code
                class="literal">f6</code>).
			</div><div
              class="para">
				Obviously, you are free to override this policy and/or to complement it to customize the names of some specific interfaces. You can find out the names of the network interfaces in the output of <code
                class="command">ip addr</code> (or as filenames in <code
                class="filename">/sys/class/net/</code>).
			</div></div><div
            class="para">
				В варианте с выбором “статичной” настройкой сети необходимо установить фиксированные значения. Это включает в себя, по меньшей мере, IP-адрес и маску подсети; а также иногда необходимо указать сетевые и широковещательные адреса. Маршрутизатор, соединяющий с внешним миром, будет обозначен как шлюз.
			</div><div
            class="example"><a
              id="example.static-network"></a><p
              class="title"><strong>Пример 8.2. Настройка статического IP-адреса</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ЗАМЕТКА</em></span> Настройка нескольких адресов</strong></p></div></div></div><div
              class="para">
				Можно взаимно увязать не только несколько интерфейсов с одной, физически установленной в компьютер, сетевой картой, но также присвоить несколько IP-адресов на одиночный интерфейс. Запомните также, что IP-адрес может соответствовать любому количеству имен через DNS, и что имя также может быть соотнесено с любым количеством пронумерованных IP-адресов.
			</div><div
              class="para">
				Как вы уже наверное догадались, конфигурация сети может быть достаточно сложной, но те опции обычно испльзуются только в очень специфичных случаях. Примеры, приведенные здесь, характерны для обычных конфигураций.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.interface-wireless"></a>8.2.2. Wireless Interface</h3></div></div></div><a
            id="id-1.11.6.11.2"
            class="indexterm"></a><div
            class="para">
				Getting wireless network cards to work can be a bit more challenging. First of all, they often require the installation of proprietary firmwares which are not installed by default in Debian. Then wireless networks rely on cryptography to restrict access to authorized users only, this implies storing some secret key in the network configuration. Let's tackle those topics one by one.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.11.6.11.4"></a>8.2.2.1. Installing the required firmwares</h4></div></div></div><a
              id="id-1.11.6.11.4.2"
              class="indexterm"></a><a
              id="id-1.11.6.11.4.3"
              class="indexterm"></a><div
              class="para">
					First you have to enable the non-free repository in APT's sources.list file: see <a
                class="xref"
                href="apt.html#sect.apt-sources.list">Раздел 6.1, «Содержимое файла <code
                  class="filename">sources.list</code>»</a> for details about this file. Many firmware are proprietary and are thus located in this repository. You can try to skip this step if you want, but if the next step doesn't find the required firmware, retry after having enabled the non-free section.
				</div><div
              class="para">
					Then you have to install the appropriate <code
                class="literal">firmware-*</code> packages. If you don't know which package you need, you can install the <span
                class="pkg pkg">isenkram</span> package and run its <code
                class="command">isenkram-autoinstall-firmware</code> command. The packages are often named after the hardware manufacturer or the corresponding kernel module: <span
                class="pkg pkg">firmware-iwlwifi</span> for Intel wireless cards, <span
                class="pkg pkg">firmware-atheros</span> for Qualcomm Atheros, <span
                class="pkg pkg">firmware-ralink</span> for Ralink, etc. A reboot is then recommended because the kernel driver usually looks for the firmware files when it is first loaded and no longer afterwards.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.11.6.11.5"></a>8.2.2.2. Wireless specific entries in <code
                      class="filename">/etc/network/interfaces</code></h4></div></div></div><a
              id="id-1.11.6.11.5.2"
              class="indexterm"></a><div
              class="para">
					<span
                class="emphasis"><em>ifupdown</em></span> is able to manage wireless interfaces but it needs the help of the <span
                class="pkg pkg">wpasupplicant</span> package which provides the required integration between <span
                class="emphasis"><em>ifupdown</em></span> and the <code
                class="command">wpa_supplicant</code> command used to configure the wireless interfaces (when using WPA/WPA2 encryption). The usual entry in <code
                class="filename">/etc/network/interfaces</code> needs to be extended with two supplementary parameters to specify the name of the wireless network (aka its SSID) and the <span
                class="emphasis"><em>Pre-Shared Key</em></span> (PSK).
				</div><div
              class="example"><a
                id="example.config-wireless"></a><p
                class="title"><strong>Пример 8.3. DHCP configuration for a wireless interface</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
auto wlp4s0
iface wlp4s0 inet dhcp
  wpa-ssid Falcot
  wpa-psk ccb290fd4fe6b22935cbae31449e050edd02ad44627b16ce0151668f5f53c01b
</pre></div></div><div
              class="para">
					The <code
                class="literal">wpa-psk</code> parameter can contain either the plain text passphrase or its hashed version generated with <code
                class="command">wpa_passphrase <em
                  class="replaceable">SSID</em> <em
                  class="replaceable">passphrase</em></code>. If you use an unencrypted wireless connection, then you should put a <code
                class="literal">wpa-key-mgmt NONE</code> and no <code
                class="literal">wpa-psk</code> entry. For more information about the possible configuration options, have a look at <code
                class="filename">/usr/share/doc/wpasupplicant/README.Debian.gz</code>.
				</div><div
              class="para">
					At this point, you should consider restricting the read permissions on <code
                class="filename">/etc/network/interfaces</code> to the root user only since the file contains a private key that not all users should have access to.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HISTORY</em></span> WEP encryption</strong></p></div></div></div><a
                id="id-1.11.6.11.5.7.2"
                class="indexterm"></a><div
                class="para">
					Usage of the deprecated WEP encryption protocol is possible with the <span
                  class="pkg pkg">wireless-tools</span> package. See <code
                  class="filename">/usr/share/doc/wireless-tools/README.Debian</code> for instructions.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.ppp-rtc"></a>8.2.3. Подключение с PPP через PSTN-модем</h3></div></div></div><a
            id="id-1.11.6.12.2"
            class="indexterm"></a><a
            id="id-1.11.6.12.3"
            class="indexterm"></a><a
            id="id-1.11.6.12.4"
            class="indexterm"></a><a
            id="id-1.11.6.12.5"
            class="indexterm"></a><div
            class="para">
				При использовании протокола точка-точка (PPP) устанавливается постоянное соединение с передачей сигналов прерывистым методом; этот вариант является наиболее общим решением для соединения, основанного на телефонном модеме (“PSTN модем”, в данном случае соединение осуществляется поверх телефонной сети общего пользования).
			</div><div
            class="para">
				Для соединия с провайдером через телефонный модем необходимо получить у провайдера account (имя для входа), который включает в себя также номер телефона, фамилию-имя-отчество, пароль, и, иногда необходимо указать - какой протокол проверки подлинности надо использовать. Такого рода соединения настраиваются с применением инструмента <code
              class="command">pppconfig</code>, расположенного в Debian пакете с похожим именем. По умолчанию, он устанавливает соединение с именем <code
              class="literal">provider</code> (к примеру с именем вашего Интернет-провайдера). Если вы сомневаетесь, какой протокол проверки подлинности надо применить, выбирайте <span
              class="emphasis"><em>PAP</em></span>: его применяют большинство Интернет-сервис провайдеров.
			</div><a
            id="id-1.11.6.12.8"
            class="indexterm"></a><a
            id="id-1.11.6.12.9"
            class="indexterm"></a><div
            class="para">
				После настройки, становится возможным подсоединиться используя команду <code
              class="command">pon</code> (давая ей имя соединения как параметр, когда установленное по умолчанию значение <code
              class="literal">provider</code> не подходит). Отключить это соединение можно с командой <code
              class="command">poff</code>. Указанные две команды могут быть выполнены пользователем администратор (root), или любым другим пользователем, включенным в группу <code
              class="literal">dip</code>.
			</div><a
            id="id-1.11.6.12.11"
            class="indexterm"></a><a
            id="id-1.11.6.12.12"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.adsl"></a>8.2.4. Подключение через ADSL модем</h3></div></div></div><a
            id="id-1.11.6.13.2"
            class="indexterm"></a><a
            id="id-1.11.6.13.3"
            class="indexterm"></a><a
            id="id-1.11.6.13.4"
            class="indexterm"></a><div
            class="para">
				Общим названием “ADSL модем” обозначают большую группу устройств с очень различными функциями. Модемы, что могут быть запросто использованы с Linux имеют в своем составе интерфейс Ethernet (а не только интерфейс USB). Это направление (развития модемов с интегрированным интерфейсом Ethernet) становится все более популярным. Большинство Интернет провайдеров, оказывающих услуги по предоставлению доступа в интернет по технологии ADSL, предлагают пользователям долгосрочную ссуду или дают в аренду “коробку” с интерфейсом Ethernet. В зависимости от типа модема, параметры их настройки могут изменяться в широком диапазоне.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-pppoe"></a>8.2.4.1. Модемы, поддерживающие протокол PPPoE</h4></div></div></div><a
              id="id-1.11.6.13.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.13.6.3"
              class="indexterm"></a><div
              class="para">
					Некоторые Ethernet - модемы работают с протоколом PPPOE (Point to Point Protocol over Ethernet - протокол "точка-точка поверх Интернет"). Инструмент <code
                class="command">pppoeconf</code> (из пакета с похожим именем) настраивает такое соединение. Для этого, он изменяет файл с настройками провайдера <code
                class="filename">/etc/ppp/peers/dsl-provider</code> и записывает данные для входа (login) в файлы <code
                class="filename">/etc/ppp/pap-secrets</code> и <code
                class="filename">/etc/ppp/chap-secrets</code>. Мы рекомендуем принять все, предложенные командой, изменения.
				</div><div
              class="para">
					Как только настройка будет закончена, вы можете открыть ADSL-соединение с командой <code
                class="command">pon dsl-provider</code> или закрыть с <code
                class="command">poff dsl-provider</code>.
				</div><a
              id="id-1.11.6.13.6.6"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>СОВЕТ</em></span> Включите команду <code
                          class="command">ppp</code> в автостарт (boot)</strong></p></div></div></div><a
                id="id-1.11.6.13.6.7.2"
                class="indexterm"></a><a
                id="id-1.11.6.13.6.7.3"
                class="indexterm"></a><div
                class="para">
					PPP соединение поверх ADSL является, по определению, неустойчивым. Поскольку оно обычно не тарифицируется по времени, у пользователя появляется соблазн держать его всегда открытыми. Однако имеется и несколько минусов такого решения. Стандартным решением, чтобы сделать это, является - использовать систему инициализации (init).
				</div><div
                class="para">
					With systemd, adding an automatically restarting task for the ADSL connection is a simple matter of creating a “unit file” such as <code
                  class="filename">/etc/systemd/system/adsl-connection.service</code>, with contents such as the following:
				</div><pre
                class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div
                class="para">
					Как только этот unit file будет определен, его надо будет подключить к системе командой <code
                  class="command">systemctl enable adsl-connection</code>. Этот цикл можно подключить и вручную с командой <code
                  class="command">systemctl start adsl-connection</code>; а также включить его запуск в автостарт при загрузке (boot).
				</div><div
                class="para">
					На системах, не использующих <code
                  class="command">systemd</code> (включая <span
                  class="distribution distribution">Wheezy</span> и более ранние версии Debian), стандартная система инициализации SystemV работает по другому. На таких системах, все, что нужно - это добавить строку, такая как следующая, в конец файла <code
                  class="filename">/etc/inittab</code>; затем, в любое время соединение может быть разорвано, а <code
                  class="command">init</code> снова переподключит это.
				</div><pre
                class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider
</pre><div
                class="para">
					Для ADSL соединений, выполняющих автовыключение ежедневно, этот способ сокращает длительность прерывания.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-pptp"></a>8.2.4.2. Модемы, поддерживающие протокол PPTP</h4></div></div></div><a
              id="id-1.11.6.13.7.2"
              class="indexterm"></a><div
              class="para">
					Протокол PPTP (туннельный протокол типа точка-точка - Point-to-Point Tunneling Protocol) был создан компанией Microsoft. Его использование брало свое начало от ADSL, однако очень быстро было заменено на PPPOE. Если вас принуждают использовать этот протокол, то смотрите <a
                class="xref"
                href="sect.virtual-private-network.html#sect.pptp">Раздел 10.2.4, «PPTP»</a>.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-dhcp"></a>8.2.4.3. Модемы, поддерживающие протокол DHCP</h4></div></div></div><div
              class="para">
					Когда модем присоединили к компьютеру через кабель Ethernet (перекрестный кабель - crossover cable), вы выполняете настройку соединения сети через DHCP на компьютере; а модем автоматически настраивается выполнять роль шлюза (gateway) и берет на себя заботу о маршрутизации пакетов (то есть управляет сетевым трафиком между компьютером и Интернет).
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>К ОСНОВАМ</em></span> Перекрестный (crossover) кабель для прямого соединения Ethernet</strong></p></div></div></div><a
                id="id-1.11.6.13.8.3.2"
                class="indexterm"></a><div
                class="para">
					Компьютерная сетевая карта ожидает получать данные по конкретным проводам (жилкам) в кабеле, а посылать такие же данные по другим. Когда вы присоединяете компьютер в локальную сеть, вы обычно присоединяете кабель (прямой или перекрестный) в место, расположенное между сетевой картой и повторителем или переключателем. Однако, если вы хотите соединить между собою два компьютера напрямую (без посредников в лице повторителя или переключателя), вы должны направить сигнал, посылаемый одной картой в адрес другой получающей карты, и наоборот. Для этого делают перекрестный кабель, где жилки смещены на другую сторону, для этих целей его и используют.
				</div><div
                class="para">
					Обратите внимание, что это различие стало почти неактуальным в настоящее время, так как современные сетевые карты имеют возможность определять тип использующегося кабеля и подстраиваться под него соответственно, поэтому не удивляйтесь, что оба вида кабеля будут работать в данном месте.
				</div></div><div
              class="para">
					Большинство “ADSL маршрутизаторов”, имеющихся сегодня в продаже, можно использовать точно так же, как используются такие же ADSL модемы, которые предоставляют пользователям для работы Internet-сервисные провайдеры.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.roaming-network-config"></a>8.2.5. Автоматическая настройки сети для мобильных пользователей</h3></div></div></div><a
            id="id-1.11.6.14.2"
            class="indexterm"></a><a
            id="id-1.11.6.14.3"
            class="indexterm"></a><div
            class="para">
				Многие инженеры Falcot имеют портативный компьютер, который они используют также и дома, для профессиональных целей. Настройки сетей, к которым подсоединяется в тот или иной момент времени портативный компьютер, разные, в зависимости от местоположения (на работе и дома). Дома это может быть радиосвязь через wifi (защищенная ключом WPA), а на рабочем месте используется проводной широкополосный доступ к сети для увеличения безопасности и повышения производительности.
			</div><div
            class="para">
				Чтобы избежать ручного подсоединения и отсоединения от интерфейса соответствующей сети, администраторы установили пакет <span
              class="pkg pkg">network-manager</span> (диспетчер связи) на те машины, которые осуществляют маршрутизацию. Это программное обеспечение позволяет пользователям быстро переключаться из одной сети в другую используя маленькую иконку, показанную в области уведомлений у них на графическом столе. Нажав на эту иконку можно увидеть все доступные сети (обе проводную и радиосвязь - wireless), и далее можно выбрать из них ту сеть, к которой пользователь хочет подсоединиться. Программа запоминает настройки сетей для переключения пользователя, чтобы было всегда соединение, и автоматически переключает на лучшую доступную сеть в случае обрыва связи.
			</div><div
            class="para">
				Чтобы достичь такого результата, программа была разделена на 2 части: запущенный с правами администратора (root) процесс (daemon) активирует и настраивает сетевой интерфейс, и этот процесс контролирует пользовательский интерфейс. PolicyKit обрабатывает необходимые проверки авторизации для контроля этой программы и Debian настраивает PolicyKit таким образом, что участники группы netdev могут добавлять и изменять соединения Сетевого Диспетчера.
			</div><div
            class="para">
				Сетевой диспетчер знает как обработать различные типы соединений (DHCP, ручная настройка, локальная сеть), но только в случае, если эти настройки программа сделала сама. Это объясняет, почему иногда программа систематически игнорирует все сетевые интерфейсы в <code
              class="filename">/etc/network/interfaces</code>, для которых он не подходит. Так как Сетевой Диспетчер не дает деталей в случае если сетевое соединение не показано в иконке, быстрый путь для решения данной проблемы - это надо удалить из <code
              class="filename">/etc/network/interfaces</code> любые настройки для всех интерфейсов, что должны управляться самим Сетевым Диспетчером (и потом запустив эту программу вы получите созданные самой программой конфигурационные файлы).
			</div><div
            class="para">
				Обратите внимание, что эта программа устанавливается по умолчанию в случае, если в процессе первоначальной установки системы был выбран комплект программ “Окружение рабочего стола”.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Пред.</strong>Глава 8. Базовая конфигурация: Сеть, Аккаунты, Пе...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>След.</strong>8.3. Присваивание Имени Компьютеру (Hostname) и Н...</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.network-config.html">ar-MA</a></li><li><a
              href="../da-DK/sect.network-config.html">da-DK</a></li><li><a
              href="../de-DE/sect.network-config.html">de-DE</a></li><li><a
              href="../el-GR/sect.network-config.html">el-GR</a></li><li><a
              href="../en-US/sect.network-config.html">en-US</a></li><li><a
              href="../es-ES/sect.network-config.html">es-ES</a></li><li><a
              href="../fa-IR/sect.network-config.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.network-config.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.network-config.html">hr-HR</a></li><li><a
              href="../id-ID/sect.network-config.html">id-ID</a></li><li><a
              href="../it-IT/sect.network-config.html">it-IT</a></li><li><a
              href="../ja-JP/sect.network-config.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.network-config.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.network-config.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.network-config.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.network-config.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.network-config.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.network-config.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.network-config.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.network-config.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.network-config.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.network-config.html">zh-TW</a></li></ul></div></body></html>
