<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.3. Структура исходного пакета</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Двоичный пакет, Пакет исходных кодов, dpkg, зависимости, конфликт" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Глава 5. Пакетная система: Инструменты и основные принципы" /><link
        rel="prev"
        href="sect.package-meta-information.html"
        title="5.2. Метаинформация пакета" /><link
        rel="next"
        href="sect.manipulating-packages-with-dpkg.html"
        title="5.4. Работа с пакетами при помощи dpkg" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ru-RU/sect.source-package-structure.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.source-package-structure"></a>5.3. Структура исходного пакета</h2></div></div></div><a
          id="id-1.8.7.2"
          class="indexterm"></a><a
          id="id-1.8.7.3"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.8.7.4"></a>5.3.1. Формат</h3></div></div></div><a
            id="id-1.8.7.4.2"
            class="indexterm"></a><a
            id="id-1.8.7.4.3"
            class="indexterm"></a><a
            id="id-1.8.7.4.4"
            class="indexterm"></a><a
            id="id-1.8.7.4.5"
            class="indexterm"></a><div
            class="para">
				A source package is usually comprised of three files, a <code
              class="filename">.dsc</code>, a <code
              class="filename">.orig.tar.gz</code>, and a <code
              class="filename">.debian.tar.xz</code> (or <code
              class="filename">.diff.gz</code>). They allow creation of binary packages (<code
              class="filename">.deb</code> files described above) from the source code files of the program, which are written in a programming language.
			</div><div
            class="para">
				Файл <code
              class="filename">.dsc</code> (Debian Source Control) представлят собой текстовый файл с заголовком в формате RFC 2822 (точно так же, как файл <code
              class="filename">control</code>, рассмотренный в <a
              class="xref"
              href="sect.package-meta-information.html#sect.control">Раздел 5.2.1, «Описание: файл <code
                class="filename">control</code>»</a>), где описывается исходный пакет и указываются другие файлы, входящие в него. Он подписан сопровождающим, что гарантирует его подлинность. См. <a
              class="xref"
              href="sect.package-authentication.html">Раздел 6.5, «Проверка подлинности пакета»</a> для получения дополнительной информации по этому вопросу.
			</div><div
            class="example"><a
              id="id-1.8.7.4.8"></a><p
              class="title"><strong>Пример 5.1. Файл <code
                  class="filename">.dsc</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.65-4
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.8
Vcs-Browser: https://anonscm.debian.org/cgit/collab-maint/zim.git
Vcs-Git: https://anonscm.debian.org/git/collab-maint/zim.git
Build-Depends: debhelper (&gt;= 9), xdg-utils, python (&gt;= 2.6.6-3~), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg, dh-python
Package-List:
 zim deb x11 optional arch=all
Checksums-Sha1:
 4a9be85c98b7f4397800f6d301428d64241034ce 1899614 zim_0.65.orig.tar.gz
 0ec38c990ec7662205dd0c843bf81f9033906a2e 10332 zim_0.65-4.debian.tar.xz
Checksums-Sha256:
 5442f3334395a2beafc5b9a2bbec2e53e38270d4bad696b5c4053dd51dc1ed96 1899614 zim_0.65.orig.tar.gz
 78271df16aa166dce916b3ff4ecd705ed3a8832e49d3ef0bd8738a4fe8dd2b4f 10332 zim_0.65-4.debian.tar.xz
Files:
 63ab7a2070e6d1d3fb32700a851d7b8b 1899614 zim_0.65.orig.tar.gz
 648559b38e04eaf4f6caa97563c057ff 10332 zim_0.65-4.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Comment: Signed by Raphael Hertzog

iQEzBAEBCgAdFiEE1823g1EQnhJ1LsbSA4gdq+vCmrkFAlgzZXkACgkQA4gdq+vC
mrnyXAf+M/PzZFjqk6Hvv1QSbocIDZ3bEqRjVpNLApubsPsEZZT6yw9vypzNE2hZ
/BbLPa0Ntbhew4U+SJpuujV7VnLs9mZgOFuKRHKWYQBQ+oxw+gtM6iePwVj58aP/
LW7K5gE428ohMdjIkf42Lz4Fve3dVPgPLIzQxRZ87N6OKqmS81M6/RRIF3TS/gJp
CwpN1yifCfQs46gxL5/CgA4uhI8taz+g+8ZDd6fL5BQeFuNsgplY4QL1uGno3F7G
VY7WZhM601Re2ePnv+6vjh8kDWMjZhfB4RJy0+hHezuoVGKljyaxc1O4P/fxvXus
CEETju6cAE/HgDubDXDqExMwEd4odA==
=HUvj
-----END PGP SIGNATURE-----</pre></div></div><a
            id="id-1.8.7.4.9"
            class="indexterm"></a><div
            class="para">
				Обратите внимание, что исходный пакет тоже имеет зависимости (<code
              class="literal">Build-Depends</code>), кардинально отличающиеся от зависимостей для двоичных пакетов, поскольку они включают в себя инструменты, необходимые для компиляции программного обеспечения и сборки двоичного пакета.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ВНИМАНИЕ</em></span> Разные пространства имён</strong></p></div></div></div><div
              class="para">
				Важно отметить, что имена исходного пакета и создаваемого из него двоичного пакета не обязательно должны совпадать. Это нетрудно понять, если вы знаете, что из каждого исходного пакета может быть создано несколько двоичных пакетов. Вот почему в файле <code
                class="filename">.dsc</code> есть поля <code
                class="literal">Source</code> и <code
                class="literal">Binary</code>, где явно указываются имя исходного пакета и список создаваемых из него двоичных пакетов.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>КУЛЬТУРА</em></span> Зачем разделять на несколько пакетов</strong></p></div></div></div><div
              class="para">
				Довольно часто из исходного пакета (того или иного программного обеспечения) может создаваться несколько двоичных пакетов. Смысл разделения заключается в возможности использовать части программного обеспечения в различных контекстах. В случае динамической библиотеки целью установки может быть обеспечение работы того или иного приложения (например <span
                class="pkg pkg">libc6</span>) или разработка новой программы (тогда понадобится <span
                class="pkg pkg">libc6-dev</span>). Та же логика используется и для клиент-серверных приложений, для которых может возникнуть желание установить серверную часть на одной машине, а клиентскую на нескольких других (типичным примером являются <span
                class="pkg pkg">openssh-server</span> и <span
                class="pkg pkg">openssh-client</span>).
			</div><div
              class="para">
				Довольно часто документация предоставляется в отдельном пакете: пользователь может установить её независимо от программного обеспечения, и может в любое время удалить её для экономии места на диске. Кроме того, это также помогает сэкономить дисковое пространство на зеркалах Debian, так как пакет с документацией будет общим для всех архитектур (вместо того, чтобы дублировать документацию в пакетах для каждой архитектуры).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ПЕРСПЕКТИВА</em></span> Различные форматы исходных пакетов</strong></p></div></div></div><div
              class="para">
				Первоначально был только один формат исходных пакетов. Это формат <code
                class="literal">1.0</code>, который связывает архив <code
                class="filename">.orig.tar.gz</code> с «дебианизирующей» заплатой <code
                class="filename">.diff.gz</code> (есть также вариант, включающий единственный архив <code
                class="filename">.tar.gz</code>, который используется автоматически, если <code
                class="filename">.orig.tar.gz</code> отсутствует).
			</div><div
              class="para">
				Since Debian <span
                class="distribution distribution">Squeeze</span>, Debian developers have the option to use new formats that correct many problems of the historical format. Format <code
                class="literal">3.0 (quilt)</code> can combine multiple upstream archives in the same source package: in addition to the usual <code
                class="filename">.orig.tar.gz</code>, supplementary <code
                class="filename">.orig-<em
                  class="replaceable">component</em>.tar.gz</code> archives can be included. This is useful with software that is distributed in several upstream components but for which a single source package is desired. These archives can also be compressed with <code
                class="command">xz</code> rather than <code
                class="command">gzip</code>, which saves disk space and network resources. Finally, the monolithic patch, <code
                class="filename">.diff.gz</code> is replaced by a <code
                class="filename">.debian.tar.xz</code> archive containing the compiling instructions and a set of upstream patches contributed by the package maintainer. These last are recorded in a format compatible with <code
                class="command">quilt</code> — a tool that facilitates the management of a series of patches.
			</div></div><div
            class="para">
				Файл <code
              class="filename">.orig.tar.gz</code> — это архив, содержащий исходный код в том виде, в каком он предоставляется оригинальным разработчиком. Сопровождающим пакетов Debian не рекомендовано изменять этот архив, чтобы иметь возможность легко проверить подлинность и целостность файла (путём простого сравнения контрольной суммы), а также в угоду пожеланиям некоторых авторов.
			</div><div
            class="para">
				The <code
              class="filename">.debian.tar.xz</code> contains all of the modifications made by the Debian maintainer, especially the addition of a <code
              class="filename">debian</code> directory containing the instructions to execute to construct a Debian package.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ИНСТРУМЕНТ</em></span> Распаковка пакетов c исходным кодом</strong></p></div></div></div><a
              id="id-1.8.7.4.16.2"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.3"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.4"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.5"
              class="indexterm"></a><div
              class="para">
				При наличии исходного пакета его можно распаковать с помощью <code
                class="command">dpkg-source</code> (из пакета <span
                class="emphasis"><em>dpkg-dev</em></span>):
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg-source -x package_0.7-1.dsc</code></strong></pre><div
              class="para">
				Вы можете также использовать <code
                class="command">apt-get</code> для загрузки пакета с исходными кодами и последующей распаковки. Для этого необходимо, чтобы были раскомментированы строки <code
                class="literal">deb-src</code>, представленные в файле <code
                class="filename">/etc/apt/sources.list</code>, подробнее (для других деталей, смотри <a
                class="xref"
                href="apt.html#sect.apt-sources.list">Раздел 6.1, «Содержимое файла <code
                  class="filename">sources.list</code>»</a>). В него включён перечень хранилищ “source”, на которых находятся пакеты с исходными кодами (подразумеваются серверы, на которых расположены хранилища).
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>apt-get source <em
                    class="replaceable">пакет</em></code></strong></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.8.7.5"></a>5.3.2. Использование в Debian</h3></div></div></div><div
            class="para">
				Пакеты с исходными кодами являются основой всего в системе Debian. При помощи них собраны все остальные пакеты Debian, и любое изменение в двоичных пакетах — следствие изменений, внесенных в исходный пакет. Сопровождающие Debian работают только с исходными пакетами, однако знают, какими окажутся последствия их действий для двоичных пакетов. Так что плоды их трудов находятся в исходных пакетах: к ним можно легко вернуться, и они есть начало всего.
			</div><div
            class="para">
				При появлении новой версии пакета (исходного пакета и одного или нескольких двоичных пакетов) на сервере Debian наиболее важным является исходный пакет. Ведь именно он будет использоваться сетью машин с разными архитектурами для компиляции под различные архитектуры, поддерживаемые Debian. Тот факт, что разработчик заодно посылает один или несколько двоичных пакетов для той или иной архитектуры (как правило, это i386 или amd64) не имеет столь большого значения, поскольку они и так могли бы быть сгенерированы автоматически.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Пред.</strong>5.2. Метаинформация пакета</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>След.</strong>5.4. Работа с пакетами при помощи dpkg</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.source-package-structure.html">ar-MA</a></li><li><a
              href="../da-DK/sect.source-package-structure.html">da-DK</a></li><li><a
              href="../de-DE/sect.source-package-structure.html">de-DE</a></li><li><a
              href="../el-GR/sect.source-package-structure.html">el-GR</a></li><li><a
              href="../en-US/sect.source-package-structure.html">en-US</a></li><li><a
              href="../es-ES/sect.source-package-structure.html">es-ES</a></li><li><a
              href="../fa-IR/sect.source-package-structure.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.source-package-structure.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.source-package-structure.html">hr-HR</a></li><li><a
              href="../id-ID/sect.source-package-structure.html">id-ID</a></li><li><a
              href="../it-IT/sect.source-package-structure.html">it-IT</a></li><li><a
              href="../ja-JP/sect.source-package-structure.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.source-package-structure.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.source-package-structure.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.source-package-structure.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.source-package-structure.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.source-package-structure.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.source-package-structure.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.source-package-structure.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.source-package-structure.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.source-package-structure.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.source-package-structure.html">zh-TW</a></li></ul></div></body></html>
