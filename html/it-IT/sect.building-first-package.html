<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">15.2. Creare il primo pacchetto</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-it-IT-1.0-1" /><meta
        name="keywords"
        content="Backport, Rigenerazione, Pacchetto sorgente, Archivio, Meta-pacchetto, Sviluppatore Debian, Maintainer" /><link
        rel="home"
        href="index.html"
        title="Il manuale dell'amministratore Debian" /><link
        rel="up"
        href="debian-packaging.html"
        title="Capitolo 15. Creazione di un pacchetto Debian" /><link
        rel="prev"
        href="debian-packaging.html"
        title="Capitolo 15. Creazione di un pacchetto Debian" /><link
        rel="next"
        href="sect.setup-apt-package-repository.html"
        title="15.3. Creazione di un repository di pacchetti per APT" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/it-IT/sect.building-first-package.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Indietro</strong></a></li><li
          class="home">Il manuale dell'amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Avanti</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.building-first-package"></a>15.2. Creare il primo pacchetto</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140618335437040"></a>15.2.1. Meta-pacchetti o pacchetti finti</h3></div></div></div><div
            class="para">
				I pacchetti finti e i meta-pacchetti sono simili, entrambi non hanno contenuti, hanno però dei meta-dati che agiscono sullo stack di gestione dei pacchetti.
			</div><div
            class="para">
				Lo scopo dei pacchetti finti è quello di far credere a <code
              class="command">dpkg</code> e <code
              class="command">apt</code> che un determinato pacchetto è installato, anche se è solamente un guscio vuoto. Questo permette di soddisfare le dipendenze di un pacchetto quando il software corrispondente è installato al di là delle scopo del sistema di pacchettizzazione. Questo sistema funziona, ma dovrebbe comunque essere evitato quando possibile, dato che non c'è alcuna garanzia che il software installato manualmente si comporti esattamente come il pacchetto corrispondente e i pacchetti che dipendono da esso potrebbero non funzionerebbero correttamente.
			</div><div
            class="para">
				D'altra parte, lo scopo principale di un meta-pacchetto è quello di raggruppare una serie di dipendenze, in modo che con il meta-pacchetto si installino una serie di altri pacchetti in un unico passaggio.
			</div><div
            class="para">
				Entrambi i tipi di pacchetti possono essere creati dai comandi <code
              class="command">equivs-control</code> e <code
              class="command">equivs-build</code> (nel pacchetto <span
              class="pkg pkg">equivs</span>). Il comando <code
              class="command">equivs-control <em
                class="replaceable">file</em></code> crea un file d'intestazione del pacchetto Debian che dovrebbe essere modificato per contenere il nome del pacchetto, il numero di versione, il nome del manutentore, le dipendenze e la descrizione. Gli altri campi senza un valore predefinito sono opzionali e possono essere eliminati. I campi <code
              class="literal">Copyright</code>, <code
              class="literal">Changelog</code>, <code
              class="literal">Readme</code> e <code
              class="literal">Extra-Files</code> non sono campi standard nei pacchetti Debian, hanno senso solo nell'ambito di <code
              class="command">equivs-build</code> e non saranno conservati nelle intestazioni del pacchetto generato.
			</div><div
            class="example"><a
              id="idm140618335427552"></a><p
              class="title"><strong>Esempio 15.2. File d'intestazione del pacchetto finto <span
                  class="emphasis"><em>libxml-libxml-perl</em></span></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Section: perl
Priority: optional
Standards-Version: 3.8.4

Package: libxml-libxml-perl
Version: 1.57-1
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Depends: libxml2 (&gt;= 2.6.6)
Architecture: all
Description: Fake package - module manually installed in site_perl
 This is a fake package to let the packaging system
 believe that this Debian package is installed. 
 .
 In fact, the package is not installed since a newer version
 of the module has been manually compiled &amp; installed in the
 site_perl directory.
</pre></div></div><div
            class="para">
				Il passo successivo è quello di generare il pacchetto Debian con il comando <code
              class="command">equivs-build <em
                class="replaceable">file</em></code>. Voilà: il pacchetto viene creato nella directory corrente e può essere gestito come qualsiasi altro pacchetto Debian.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140618334282032"></a>15.2.2. Semplice file di archivio</h3></div></div></div><div
            class="para">
				Gli amministratori della Falcot Corp hanno bisogno di creare un pacchetto Debian, per facilitare la distribuzione di una serie di documenti su un gran numero di macchine. L'amministratore incaricato per questo compito prima legge la «Guida al nuovo Maintainer», quindi inizia a lavorare sul pacchetto. <div
              class="url">→ <a
                href="http://www.debian.org/doc/maint-guide/">http://www.debian.org/doc/maint-guide/</a></div>
			</div><div
            class="para">
				Il primo passo è la creazione della directory <code
              class="filename">falcot-data-1.0</code> che conterrà il sorgente del pacchetto interessato. Il nome del pacchetto sarà logicamente <code
              class="literal">falcot-data</code> con il numero di versione <code
              class="literal">1.0</code>. L'amministratore mette i file dei documenti nella sotto-directory <code
              class="filename">data</code>. Dopo viene eseguito il comando <code
              class="command">dh_make</code> (dal pacchetto <span
              class="pkg pkg">dh-make</span>) per aggiungere i file necessari per il processo di generazione del pacchetto, che saranno memorizzati nella sotto-directory <code
              class="filename">debian</code>:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd falcot-data-1.0</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>dh_make --native</code></strong>
<code
              class="computeroutput">
Type of package: single binary, indep binary, multiple binary, library, kernel module, kernel patch or cdbs?
 [s/i/m/l/k/n/b] </code><strong
              class="userinput"><code>i</code></strong>
<code
              class="computeroutput">
Maintainer name : Raphael Hertzog
Email-Address   : hertzog@debian.org
Date            : Mon, 11 Apr 2011 15:11:36 +0200
Package Name    : falcot-data
Version         : 1.0
License         : blank
Usind dpatch    : no
Type of Package : Independent
Hit &lt;enter&gt; to confirm:
Currently there is no top level Makefile. This may require additional tuning.
Done. Please edit the files in the debian/ subdirectory now. You should also
check that the falcot-data Makefiles install into $DESTDIR and not in / .
$</code></pre><div
            class="para">
				Il tipo di pacchetto selezionato (<span
              class="emphasis"><em>binario singolo</em></span>) indica che questo pacchetto sorgente genererà, a seconda dell'architettura (<code
              class="literal">Architecture: any</code>), un pacchetto binario singolo. Invece, i pacchetti di tipo <span
              class="emphasis"><em>binario indip</em></span>, creano un singolo pacchetto binario che non dipende da nessuna architettura (<code
              class="literal">Architecture: all</code>). In questo caso la scelta migliore è l'ultimo tipo di pacchetto, dato che il pacchetto contiene solo documenti e non binari. In questo modo può essere usato allo stesso modo su tutte le architetture di computer.
			</div><div
            class="para">
				Il tipo di pacchetto sorgente a <span
              class="emphasis"><em>binari multipli</em></span> genera diversi pacchetti binari. Un caso particolare, sono i sorgenti dei pacchetti di tipo <span
              class="emphasis"><em>library</em></span>, utile per le librerie condivise, in quanto hanno bisogno di seguire delle regole ben precise di pacchettizzazione. In modo simile, <span
              class="emphasis"><em>modulo del kernel</em></span> deve essere limitato ai pacchetti contenenti i moduli del kernel. Infine, <span
              class="emphasis"><em>cdbs</em></span> è uno specifico sistema di pacchettizzazione, piuttosto flessibile ma che richiede diverse conoscenze. <a
              id="idm140618334267216"
              class="indexterm"></a> <a
              id="idm140618334266576"
              class="indexterm"></a>
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGGERIMENTO</em></span> Nome ed indirizzo email del maintainer</strong></p></div></div></div><div
              class="para">
				La maggior parte dei programmi coinvolti nella manutenzione dei pacchetti cercherà il nome del maintainer nelle variabili d'ambiente <code
                class="varname">DEBFULLNAME</code> e <code
                class="varname">DEBEMAIL</code> o <code
                class="varname">EMAIL</code>. Definire questi valori eviterà di doverli digitare più volte. Se la shell utilizza di solito è la <code
                class="command">bash</code>, si può semplicemente aggiungere le seguenti due righe nei file <code
                class="filename">~/.bashrc</code> e <code
                class="filename">~/.bash_profile</code> (ovviamente bisogna sostituire i valori d'esempio):
			</div><pre
              class="programlisting">
export EMAIL="hertzog@debian.org"
export DEBFULLNAME="Raphael Hertzog"
</pre></div><div
            class="para">
				Il comando <code
              class="command">dh_make</code> crea la sotto-directory <code
              class="filename">debian</code> con all'interno molti file. Alcuni di questi sono necessari, in particolare i file <code
              class="filename">rules</code>, <code
              class="filename">control</code>, <code
              class="filename">changelog</code> e <code
              class="filename">copyright</code>. I file con estensione <code
              class="filename">.ex</code> sono file di esempio che all'occorrenza possono essere modificati (e rimossa l'estensione). Quando non sono necessari, è consigliato eliminarli. Il file <code
              class="filename">compat</code> deve essere mantenuto, in quanto è necessario per la suite di programmi <span
              class="emphasis"><em>debhelper</em></span> (che iniziano tutti con il prefisso <code
              class="command">dh_</code>) utilizzati in diverse fasi del processo di generazione del pacchetto.
			</div><div
            class="para">
				Il file <code
              class="filename">copyright</code> deve contenere le informazioni sugli autori dei documenti inclusi nel pacchetto e la relativa licenza. In questo caso si tratta di documenti interni e il loro uso è limitato all'interno dell'azienda Falcot Corp. Il file <code
              class="filename">changelog</code>, generato in maniera predefinita, è generalmente corretto; è sufficiente sostituire la frase «Initial release» con una spiegazione più dettagliata e modificare la distribuzione da <code
              class="literal">unstable</code> a <code
              class="literal">internal</code>. È stato aggiornato il file <code
              class="filename">control file</code>: la sezione è stata modificata in <span
              class="emphasis"><em>misc</em></span> e i campi <code
              class="literal">Homepage</code>, <code
              class="literal">Vcs-Git</code> e <code
              class="literal">Vcs-Browser</code> sono stati rimossi. I campi <code
              class="literal">Depends</code> sono stati completati con <code
              class="literal">iceweasel | www-browser</code> in modo da garantire la disponibilità di un browser web in grado di visualizzare i documenti nel pacchetto.
			</div><div
            class="example"><a
              id="idm140618334249024"></a><p
              class="title"><strong>Esempio 15.3. Il file <code
                  class="filename">control</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
Source: falcot-data
Section: misc
Priority: optional
Maintainer: Raphael Hertzog &lt;hertzog@debian.org&gt;
Build-Depends: debhelper (&gt;= 7.0.50~)
Standards-Version: 3.8.4

Package: falcot-data
Architecture: all
Depends: iceweasel | www-browser, ${misc:Depends}
Description: Internal Falcot Corp Documentation
 This package provides several documents describing the internal
 structure at Falcot Corp.  This includes:
  - organization diagram
  - contacts for each department.
 .
 These documents MUST NOT leave the company.
 Their use is INTERNAL ONLY.
</pre></div></div><div
            class="example"><a
              id="idm140618334246736"></a><p
              class="title"><strong>Esempio 15.4. Il file <code
                  class="filename">changelog</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
falcot-data (1.0) internal; urgency=low

  * Initial Release.
  * Let's start with few documents:
    - internal company structure;
    - contacts for each department.

 -- Raphael Hertzog &lt;hertzog@debian.org&gt;  Mon, 11 Apr 2011 20:46:33 +0200
</pre></div></div><div
            class="example"><a
              id="idm140618334244752"></a><p
              class="title"><strong>Esempio 15.5. Il file <code
                  class="filename">copyright</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
This work was packaged for Debian by Raphael Hertzog &lt;hertzog@debian.org&gt;
on Mon, 11 Apr 2011 20:46:33 +0200

Copyright:

    Copyright (C) 2004-2011 Falcot Corp

License:

    All rights reserved.
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> Il file <code
                        class="filename">Makefile</code></strong></p></div></div></div><a
              id="idm140618334241376"
              class="indexterm"></a><div
              class="para">
				Il file <code
                class="filename">Makefile</code> è uno script utilizzato dal programma <code
                class="command">make</code>, e descrive le regole su come generare un insieme di file da un altro, utilizzando le dipendenze ad albero (ad esempio, un programma può essere costruito da un insieme di file sorgenti). Il file <code
                class="filename">Makefile</code> descrive queste regole nel seguente formato:
			</div><pre
              class="programlisting">
target: source1 source2 ...
        command1
        command2
</pre><div
              class="para">
				Il significato di questa regola è il seguente: se uno dei file <code
                class="literal">sources*</code> è più recente rispetto al file <code
                class="literal">target</code>, il target deve essere generato utilizzando <code
                class="command">command1</code> e <code
                class="command">command2</code>.
			</div><div
              class="para">
				Si noti che le righe di comando devono iniziare con un carattere di tabulazione; si noti pure che quando una riga di comando inizia con il carattere trattino (<code
                class="literal">-</code>), il fallimento del comando non interrompe l'intero processo.
			</div></div><div
            class="para">
				Il file <code
              class="filename">rules</code> di solito contiene un insieme di regole utilizzate per configurare, compilare e installare il software in una sotto-directory dedicata (con il nome del pacchetto binario generato). Il contenuto di questa sotto-directory viene archiviato all'interno del pacchetto Debian, come se fosse la radice del file system. In questo caso, i file verranno installati netta sotto-directory <code
              class="filename">debian/falcot-data/usr/share/falcot-data/</code>, in modo che l'installazione del pacchetto generato metta i file in <code
              class="filename">/usr/share/falcot-data/</code>. Il file <code
              class="filename">rules</code> viene utilizzato come un <code
              class="filename">Makefile</code>, con alcuni obbiettivi predefiniti (compresi <code
              class="literal">clean</code> e <code
              class="literal">binary</code>, utilizzati rispettivamente per pulire la directory dei sorgenti e per generare il pacchetto binario).
			</div><div
            class="para">
				Anche se questo file è il cuore di tutto il processo, contiene solo il minimo indispensabile per l'esecuzione di un insieme predefinito di comandi forniti dal programma <code
              class="command">debhelper</code>. Questo è il caso per i file generati da <code
              class="command">dh_make</code>. Per installare i file interessati, bisogna semplicemente configurare il comportamento del comando <code
              class="command">dh_install</code> creando il seguente file <code
              class="filename">debian/falcot-data.install</code>:
			</div><pre
            class="programlisting">
data/* usr/share/falcot-data/
</pre><div
            class="para">
				A questo punto, il pacchetto può essere creato. Verrà comunque apportata una miglioria. Dal momento che gli amministratori vogliono che i documenti siano facilmente accessibili dal menu d'aiuto dell'ambiente grafico, si crea una voce nel sistema dei menu Debian. Questo viene fatto semplicemente rinominando il file <code
              class="filename">debian/menu.ex</code> senza la sua estensione e modificandolo come segue:
			</div><div
            class="example"><a
              id="idm140618334225952"></a><p
              class="title"><strong>Esempio 15.6. Il file <code
                  class="filename">menu</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
?package(falcot-data):needs=X11|wm section=Help\
  title="Internal Falcot Corp Documentation" \
  command="/usr/bin/x-www-browser /usr/share/falcot-data/index.html"
?package(falcot-data):needs=text section=Help\
  title="Internal Falcot Corp Documentation" \
  command="/usr/bin/www-browser /usr/share/falcot-data/index.html"
</pre></div></div><div
            class="para">
				Il campo <code
              class="literal">needs</code>, quando è impostato a <code
              class="literal">X11|wm</code> indica che questa voce ha senso solo in un'interfaccia grafica. Sarà pertanto integrato solo nei menu delle applicazioni grafiche (X11) e dei window manager (da cui la sigla <code
              class="literal">wm</code>). Il campo <code
              class="literal">section</code> indica dove verrà visualizzata la voce del menu. In questo caso, sarà visualizzata nel menu Aiuto. Il campo <code
              class="literal">title</code> contiene il testo che verrà visualizzato nel menu. In fine, il campo <code
              class="literal">command</code> indica il comando da eseguire quando l'utente seleziona la voce di menu.
			</div><div
            class="para">
				La seconda voce corrisponde alla prima, con lievi modifiche adatte alla modalità console di testo di Linux.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DEBIAN POLICY</em></span> Organizzazione del menu</strong></p></div></div></div><div
              class="para">
				I menu di Debian sono organizzati in una struttura formale, documentata nel seguente testo: <div
                class="url">→ <a
                  href="http://www.debian.org/doc/packaging-manuals/menu-policy/">http://www.debian.org/doc/packaging-manuals/menu-policy/</a></div>
			</div><div
              class="para">
				Il campo <code
                class="literal">section</code> in un file <code
                class="filename">menu</code> deve essere scelto dalla lista presente nel documento sopra citato.
			</div></div><div
            class="para">
				È sufficiente creare il file <code
              class="filename">debian/menu</code> per attivare il menu nel pacchetto, dato che il comando <code
              class="command">dh_installmenu</code> viene richiamato automaticamente da <code
              class="command">dh</code> durante il processo di creazione del pacchetto.
			</div><div
            class="para">
				Adesso il pacchetto sorgente è pronto.Tutto quello che resta da fare è generare il pacchetto binario, con lo stesso metodo usato in precedenza per la rigenerazione dei pacchetti: si esegue il comando <code
              class="command">dpkg-buildpackage -us -uc</code> all'interno della directory <code
              class="filename">falcot-data-1.0</code>.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="debian-packaging.html"><strong>Indietro</strong>Capitolo 15. Creazione di un pacchetto Debian</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.setup-apt-package-repository.html"><strong>Avanti</strong>15.3. Creazione di un repository di pacchetti per...</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.building-first-package.html">ar-MA</a></li><li><a
              href="../da-DK/sect.building-first-package.html">da-DK</a></li><li><a
              href="../de-DE/sect.building-first-package.html">de-DE</a></li><li><a
              href="../el-GR/sect.building-first-package.html">el-GR</a></li><li><a
              href="../en-US/sect.building-first-package.html">en-US</a></li><li><a
              href="../es-ES/sect.building-first-package.html">es-ES</a></li><li><a
              href="../fa-IR/sect.building-first-package.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.building-first-package.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.building-first-package.html">hr-HR</a></li><li><a
              href="../id-ID/sect.building-first-package.html">id-ID</a></li><li><a
              href="../it-IT/sect.building-first-package.html">it-IT</a></li><li><a
              href="../ja-JP/sect.building-first-package.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.building-first-package.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.building-first-package.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.building-first-package.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.building-first-package.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.building-first-package.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.building-first-package.html">zh-CN</a></li></ul></div></body></html>
