<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">14.3. Supervisione: prevenire, rilevare, dissuadere</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-it-IT-1.0-1" /><meta
        name="keywords"
        content="Firewall, Netfilter, IDS/NIDS" /><link
        rel="home"
        href="index.html"
        title="Il manuale dell'amministratore Debian" /><link
        rel="up"
        href="security.html"
        title="Capitolo 14. Sicurezza" /><link
        rel="prev"
        href="sect.firewall-packet-filtering.html"
        title="14.2. Firewall o filtraggio dei pacchetti" /><link
        rel="next"
        href="sect.selinux.html"
        title="14.4. Introduzione a SELinux" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/it-IT/sect.supervision.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.firewall-packet-filtering.html"><strong>Indietro</strong></a></li><li
          class="home">Il manuale dell'amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.selinux.html"><strong>Avanti</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.supervision"></a>14.3. Supervisione: prevenire, rilevare, dissuadere</h2></div></div></div><a
          id="idm140618334658128"
          class="indexterm"></a><a
          id="idm140618334657168"
          class="indexterm"></a><div
          class="para">
			Monitoring is an integral part of any security policy for several reasons. Among them, that the goal of security is usually not restricted to guaranteeing data confidentiality, but it also includes ensuring availability of the services. It is therefore imperative to check that everything works as expected, and to detect in a timely manner any deviant behavior or change in quality of the service(s) rendered. Monitoring activity can help detecting intrusion attempts and enable a swift reaction before they cause grave consequences. This section reviews some tools that can be used to monitor several aspects of a Debian system. As such, it completes the section dedicated to generic system monitoring in <a
            class="xref"
            href="advanced-administration.html">Capitolo 12, <em>Amministrazione avanzata</em></a>.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.logcheck"></a>14.3.1. Monitorare i log con <code
                    class="command">logcheck</code></h3></div></div></div><a
            id="idm140618334652928"
            class="indexterm"></a><a
            id="idm140618334651808"
            class="indexterm"></a><a
            id="idm140618334650368"
            class="indexterm"></a><div
            class="para">
				Il comando <code
              class="command">logcheck</code> monitora i file di log ogni ora per impostazione predefinita. Invia messaggi di log inconsueti via email all'amministratore per analisi più approfondite.
			</div><div
            class="para">
				La lista dei file monitorati è salvata in <code
              class="filename">/etc/logcheck/logcheck.logfiles</code>; i valori predefiniti funzionano bene se il file <code
              class="filename">/etc/syslog.conf</code> non è stato completamente stravolto.
			</div><div
            class="para">
				<code
              class="command">logcheck</code> lavora in uno di tre modi più o meno dettagliati: <span
              class="emphasis"><em>paranoid</em></span>, <span
              class="emphasis"><em>server</em></span> e <span
              class="emphasis"><em>workstation</em></span>. Il primo è <span
              class="emphasis"><em>molto</em></span> prolisso, e dovrebbe essere usato solo per server specifici come i firewall. Il secondo modo (predefinito) è consigliato per la maggior parte dei server. L'ultimo è progettato per le workstation, ed è ancora più conciso (filtra maggiormente i messaggi).
			</div><div
            class="para">
				In tutti e tre i casi, <code
              class="command">logcheck</code> probabilmente dovrà essere personalizzato escludendo alcuni messaggi extra (a seconda dei servizi installati), a meno che l'amministratore non voglia veramente ricevere ammassi orari di lunghe e noiose email. Poiché il meccanismo di selezione dei messaggi è piuttosto complesso, il file <code
              class="filename">/usr/share/doc/logcheck-database/README.logcheck-database.gz</code> è una lettura consigliata, anche se impegnativa.
			</div><div
            class="para">
				Le regole applicate possono essere suddivise in varie tipologie:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						quelle che qualificano il messaggio come un tentativo di intrusione (memorizzato in un file nella directory <code
                    class="filename">/etc/logcheck/cracking.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						quelle che cancellano tale qualifica (<code
                    class="filename">/etc/logcheck/cracking.ignore.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						quelle che classificano il messaggio come un allarme di sicurezza (<code
                    class="filename">/etc/logcheck/violations.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						quelle che cancellano questa classificazione (<code
                    class="filename">/etc/logcheck/violations.ignore.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						infine, quelle che si applicano ai rimanenti messaggi (considerati come <span
                    class="emphasis"><em>eventi di sistema</em></span>).
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENZIONE</em></span> Ignorare un messaggio</strong></p></div></div></div><div
              class="para">
				Tutti i messaggi etichettati come tentativo di intrusione oppure come allarme di sicurezza (seguendo una regola memorizzata in un file <code
                class="filename">/etc/logcheck/violations.d/miofile</code>) possono essere ignorati solamente tramite una regola nei file <code
                class="filename">/etc/logcheck/violations.ignore.d/miofile</code> oppure <code
                class="filename">/etc/logcheck/violations.ignore.d/miofile-<em
                  class="replaceable">estensione</em></code>.
			</div></div><div
            class="para">
				Un evento di sistema è sempre segnalato a meno che una regola in una directory <code
              class="filename">/etc/logcheck/ignore.d.{paranoid,server,workstation}/</code> stabilisca che l'evento debba essere ignorato. Le sole directory prese in considerazione sono esclusivamente quelle corrispondenti ad un livello di prolissità maggiore o uguale alla modalità di funzionamento selezionata.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGGERIMENTO</em></span> I log come sfondo dello schermo</strong></p></div></div></div><div
              class="para">
				Alcuni amministratori preferiscono vedere scorrere i messaggi di log in tempo reale; il comando <code
                class="command">root-tail</code> (nel pacchetto <span
                class="pkg pkg">root-tail</span>) può essere usato per integrare i log sullo sfondo della scrivania. Il programma <code
                class="command">xconsole</code> (nel pacchetto <span
                class="emphasis"><em>x11-apps</em></span>) può anche farli scorrere in una piccola finestra. I messaggi sono prelevati direttamente da <code
                class="command">syslogd</code> attraverso la pipe denominata <code
                class="filename">/dev/xconsole</code>.
			</div><a
              id="idm140618334624208"
              class="indexterm"></a><a
              id="idm140618334623088"
              class="indexterm"></a></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.monitoring-activity"></a>14.3.2. Attività di monitoraggio</h3></div></div></div><a
            id="idm140618334620288"
            class="indexterm"></a><a
            id="idm140618334618848"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.real-time-monitoring"></a>14.3.2.1. In tempo reale</h4></div></div></div><div
              class="para">
					<code
                class="command">top</code> è uno strumento interattivo che mostra l'elenco dei processi attualmente in esecuzione. L'ordinamento predefinito è basato sull'utilizzo corrente del processore e può essere ottenuto con il tasto <span
                class="keycap"><strong>P</strong></span>. Altri tipi di ordinamento sono per occupazione di memoria (tasto <span
                class="keycap"><strong>M</strong></span>), per tempo totale di processore (tasto <span
                class="keycap"><strong>T</strong></span>) e per identificatore di processo (tasto <span
                class="keycap"><strong>N</strong></span>). Il tasto <span
                class="keycap"><strong>r</strong></span> permette il <span
                class="emphasis"><em>renice</em></span> di un processo, cioè la variazione della sua priorità.
				</div><a
              id="idm140618334612752"
              class="indexterm"></a><div
              class="para">
					Quando il sistema sembra essere sovraccarico, <code
                class="command">top</code> è uno strumento fondamentale per capire quali processi competono per il tempo di processore o consumano troppa memoria. In particolare, spesso è interessante controllare se il processo che utilizza le risorse corrisponde realmente ad un servizio che la macchina mette a disposizione. Un processo sconosciuto in esecuzione con utente www-data dovrebbe subito saltare all'occhio ed essere controllato, dato che potenzialmente potrebbe essere l'istanza di un programma installato ed eseguito nel sistema attraverso la vulnerabilità di un'applicazione web.
				</div><div
              class="para">
					<code
                class="command">top</code> è uno strumento molto flessibile e le pagine del manuale riportano i dettagli di come modificarne la visualizzazione e adattarla alle abitudini e bisogni personali.
				</div><div
              class="para">
					Gli strumenti grafici <code
                class="command">gnome-system-monitor</code> e <code
                class="command">qps</code> sono simili a <code
                class="command">top</code> e forniscono più o meno le stesse caratteristiche.
				</div><a
              id="idm140618334607104"
              class="indexterm"></a></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.monitoring-history"></a>14.3.2.2. Storico</h4></div></div></div><a
              id="idm140618334604656"
              class="indexterm"></a><div
              class="para">
					Il carico del processore, il traffico di rete e lo spazio libero su disco sono informazioni che variano costantemente. Mantenere uno storico della loro evoluzione spesso è utile nel determinare esattamente come viene utilizzato un computer.
				</div><a
              id="idm140618334602976"
              class="indexterm"></a><a
              id="idm140618334602016"
              class="indexterm"></a><div
              class="para">
					Esistono molti strumenti dedicati a questo compito. La maggior parte può recuperare dati via SNMP (<span
                class="emphasis"><em>Simple Network Management Protocol</em></span>) al fine di centralizzare l'informazione. Un ulteriore beneficio è che si possono recuperare dati da elementi di rete che non necessariamente sono computer generici, come ad esempio switch di rete o router dedicati.
				</div><div
              class="para">
					This book deals with Munin in some detail (see <a
                class="xref"
                href="sect.monitoring.html#sect.munin">Sezione 12.4.1, «Impostazione di Munin»</a>) as part of <a
                class="xref"
                href="advanced-administration.html">Capitolo 12: «<em>Amministrazione avanzata</em>»</a>. Debian also provides a similar tool, <span
                class="pkg pkg">cacti</span>. Its deployment is slightly more complex, since it is based solely on SNMP. Despite having a web interface, grasping the concepts involved in configuration still requires some effort. Reading the HTML documentation (<code
                class="filename">/usr/share/doc/cacti/html/index.html</code>) should be considered a prerequisite.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIVA</em></span> <code
                          class="command">mrtg</code></strong></p></div></div></div><a
                id="idm140618334595072"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">mrtg</code> (nel pacchetto che ha lo stesso nome) è un vecchio strumento. Nonostante sia un po' grezzo, può aggregare dati storici e visualizzarli sotto forma di grafici. Il pacchetto comprende una serie di script dedicati alla raccolta dei dati monitorati più diffusi come il carico del processore, il traffico di rete, le visite alle pagine web e così via.
				</div><div
                class="para">
					I pacchetti <span
                  class="pkg pkg">mrtg-contrib</span> e <span
                  class="pkg pkg">mrtgutils</span> contengono script di esempio che possono essere utilizzati direttamente.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140618334590160"></a>14.3.3. Rilevare le modifiche</h3></div></div></div><div
            class="para">
				Una volta che il sistema è installato e configurato, a meno di aggiornamenti di sicurezza, la maggior parte dei file e directory rimangono statici, dati a parte. È allora interessante fare in modo che i file realmente non possano cambiare: ogni variazione inattesa dovrebbe perciò catturare la nostra attenzione. Questa sezione presenta alcuni strumenti che permettono di monitorare i file e di avvisare l'amministratore quando si verificano cambiamenti non previsti (o semplicemente di elencarli).
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.debsums"></a>14.3.3.1. Controllo dei pacchetti: <code
                      class="command">debsums</code> e i suoi limiti</h4></div></div></div><a
              id="idm140618334586768"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>APPROFONDIMENTI</em></span> Proteggere contro le modifiche degli autori originali</strong></p></div></div></div><div
                class="para">
					<code
                  class="command">debsums</code> è utile nel segnalare variazioni ai file forniti dai pacchetti Debian, ma è inutile se il pacchetto stesso è compromesso, per esempio quando il mirror è compromesso. Proteggersi da questa tipologia di attacchi implica l'uso del sistema di verifica delle firme digitali di APT (vedere <a
                  class="xref"
                  href="sect.package-authentication.html">Sezione 6.5, «Controllare l'autenticità dei pacchetti»</a>), e fare in modo di installare solamente i pacchetti da un'origine certificata.
				</div></div><div
              class="para">
					<code
                class="command">debsums</code> è uno strumento interessante perché permette di rilevare quali file installati sono stati modificati (potenzialmente da un autore di un attacco), anche se questo dev'essere preso con le pinze. Primo, perché non tutti i pacchetti Debian forniscono le impronte digitali richieste da questo programma (quando esistono si trovano in <code
                class="filename">/var/lib/dpkg/info/<em
                  class="replaceable">pacchetto</em>.md5sums</code>). <a
                id="idm140618334580528"
                class="indexterm"></a> <a
                id="idm140618334579888"
                class="indexterm"></a> <a
                id="idm140618334579248"
                class="indexterm"></a> <a
                id="idm140618334578608"
                class="indexterm"></a> Promemoria: l'impronta digitale è un valore, spesso numerico (anche se in notazione esadecimale), che contiene una specie di firma del contenuto di un file. Questa firma è calcolata con un algoritmo (MD5 oppure SHA1 sono gli esempi più diffusi) che garantisce con buona probabilità che anche il più piccolo cambiamento nel contenuto del file porti ad una variazione nell'impronta digitale; è conosciuto come «effetto valanga». Ciò permette di usare un'impronta numerica semplice per verificare se il contenuto di un file è stato alterato. Questi algoritmi non sono reversibili; in altre parole, per la maggior parte di questi, conoscere un'impronta digitale non permette di ricavarne il contenuto corrispondente. Recenti progressi matematici sembra abbiano però indebolito la sicurezza di questi principi, ma il loro uso finora non è stato messo in discussione, dal momento che sembra ancora piuttosto difficile creare contenuti differenti con la stessa impronta digitale.
				</div><div
              class="para">
					Oltretutto, i file <code
                class="filename">md5sums</code> vengono memorizzati nei dischi fissi; un autore minuzioso di un attacco perciò aggiornerà questi file in modo che contengano le nuove impronte per i file modificati.
				</div><div
              class="para">
					Il primo inconveniente può essere evitato chiedendo a <code
                class="command">debsums</code> di basare i suoi controlli su un pacchetto <code
                class="filename">.deb</code> invece di affidarsi al file <code
                class="filename">md5sums</code>. Ma questo richiede di scaricare preventivamente i corrispondenti file <code
                class="filename">.deb</code>:
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get --reinstall -d install `debsums -l`</code></strong>
<code
                class="computeroutput">[ ... ]
# </code><strong
                class="userinput"><code>debsums -p /var/cache/apt/archives -g</code></strong>
</pre><div
              class="para">
					È anche interessante notare che, nella configurazione predefinita, <code
                class="command">debsums</code> genera automaticamente i file <code
                class="filename">md5sums</code> mancanti quando un pacchetto viene installato tramite APT.
				</div><div
              class="para">
					Il secondo problema può essere evitato in maniera analoga: il controllo viene semplicemente basato su un file <code
                class="filename">.deb</code> vergine. Poiché ciò implica di avere tutti i file <code
                class="filename">.deb</code> dei pacchetti installati, ed essere sicuri della loro integrità, la soluzione più semplice è di appoggiarsi ad un mirror Debian. Questa operazione talvolta può essere lenta e noiosa, e non dovrebbe essere una tecnica proattiva da utilizzare sempre e in modo automatico.
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get --reinstall -d install `grep-status -e 'Status: install ok installed' -n -s Package`</code></strong>
<code
                class="computeroutput">[ ... ]
# </code><strong
                class="userinput"><code>debsums -p /var/cache/apt/archives --generate=all</code></strong>
</pre><div
              class="para">
					Da notare che questo esempio utilizza il comando <code
                class="command">grep-status</code> del pacchetto <span
                class="pkg pkg">dctrl-tools</span>, che non è installato in modo predefinito.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140618334564224"></a>14.3.3.2. Monitorare i file: AIDE</h4></div></div></div><a
              id="idm140618334563424"
              class="indexterm"></a><div
              class="para">
					Lo strumento AIDE (<span
                class="emphasis"><em>Advanced Intrusion Detection Environment</em></span>) permette di verificare l'integrità dei file e rileva tutti i cambiamenti rispetto ad una immagine valida archiviata del sistema. Questa immagine viene memorizzata in un database (<code
                class="filename">/var/lib/aide/aide.db</code>) contenente le informazioni significative di tutti i file del sistema (impronte digitali, permessi, data e ora e così via). Questo database viene generato inizialmente con <code
                class="command">aideinit</code>; esso viene poi utilizzato su base giornaliera (dallo script <code
                class="filename">/etc/cron.daily/aide</code>) per verificare che non sia cambiato nulla di significativo. Quando viene rilevata una modifica, AIDE la elenca nei file di log (<code
                class="filename">/var/log/aide/*.log</code>) e invia i risultati via email all'amministratore.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>IN PRATICA</em></span> Proteggere il database</strong></p></div></div></div><div
                class="para">
					Dal momento che AIDE usa un database locale per confrontare lo stato dei file, l'affidabilità dei suoi risultati è direttamente legata alla validità del suo database. Se un autore di un attacco acquisisce i permessi di root su un sistema compromesso, sarà in grado di sostituire il database per nascondere le sue tracce. Una possibile soluzione è quella di salvare i relativi dati su un supporto a sola lettura.
				</div></div><div
              class="para">
					Sono presenti molte opzioni in <code
                class="filename">/etc/default/aide</code> per modificare il comportamento del pacchetto <span
                class="pkg pkg">aide</span>. La configurazione vera e propria di AIDE viene memorizzata in <code
                class="filename">/etc/aide/aide.conf</code> e <code
                class="filename">/etc/aide/aide.conf.d/</code> (in realtà, questi file vengono utilizzati da <code
                class="command">update-aide.conf</code> per generare <code
                class="filename">/var/lib/aide/aide.conf.autogenerated</code>). La configurazione indica quali proprietà di quali file devono essere controllate. Per esempio, il contenuto dei file di log cambia regolarmente, e tali cambiamenti possono essere ignorati fino a quando i permessi di questi file rimangono invariati, ma sia il contenuto che i permessi dei programmi eseguibili devono rimanere costanti. Anche se non molto complessa, la sintassi della configurazione non è del tutto intuitiva, ed è quindi consigliato leggere la pagina di manuale <span
                class="citerefentry"><span
                  class="refentrytitle">aide.conf</span>(5)</span>.
				</div><div
              class="para">
					Una nuova versione del database è generata giornalmente in <code
                class="filename">/var/lib/aide/aide.db.new</code>; se tutte le variazioni raccolte sono legittime, viene usato per sostituire il database di riferimento.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIVE</em></span> Tripwire e Samhain</strong></p></div></div></div><div
                class="para">
					Tripwire è molto simile ad AIDE; anche la sintassi del file di configurazione è bene o male la stessa. La principale novità fornita da <span
                  class="pkg pkg">tripwire</span> è il meccanismo di firma del file di configurazione, affinché un autore di un attacco non possa associarlo a una diversa versione del database di riferimento.
				</div><div
                class="para">
					Anche Samhain offre caratteristiche simili, oltre ad alcune funzioni per permettere la rilevazione dei rootkit (vedere il riquadro APPROFODNIMENTI). Può anche essere distribuito globalmente in rete, memorizzando i suoi risultati in un server centrale (con firma).
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>APPROFONDIMENTI</em></span> I pacchetti <span
                          class="pkg pkg">checksecurity</span> e <span
                          class="pkg pkg">chkrootkit</span>/<span
                          class="pkg pkg">rkhunter</span> </strong></p></div></div></div><a
                id="idm140618313876176"
                class="indexterm"></a><div
                class="para">
					Il primo di questi pacchetti contiene numerosi script brevi che eseguono controlli di base sul sistema (password vuote, nuovi file con setuid e così via) e avvertono l'amministratore se necessario. Nonostante il suo nome esplicito, un amministratore non dovrebbe affidarsi solamente ad esso per garantire la sicurezza di un sistema Linux.
				</div><div
                class="para">
					I pacchetti <span
                  class="pkg pkg">chkrootkit</span> e <span
                  class="pkg pkg">rkhunter</span> permettono di cercare <span
                  class="emphasis"><em>rootkit</em></span> potenzialmente installati nel sistema. Come promemoria, un rootkit è una parte di software progettata per nascondere il fatto che il sistema è compromesso mentre mantiene in modo discreto il controllo sulla macchina. I test non sono affidabili al 100%, ma solitamente riescono ad attirare l'attenzione dell'amministratore su potenziali problemi.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.intrusion-detection"></a>14.3.4. Rilevare intrusioni (IDS/NIDS)</h3></div></div></div><a
            id="idm140618313869552"
            class="indexterm"></a><a
            id="idm140618313868592"
            class="indexterm"></a><a
            id="idm140618313867664"
            class="indexterm"></a><a
            id="idm140618313866704"
            class="indexterm"></a><a
            id="idm140618313865776"
            class="indexterm"></a><a
            id="idm140618313864816"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> «Denial of service»</strong></p></div></div></div><a
              id="idm140618313862256"
              class="indexterm"></a><div
              class="para">
				Un attacco «denial of service» ha un solo scopo: bloccare la disponibilità di un servizio. Che un attacco di questo tipo implichi il sovraccarico del server tramite interrogazioni o lo sfruttamento di un bug, il risultato finale è il medesimo: il servizio non è più fruibile. Gli utenti ordinari sono scontenti, e il soggetto che ospita il servizio di rete preso di mira subisce una perdita di reputazione (e probabilmente di ricavi, per esempio se il servizio è un sito di e-commerce).
			</div><div
              class="para">
				Un attacco di questo tipo si presenta talvolta «distribuito»; di solito si causa un sovraccarico del server attraverso una grande quantità di interrogazioni provenienti da numerose sorgenti distinte portando all'incapacità di rispondere alle interrogazioni legittime. A queste tipologie di attacchi sono stati associati acronimi ben conosciuti: <acronym
                class="acronym">DoS</acronym> e <acronym
                class="acronym">DDoS</acronym> (a seconda che il «denial of service» sia o meno distribuito).
			</div></div><div
            class="para">
				<code
              class="command">snort</code> (nel pacchetto Debian con lo stesso nome) è un NIDS: un <span
              class="emphasis"><em>Network Intrusion Detection System</em></span>. La sua funzione è quella di mettersi in ascolto sulla rete e cercare di rilevare tentativi di infiltrazione o atti ostili (inclusi attacchi «denial of service»). Tutti questi eventi vengono raccolti e inviati su base giornaliera all'amministratore attraverso un riassunto delle ultime 24 ore.
			</div><a
            id="idm140618313856608"
            class="indexterm"></a><div
            class="para">
				La configurazione consiste nel descrivere l'intervallo di indirizzi che la rete locale ricopre. In pratica, questo intervallo individua l'insieme degli obiettivi del potenziale attacco. Altri parametri importanti vengono configurati tramite <code
              class="command">dpkg-reconfigure snort</code>, compresa l'interfaccia di rete da monitorare. Questa spesso sarà <code
              class="literal">eth0</code> per una connessione Ethernet, ma esistono altre possibilità come <code
              class="literal">ppp0</code> per una connessione ADSL o PSTN (<span
              class="emphasis"><em>Public Switched Telephone Network</em></span>, le care vecchie connessioni dialup), oppure anche <code
              class="literal">wlan0</code> per alcune schede di rete wireless.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>APPROFONDIMENTI</em></span> Integrazione con <code
                        class="command">prelude</code></strong></p></div></div></div><div
              class="para">
				Prelude permette il monitoraggio centralizzato delle informazioni di sicurezza. La sua architetture modulare fornisce un server (il <span
                class="emphasis"><em>manager</em></span> in <span
                class="pkg pkg">prelude-manager</span>) che raccoglie gli allarmi generati da <span
                class="emphasis"><em>sensori</em></span> di varie tipologie.
			</div><div
              class="para">
				Snort can be configured as such a sensor. Other possibilities include <span
                class="emphasis"><em>prelude-lml</em></span> (<span
                class="emphasis"><em>Log Monitor Lackey</em></span>) which monitors log files (in a manner similar to <code
                class="command">logcheck</code>, described in <a
                class="xref"
                href="sect.supervision.html#sect.logcheck">Sezione 14.3.1, «Monitorare i log con <code
                  class="command">logcheck</code>»</a>).
			</div><a
              id="idm140618313846208"
              class="indexterm"></a></div><div
            class="para">
				Il file di configurazione di <code
              class="command">snort</code> (<code
              class="filename">/etc/snort/snort.conf</code>) è molto corposo, e i ricchi commenti inclusi descrivono ogni direttiva in ampio dettaglio. Per trarne vantaggio al meglio è necessario leggerlo tutto e poi adattarlo al singolo caso. Per esempio, indicare quali macchine ospitano quali servizi riesce a ridurre il numero di episodi che <code
              class="command">snort</code> riporterà, visto che un attacco «denial of service» su una macchina desktop è molto meno critico rispetto ad uno su un server DNS. Un'altra interessante direttiva permette di memorizzare la corrispondenza tra indirizzi IP e MAC (questi ultimi identificano univocamente una scheda di rete), così da poter rilevare gli attacchi di <span
              class="emphasis"><em>ARP spoofing</em></span> attraverso i quali una macchina compromessa cerca di mascherarsi come un'altra, ad esempio un server cruciale.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENZIONE</em></span> Raggio d'azione</strong></p></div></div></div><div
              class="para">
				L'efficacia di <code
                class="command">snort</code> è limitata dal traffico che transita sull'interfaccia di rete monitorata. Ovviamente non sarà in grado di rilevare alcunché se non può osservare il traffico reale. Quando è collegato ad uno switch di rete, rileverà quindi solo gli attacchi alla macchina nella quale è in esecuzione, cosa che probabilmente non è ciò che si desidera. La macchina che ospita <code
                class="command">snort</code> dovrà perciò essere connessa ad una porta «mirror» dello switch, che è solitamente riservata a collegare altri switch e quindi rileva il traffico complessivo.
			</div><div
              class="para">
				Per le piccole reti basate su hub di rete, il problema non c'è, dato che tutte le macchine vedono tutto il traffico.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.firewall-packet-filtering.html"><strong>Indietro</strong>14.2. Firewall o filtraggio dei pacchetti</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.selinux.html"><strong>Avanti</strong>14.4. Introduzione a SELinux</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.supervision.html">ar-MA</a></li><li><a
              href="../da-DK/sect.supervision.html">da-DK</a></li><li><a
              href="../de-DE/sect.supervision.html">de-DE</a></li><li><a
              href="../el-GR/sect.supervision.html">el-GR</a></li><li><a
              href="../en-US/sect.supervision.html">en-US</a></li><li><a
              href="../es-ES/sect.supervision.html">es-ES</a></li><li><a
              href="../fa-IR/sect.supervision.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.supervision.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.supervision.html">hr-HR</a></li><li><a
              href="../id-ID/sect.supervision.html">id-ID</a></li><li><a
              href="../it-IT/sect.supervision.html">it-IT</a></li><li><a
              href="../ja-JP/sect.supervision.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.supervision.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.supervision.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.supervision.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.supervision.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.supervision.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.supervision.html">zh-CN</a></li></ul></div></body></html>
