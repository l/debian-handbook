<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. Meta-informazioni sul pacchetto</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-it-IT-1.0-1" /><meta
        name="keywords"
        content="Pacchetto binario, Pacchetto sorgente, dpkg, dipendenze, conflitto" /><link
        rel="home"
        href="index.html"
        title="Il manuale dell'amministratore Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Capitolo 5. Sistema dei pacchetti: strumenti e principi fondamentali" /><link
        rel="prev"
        href="packaging-system.html"
        title="Capitolo 5. Sistema dei pacchetti: strumenti e principi fondamentali" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. Struttura di un pacchetto sorgente" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/it-IT/sect.package-meta-information.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Indietro</strong></a></li><li
          class="home">Il manuale dell'amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Avanti</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.package-meta-information"></a>5.2. Meta-informazioni sul pacchetto</h2></div></div></div><a
          id="idm140108839112416"
          class="indexterm"></a><a
          id="idm140108839111488"
          class="indexterm"></a><div
          class="para">
			The Debian package is not only an archive of files intended for installation. It is part of a larger whole, and it describes its relationship with other Debian packages (dependencies, conflicts, suggestions). It also provides scripts that enable the execution of commands at different stages in the package's lifecycle (installation, removal, upgrades). These data are used by the package management tools but are not part of the packaged software; they are, within the package, what is called its “meta-information” (information about other information).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.control"></a>5.2.1. Descrizione: il file <code
                    class="filename">control</code></h3></div></div></div><a
            id="idm140108836893408"
            class="indexterm"></a><a
            id="idm140108836892480"
            class="indexterm"></a><a
            id="idm140108836891040"
            class="indexterm"></a><div
            class="para">
				This file uses a structure similar to email headers (as defined by RFC 2822). For example, for <span
              class="pkg pkg">apt</span>, the <code
              class="filename">control</code> file looks like the following:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.0.9.6
Installed-Size: 3788
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Depends: libapt-pkg4.12 (&gt;= 1.0.9.6), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:4.1.1), libstdc++6 (&gt;= 4.9), debian-archive-keyring, gnupg
Suggests: aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), apt-doc, python-apt
Conflicts: python-apt (&lt;&lt; 0.7.93.2~)
Breaks: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 role::shared-lib, scope::application, scope::utility, sound::player,
 suite::debian, use::downloading, use::organizing, use::searching,
 works-with::audio, works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.0.9.6_amd64.deb
Size: 1107560
MD5sum: a325ccb14e69fef2c50da54e035a4df4
SHA1: 635d09fcb600ec12810e3136d51e696bcfa636a6
SHA256: 371a559ce741394b59dbc6460470a9399be5245356a9183bbeea0f89ecaabb03</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> RFC — Standard per Internet</strong></p></div></div></div><a
              id="idm140108836883520"
              class="indexterm"></a><a
              id="idm140108836882560"
              class="indexterm"></a><div
              class="para">
				RFC è l'acronimo di «Request For Comments» («Richiesta di commenti»). Una RFC è generalmente un documento tecnico che descrive ciò che diventerà uno standard per Internet. Prima di diventare standardizzati e congelati, questi standard sono sottoposti a una revisione pubblica (da cui il loro nome). La IETF (Internet Engineering Task Force) decide sull'evoluzione e sullo stato di questi documenti (proposta di standard, bozza di standard, standard).
			</div><div
              class="para">
				RFC 2026 definisce la procedura per la standardizzazione dei protocolli Internet. <div
                class="url">→ <a
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108836879392"></a>5.2.1.1. Dipendenze: il campo <code
                      class="literal">Depends</code></h4></div></div></div><a
              id="idm140108836878272"
              class="indexterm"></a><a
              id="idm140108852725568"
              class="indexterm"></a><a
              id="idm140108852724320"
              class="indexterm"></a><div
              class="para">
					The dependencies are defined in the <code
                class="literal">Depends</code> field in the package header. This is a list of conditions to be met for the package to work correctly — this information is used by tools such as <code
                class="command">apt</code> in order to install the required libraries, in appropriate versions fulfilling the dependencies of the package to be installed. For each dependency, it is possible to restrict the range of versions that meet that condition. In other words, it is possible to express the fact that we need the package <span
                class="pkg pkg">libc6</span> in a version equal to or greater than “2.15” (written “<code
                class="command">libc6 (&gt;= 2.15)</code>”). Version comparison operators are as follows:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: minore;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: minore o uguale;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: equal to (note that “<code
                      class="literal">2.6.1</code>” is not equal to “<code
                      class="literal">2.6.1-1</code>”);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: maggiore o uguale;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: maggiore.
						</div></li></ul></div><div
              class="para">
					In a list of conditions to be met, the comma serves as a separator. It must be interpreted as a logical “and”. In conditions, the vertical bar (“|”) expresses a logical “or” (it is an inclusive “or”, not an exclusive “either/or”). Carrying greater priority than “and”, it can be used as many times as necessary. Thus, the dependency “(A or B) and C” is written <code
                class="command">A | B, C</code>. In contrast, the expression “A or (B and C)” should be written as “(A or B) and (A or C)”, since the <code
                class="literal">Depends</code> field does not tolerate parentheses that change the order of priorities between the logical operators “or” and “and”. It would thus be written <code
                class="command">A | B, A | C</code>. <div
                class="url">→ <a
                  href="http://www.debian.org/doc/debian-policy/ch-relationships.html">http://www.debian.org/doc/debian-policy/ch-relationships.html</a></div>
				</div><a
              id="idm140108852708128"
              class="indexterm"></a><div
              class="para">
					The dependencies system is a good mechanism for guaranteeing the operation of a program, but it has another use with “meta-packages”. These are empty packages that only describe dependencies. They facilitate the installation of a consistent group of programs preselected by the meta-package maintainer; as such, <code
                class="command">apt-get install <em
                  class="replaceable">meta-package</em></code> will automatically install all of these programs using the meta-package's dependencies. The <span
                class="pkg pkg">gnome</span>, <span
                class="pkg pkg">kde-full</span> and <span
                class="pkg pkg">linux-image-amd64</span> packages are examples of meta-packages.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>POLICY DEBIAN</em></span> <code
                          class="literal">Pre-Depends</code>, più esigente di <code
                          class="literal">Depends</code></strong></p></div></div></div><a
                id="idm140108852701712"
                class="indexterm"></a><a
                id="idm140108852700464"
                class="indexterm"></a><div
                class="para">
					“Pre-dependencies”, which are listed in the “<code
                  class="literal">Pre-Depends</code>” field in the package headers, complete the normal dependencies; their syntax is identical. A normal dependency indicates that the package in question must be unpacked and configured before configuration of the package declaring the dependency. A pre-dependency stipulates that the package in question must be unpacked and configured before execution of the pre-installation script of the package declaring the pre-dependency, that is before its installation.
				</div><div
                class="para">
					Una pre-dipendenza è molto forte per <code
                  class="command">apt</code> perché aggiunge un vincolo stretto sull'ordine dei pacchetti da installare. Pertanto, le pre-dipendenze sono scoraggiate se non assolutamente necessarie. È anche consigliato consultare altri sviluppatori in <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> prima di aggiungere una pre-dipendenza. In genere è possibile trovare un'altra soluzione per aggirare il problema.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>POLICY DEBIAN</em></span> I campi <code
                          class="literal">Recommends</code>, <code
                          class="literal">Suggests</code> e <code
                          class="literal">Enhances</code></strong></p></div></div></div><a
                id="idm140108852693808"
                class="indexterm"></a><a
                id="idm140108852692560"
                class="indexterm"></a><div
                class="para">
					I campi <code
                  class="literal">Recommends</code> e <code
                  class="literal">Suggests</code> descrivono dipendenze non obbligatorie. Le dipendenze «raccomandate», le più importanti, migliorano considerevolmente le funzionalità offerte dal pacchetto, ma non sono indispensabili al suo funzionamento. Le dipendenze «consigliate», di importanza secondaria, indicano che certi pacchetti possono integrare o aumentare la loro rispettiva utilità, ma è perfettamente ragionevole installarne uno senza gli altri.
				</div><div
                class="para">
					Si dovrebbe sempre installare i pacchetti «raccomandati», a meno che non si sappia esattamente perché non se ne ha bisogno. Al contrario, non è necessario installare i pacchetti «consigliati» a meno che non si sappia perché se ne ha bisogno.
				</div><a
                id="idm140108852688736"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Enhances</code> field also describes a suggestion, but in a different context. It is indeed located in the suggested package, and not in the package that benefits from the suggestion. Its interest lies in that it is possible to add a suggestion without having to modify the package that is concerned. Thus, all add-ons, plug-ins, and other extensions of a program can then appear in the list of suggestions related to the software. Although it has existed for several years, this last field is still largely ignored by programs such as <code
                  class="command">apt-get</code> or <code
                  class="command">synaptic</code>. Its purpose is for a suggestion made by the <code
                  class="literal">Enhances</code> field to appear to the user in addition to the traditional suggestions — found in the <code
                  class="literal">Suggests</code> field.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108852683840"></a>5.2.1.2. Conflitti: il campo <code
                      class="literal">Conflicts</code></h4></div></div></div><a
              id="idm140108852682720"
              class="indexterm"></a><a
              id="idm140108852681760"
              class="indexterm"></a><a
              id="idm140108852680512"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Conflicts</code> field indicates when a package cannot be installed simultaneously with another. The most common reasons for this are that both packages include a file of the same name, or provide the same service on the same TCP port, or would hinder each other's operation.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> si rifiuterà di installare un pacchetto che provoca un conflitto con un pacchetto già installato, a meno che il nuovo pacchetto non specifichi che «sostituisce» il pacchetto installato, nel qual caso <code
                class="command">dpkg</code> sceglierà di sostituire il vecchio pacchetto con quello nuovo. <code
                class="command">apt-get</code> segue sempre le istruzioni: se si sceglie di installare un nuovo pacchetto, offrirà automaticamente di disinstallare il pacchetto che crea un problema.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108852675392"></a>5.2.1.3. Incompatibilità: il campo <code
                      class="literal">Breaks</code></h4></div></div></div><a
              id="idm140108852674304"
              class="indexterm"></a><a
              id="idm140108852673344"
              class="indexterm"></a><a
              id="idm140108852672096"
              class="indexterm"></a><div
              class="para">
					Il campo <code
                class="literal">Breaks</code> ha un effetto simile a <code
                class="literal">Conflicts</code>, ma con un significato speciale. Segnala che l'installazione di un pacchetto «renderà difettoso» un altro pacchetto (o delle sue versioni particolari). In generale, questa incompatibilità tra due pacchetti è transitoria e la relazione <code
                class="literal">Breaks</code> fa specifico riferimento alle versioni incompatibili.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> si rifiuterà di installare un pacchetto che rende difettoso un pacchetto già installato e <code
                class="command">apt-get</code> cercherà di risolvere il problema aggiornando il pacchetto che sarebbe reso difettoso a una nuova versione (che si suppone corretta e, perciò, di nuovo compatibile).
				</div><div
              class="para">
					Questo tipo di situazione può accadere in caso di aggiornamenti senza compatibilità all'indietro: questo è il caso di una nuova versione che non funziona più insieme alla vecchia versione e causa un malfunzionamento in un altro programma senza avere accorgimenti speciali. Il campo <code
                class="literal">Breaks</code> evita che l'utente incontri tali problemi.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108852665568"></a>5.2.1.4. Oggetti forniti: il campo <code
                      class="literal">Provides</code></h4></div></div></div><a
              id="idm140108852664480"
              class="indexterm"></a><div
              class="para">
					Questo campo introduce il concetto molto interessante di «pacchetto virtuale». Ha molti ruoli, ma due sono particolarmente importanti. Il primo ruolo consiste nell'usare un pacchetto virtuale per associare ad esso un servizio generico (il pacchetto «fornisce» il servizio). Il secondo indica che un pacchetto sostituisce completamente un altro e che per questo scopo può anche soddisfare le dipendenze che l'altro soddisferebbe. Perciò è possibile creare un pacchetto sostitutivo senza dover usare il solito nome di pacchetto.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABOLARIO</em></span> Meta-pacchetto e pacchetto virtuale</strong></p></div></div></div><a
                id="idm140108836342128"
                class="indexterm"></a><a
                id="idm140108836341168"
                class="indexterm"></a><a
                id="idm140108836339728"
                class="indexterm"></a><div
                class="para">
					È essenziale distinguere chiaramente i meta-pacchetti dai pacchetti virtuali. I primi sono pacchetti reali (che comprendono dei file <code
                  class="filename">.deb</code> reali), il cui unico scopo è di esprimere dipendenze.
				</div><div
                class="para">
					I pacchetti virtuali, invece, non esistono fisicamente; sono solo un mezzo per identificare pacchetti reali in base a criteri comuni e logici (servizio fornito, compatibilità con un programma standard o con un pacchetto preesistente, ecc.).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140108836336832"></a>5.2.1.4.1. Fornire un «servizio»</h5></div></div></div><div
                class="para">
						Let us discuss the first case in greater detail with an example: all mail servers, such as <span
                  class="pkg pkg">postfix</span> or <span
                  class="pkg pkg">sendmail</span> are said to “provide” the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. Thus, any package that needs this service to be functional (e.g. a mailing list manager, such as <span
                  class="pkg pkg">smartlist</span> or <span
                  class="pkg pkg">sympa</span>) simply states in its dependencies that it requires a <span
                  class="pkg pkg">mail-transport-agent</span> instead of specifying a large yet incomplete list of possible solutions (e.g. <code
                  class="command">postfix | sendmail | exim4 | …</code>). Furthermore, it is useless to install two mail servers on the same machine, which is why each of these packages declares a conflict with the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. A conflict between a package and itself is ignored by the system, but this technique will prohibit the installation of two mail servers side by side.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>POLICY DEBIAN</em></span> Elenco di pacchetti virtuali</strong></p></div></div></div><a
                  id="idm140108836329056"
                  class="indexterm"></a><div
                  class="para">
						For virtual packages to be useful, everyone must agree on their name. This is why they are standardized in the Debian Policy. The list includes among others <span
                    class="pkg pkg">mail-transport-agent</span> for mail servers, <span
                    class="pkg pkg">c-compiler</span> for C programming language compilers, <span
                    class="pkg pkg">www-browser</span> for web browsers, <span
                    class="pkg pkg">httpd</span> for web servers, <span
                    class="pkg pkg">ftp-server</span> for FTP servers, <span
                    class="pkg pkg">x-terminal-emulator</span> for terminal emulators in graphical mode (<code
                    class="command">xterm</code>), and <span
                    class="pkg pkg">x-window-manager</span> for window managers.
					</div><div
                  class="para">
						The full list can be found on the Web. <div
                    class="url">→ <a
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140108836320464"></a>5.2.1.4.2. Interscambiabilità con un altro pacchetto</h5></div></div></div><div
                class="para">
						The <code
                  class="literal">Provides</code> field is also interesting when the content of a package is included in a larger package. For example, the <span
                  class="pkg pkg">libdigest-md5-perl</span> Perl module was an optional module in Perl 5.6, and has been integrated as standard in Perl 5.8 (and later versions, such as 5.20 present in <span
                  class="distribution distribution">Jessie</span>). As such, the package <span
                  class="pkg pkg">perl</span> has since version 5.8 declared <code
                  class="literal">Provides: libdigest-md5-perl</code> so that the dependencies on this package are met if the user has Perl 5.8 (or newer). The <span
                  class="pkg pkg">libdigest-md5-perl</span> package itself has eventually been deleted, since it no longer had any purpose when old Perl versions were removed.
					</div><div
                class="figure"><a
                  id="idm140108836315360"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="Uso del campo Provides per non lasciare dipendenze non soddisfatte" /></div></div><p
                  class="title"><strong>Figura 5.1. Uso del campo <code
                      class="literal">Provides</code> per non lasciare dipendenze non soddisfatte</strong></p></div><div
                class="para">
						Questa caratteristica è molto utile dal momento che non è mai possibile anticipare le variabilità dello sviluppo ed è necessario essere in grado di adattarsi ai cambiamenti di nome del software obsoleto e ad altre sostituzioni automatiche.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>FONDAMENTALI</em></span> Perl, un linguaggio di programmazione</strong></p></div></div></div><a
                  id="idm140108836310320"
                  class="indexterm"></a><a
                  id="idm140108836309360"
                  class="indexterm"></a><div
                  class="para">
						Perl (Practical Extraction and Report Language) è un linguaggio di programmazione molto popolare. Ha molti moduli pronti all'uso che coprono un vasto spettro di applicazioni e che sono distribuiti tramite i server CPAN (Comprehensive Perl Archive Network), una completa rete di pacchetti Perl. <div
                    class="url">→ <a
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    class="url">→ <a
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						Dal momento che è un linguaggio interpretato, un programma scritto in Perl non richiede una compilazione prima dell'esecuzione. Questo è il motivo per cui sono chiamati «script Perl».
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        id="idm140108836305232"></a>5.2.1.4.3. Past Limitations</h5></div></div></div><div
                class="para">
						Virtual packages used to suffer from some limitations, the most significant of which was the absence of a version number. To return to the previous example, a dependency such as <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code>, despite the presence of Perl 5.10, would never be considered as satisfied by the packaging system — while in fact it most likely is satisfied. Unaware of this, the package system chose the least risky option, assuming that the versions do not match.
					</div><div
                class="para">
						This limitation has been lifted in <span
                  class="pkg pkg">dpkg</span> 1.17.11, and is no longer relevant in Jessie.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108836301680"></a>5.2.1.5. Sostituzione di file: il campo <code
                      class="literal">Replaces</code></h4></div></div></div><a
              id="idm140108836300592"
              class="indexterm"></a><a
              id="idm140108836299632"
              class="indexterm"></a><a
              id="idm140108836298384"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Replaces</code> field indicates that the package contains files that are also present in another package, but that the package is legitimately entitled to replace them. Without this specification, <code
                class="command">dpkg</code> fails, stating that it can not overwrite the files of another package (technically, it is possible to force it to do so with the <code
                class="literal">--force-overwrite</code> option, but that's not considered standard operation). This allows identification of potential problems and requires the maintainer to study the matter prior to choosing whether to add such a field.
				</div><div
              class="para">
					L'uso di questo campo è giustificato quando il nome del pacchetto cambia o quando un pacchetto è incluso in un altro. Questo succede anche quando il manutentore decide di distribuire i file in maniera differente tra i vari pacchetti binari prodotti dallo stesso pacchetto sorgente: un file sostituito non appartiene più al vecchio pacchetto, ma solo a quello nuovo.
				</div><div
              class="para">
					Se tutti i file di un pacchetto installato sono stati sostituiti, il pacchetto è considerato come rimosso. Infine, questo campo incoraggia <code
                class="command">dpkg</code> a rimuovere il pacchetto sostituito quando c'è un conflitto.
				</div><div
              class="sidebar"><a
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>APPROFONDIMENTI</em></span> Il campo <code
                          class="literal">Tag</code></strong></p></div></div></div><div
                class="para">
					In the <span
                  class="pkg pkg">apt</span> example above, we can see the presence of a field that we have not yet described, the <code
                  class="literal">Tag</code> field. This field does not describe a relationship between packages, but is simply a way of categorizing a package in a thematic taxonomy. This classification of packages according to several criteria (type of interface, programming language, domain of application, etc.) has been available for a long time. Despite this, not all packages have accurate tags and it is not yet integrated in all Debian tools; <code
                  class="command">aptitude</code> displays these tags, and allows them to be used as search criteria. For those who are repelled by <code
                  class="command">aptitude</code>'s search criteria, the following website allows navigation of the tag database: <div
                  class="url">→ <a
                    href="http://debtags.alioth.debian.org/">http://debtags.alioth.debian.org/</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="idm140108836286832"></a>5.2.2. Script di configurazione</h3></div></div></div><a
            id="idm140108836286064"
            class="indexterm"></a><a
            id="idm140108836284944"
            class="indexterm"></a><a
            id="idm140108836283824"
            class="indexterm"></a><a
            id="idm140108836282704"
            class="indexterm"></a><a
            id="idm140108836281584"
            class="indexterm"></a><div
            class="para">
				In aggiunta al file <code
              class="filename">control</code>, l'archivio <code
              class="filename">control.tar.gz</code> per ogni pacchetto Debian può contenere alcuni script, chiamati da <code
              class="command">dpkg</code> a differenti stadi dell'elaborazione di un pacchetto. La Policy Debian descrive nei dettagli i casi possibili, specificando gli script chiamati e gli argomenti che ricevono. Queste sequenze possono essere complicate, dal momento che, se uno degli script fallisce, <code
              class="command">dpkg</code> cercherà di ritornare a uno stato soddisfacente annullando l'installazione o la rimozione in corso (per quanto possibile).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> <code
                        class="command">dpkg</code>'s database</strong></p></div></div></div><a
              id="idm140108836276080"
              class="indexterm"></a><a
              id="idm140108836274960"
              class="indexterm"></a><div
              class="para">
				Tutti gli script di configurazione per i pacchetti installati sono memorizzati nella directory <code
                class="filename">/var/lib/dpkg/info/</code>, sotto forma di file il cui nome inizia con il nome del pacchetto. Questa directory comprende anche un file con l'estensione <code
                class="filename">.list</code> per ogni pacchetto, che contiene l'elenco dei file che appartengono a tale pacchetto.
			</div><div
              class="para">
				Il file <code
                class="filename">/var/lib/dpkg/status</code> contiene una serie di blocchi di dati (nel formato delle note intestazioni di posta, RFC 2822) che descrive lo stato di ogni pacchetto. Anche le informazioni del file <code
                class="filename">control</code> del pacchetto installato sono duplicate qui.
			</div></div><div
            class="para">
				In genere, lo script <code
              class="filename">preinst</code> viene eseguito prima dell'installazione del pacchetto, mentre <code
              class="filename">postinst</code> la segue. Nella stessa maniera, <code
              class="filename">prerm</code> viene invocato prima della rimozione di un pacchetto e <code
              class="filename">postrm</code> dopo. Un aggiornamento di un pacchetto equivale alla rimozione della versione precedente e all'installazione di quella nuova. Non è possibile qui descrivere nei dettagli tutti i possibili scenari, ma saranno discussi i due più comuni: un'installazione/aggiornamento e una rimozione.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENZIONE</em></span> Nomi simbolici degli script</strong></p></div></div></div><div
              class="para">
				Le sequenze descritte in questa sezione chiamano gli script di configurazione con nomi specifici come <code
                class="command">old-prerm</code> o <code
                class="command">new-postinst</code>. Sono rispettivamente lo script <code
                class="command">prerm</code> contenuto nella vecchia versione del pacchetto (installata prima dell'aggiornamento) e lo script <code
                class="command">postinst</code> contenuto nella nuova versione (installata dall'aggiornamento).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGGERIMENTO</em></span> Diagrammi di stato</strong></p></div></div></div><div
              class="para">
				Manoj Srivastava ha creato questi diagrammi che spiegano come gli script di configurazione vengono chiamati da <code
                class="command">dpkg</code>. Diagrammi simili sono stati sviluppati anche dal progetto Debian Women; sono un po' più semplici da comprendere, ma meno completi <div
                class="url">→ <a
                  href="http://people.debian.org/~srivasta/MaintainerScripts.html">http://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                class="url">→ <a
                  href="http://wiki.debian.org/MaintainerScripts">http://wiki.debian.org/MaintainerScripts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108836260000"></a>5.2.2.1. Installazione e aggiornamento</h4></div></div></div><a
              id="idm140108836259232"
              class="indexterm"></a><div
              class="para">
					Ecco cosa succede durante un'installazione (o un aggiornamento):
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							Per un aggiornamento, <code
                      class="command">dpkg</code> chiama <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">new-version</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Per un aggiornamento, <code
                      class="command">dpkg</code> poi esegue <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">vecchia-versione</em></code>; per una prima installazione, esegue <code
                      class="command">new-preinst install</code>. Può anche aggiungere la vecchia versione nell'ultimo parametro, se il pacchetto è già stato installato e rimosso (ma non completamente e i vecchi file di configurazione sono stati conservati).
						</div></li><li
                  class="listitem"><div
                    class="para">
							Poi i file del nuovo pacchetto vengono scompattati. Se un file esiste già, viene sostituito, ma viene fatta temporaneamente una copia di backup.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Per un aggiornamento, <code
                      class="command">dpkg</code> esegue <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">nuova-versione</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> aggiorna tutti i dati interni (elenco file, script di configurazione, ecc.) e rimuove i backup dei file sostituiti. Questo è il punto di non ritorno: <code
                      class="command">dpkg</code> non ha più accesso a tutti gli elementi necessari a ritornare allo stato precedente.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> will update the configuration files, asking the user to decide if it is unable to automatically manage this task. The details of this procedure are discussed in <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">Sezione 5.2.3, «Somme di controllo, elenco di file di configurazione»</a>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Infine, <code
                      class="command">dpkg</code> configura il pacchetto eseguendo <code
                      class="command">new-postinst configure <em
                        class="replaceable">ultima-versione-configurata</em></code>.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="idm140108836241872"></a>5.2.2.2. Rimozione di pacchetti</h4></div></div></div><div
              class="para">
					Ecco cosa succede durante la rimozione di un pacchetto:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> chiama <code
                      class="command">prerm remove</code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> rimuove tutti i file del pacchetto, con l'eccezione dei file di configurazione e gli script di configurazione.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> executes <code
                      class="command">postrm remove</code>. All of the configuration scripts, except <code
                      class="filename">postrm</code>, are removed. If the user has not used the “purge” option, the process stops here.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Per una eliminazione completa del pacchetto (comando impartito con <code
                      class="command">dpkg --purge</code> o <code
                      class="command">dpkg -P</code>), anche i file di configurazione vengono eliminati, così come certe copie (<code
                      class="filename">*.dpkg-tmp</code>, <code
                      class="filename">*.dpkg-old</code>, <code
                      class="filename">*.dpkg-new</code>) e certi file temporanei; poi <code
                      class="command">dpkg</code> esegue <code
                      class="command">postrm purge</code>.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> Purge, a complete removal</strong></p></div></div></div><a
                id="idm140108836228960"
                class="indexterm"></a><div
                class="para">
					Quando un pacchetto Debian viene rimosso, i file di configurazione sono conservati per facilitare una possibile reinstallazione. Per lo stesso motivo, i dati generati da un demone (come i contenuti della directory di un server LDAP o il contenuto di un database per un server SQL) normalmente sono conservati.
				</div><div
                class="para">
					Per rimuovere tutti i dati associati a un pacchetto, è necessario eseguirne il «purge» con il comando <code
                  class="command">dpkg -P <em
                    class="replaceable">pacchetto</em></code>, <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">pacchetto</em></code> oppure <code
                  class="command">aptitude purge <em
                    class="replaceable">pacchetto</em></code>.
				</div><div
                class="para">
					Given the definitive nature of such data removals, a purge should not be taken lightly.
				</div></div><a
              id="idm140108836223664"
              class="indexterm"></a><div
              class="para">
					The four scripts detailed above are complemented by a <code
                class="filename">config</code> script, provided by packages using <code
                class="command">debconf</code> to acquire information from the user for configuration. During installation, this script defines in detail the questions asked by <code
                class="command">debconf</code>. The responses are recorded in the <code
                class="command">debconf</code> database for future reference. The script is generally executed by <code
                class="command">apt</code> prior to installing packages one by one in order to group all the questions and ask them all to the user at the beginning of the process. The pre- and post-installation scripts can then use this information to operate according to the user's wishes.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>STRUMENTO</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="idm140108836217200"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">debconf</code> was created to resolve a recurring problem in Debian. All Debian packages unable to function without a minimum of configuration used to ask questions with calls to the <code
                  class="command">echo</code> and <code
                  class="command">read</code> commands in <code
                  class="filename">postinst</code> shell scripts (and other similar scripts). But this also means that during a large installation or update the user must stay with their computer to respond to various questions that may arise at any time. These manual interactions have now been almost entirely dispensed with, thanks to the <code
                  class="command">debconf</code> tool.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> has many interesting features: it requires the developer to specify user interaction; it allows localization of all the strings displayed to users (all translations are stored in the <code
                  class="filename">templates</code> file describing the interactions); it has different frontends to display the questions to the user (text mode, graphical mode, non-interactive); and it allows creation of a central database of responses to share the same configuration with several computers... but the most important is that it is now possible to present all of the questions in a row to the user, prior to starting a long installation or update process. The user can go about their business while the system handles the installation on its own, without having to stay there staring at the screen waiting for questions.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.conffiles"></a>5.2.3. Somme di controllo, elenco di file di configurazione</h3></div></div></div><a
            id="idm140108836209072"
            class="indexterm"></a><a
            id="idm140108836207952"
            class="indexterm"></a><a
            id="idm140108836206832"
            class="indexterm"></a><a
            id="idm140108836205872"
            class="indexterm"></a><a
            id="idm140108836204432"
            class="indexterm"></a><div
            class="para">
				In addition to the maintainer scripts and control data already mentioned in the previous sections, the <code
              class="filename">control.tar.gz</code> archive of a Debian package may contain other interesting files. The first, <code
              class="filename">md5sums</code>, contains the MD5 checksums for all of the package's files. Its main advantage is that it allows a tool such as <code
              class="command">debsums</code> (which we will study in <a
              class="xref"
              href="sect.supervision.html#sect.debsums">Sezione 14.3.3.1, «Controllo dei pacchetti: <code
                class="command">debsums</code> e i suoi limiti»</a>) to check if these files have been modified since their installation. Note that when this file doesn't exist, <code
              class="command">dpkg</code> will generate it dynamically at installation time (and store it in the dpkg database just like other control files).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> lists package files that must be handled as configuration files. Configuration files can be modified by the administrator, and <code
              class="command">dpkg</code> will try to preserve those changes during a package update.
			</div><div
            class="para">
				In effetti, in questa situazione, <code
              class="command">dpkg</code> si comporta il più intelligentemente possibile: non fa niente se il file di configurazione standard non è cambiato tra le due versioni. Se, invece, il file è cambiato, cercherà di aggiornarlo. Sono possibili due casi: o l'amministratore non ha toccato questo file di configurazione, nel qual caso <code
              class="command">dpkg</code> installa automaticamente la nuova versione; oppure il file è stato modificato, nel qual caso <code
              class="command">dpkg</code> chiede all'amministratore quale versione desidera usare (quella vecchia con modifiche o quella nuova fornita con il pacchetto). Per aiutare nella decisione, <code
              class="command">dpkg</code> offre la possibilità di visualizzare un «<code
              class="command">diff</code>» che mostra le differenze tra le due versioni. Se l'utente sceglie di tenere la vecchia versione, quella nuova sarà memorizzata nella stessa posizione, in un file con il suffisso <code
              class="filename">.dpkg-dist</code>. Se l'utente sceglie la nuova versione, quella vecchia è mantenuta in un file con il suffisso <code
              class="filename">.dpkg-old</code>. Un'altra azione disponibile consiste nell'interrompere momentaneamente <code
              class="command">dpkg</code> per modificare il file e tentare di applicare di nuovo le relative modifiche (precedentemente identificate con <code
              class="command">diff</code>).
			</div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>APPROFONDIMENTI</em></span> Evitare le domande del file di configurazione</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> handles configuration file updates, but, while doing so, regularly interrupts its work to ask for input from the administrator. This makes it less than enjoyable for those who wish to run updates in a non-interactive manner. This is why this program offers options that allow the system to respond automatically according to the same logic: <code
                class="command">--force-confold</code> retains the old version of the file; <code
                class="command">--force-confnew</code> will use the new version of the file (these choices are respected, even if the file has not been changed by the administrator, which only rarely has the desired effect). Adding the <code
                class="command">--force-confdef</code> option tells <code
                class="command">dpkg</code> to decide by itself when possible (in other words, when the original configuration file has not been touched), and only uses <code
                class="command">--force-confnew</code> or <code
                class="command">--force-confold</code> for other cases.
			</div><div
              class="para">
				Queste opzioni si applicano a <code
                class="command">dpkg</code>, ma la maggior parte del tempo l'amministratore lavorerà direttamente con i programmi <code
                class="command">aptitude</code> o <code
                class="command">apt-get</code>. È, perciò, necessario conoscere la sintassi usata per indicare le opzioni da passare al comando <code
                class="command">dpkg</code> (le loro interfacce da riga di comando sono molto simili).
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</code></strong></pre><div
              class="para">
				These options can be stored directly in <code
                class="command">apt</code>'s configuration. To do so, simply write the following line in the <code
                class="filename">/etc/apt/apt.conf.d/local</code> file:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }
</pre></div><div
              class="para">
				Including this option in the configuration file means that it will also be used in a graphical interface such as <code
                class="command">aptitude</code>.
			</div></div><div
            class="sidebar"><a
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>APPROFONDIMENTI</em></span> Obbligare dpkg a porre le domande del file di configurazione</strong></p></div></div></div><div
              class="para">
				The <code
                class="command">--force-confask</code> option requires <code
                class="command">dpkg</code> to display the questions about the configuration files, even in cases where they would not normally be necessary. Thus, when reinstalling a package with this option, <code
                class="command">dpkg</code> will ask the questions again for all of the configuration files modified by the administrator. This is very convenient, especially for reinstalling the original configuration file if it has been deleted and no other copy is available: a normal re-installation won't work, because <code
                class="command">dpkg</code> considers removal as a form of legitimate modification, and, thus, doesn't install the desired configuration file.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Indietro</strong>Capitolo 5. Sistema dei pacchetti: strumenti e pr...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Avanti</strong>5.3. Struttura di un pacchetto sorgente</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.package-meta-information.html">ar-MA</a></li><li><a
              href="../da-DK/sect.package-meta-information.html">da-DK</a></li><li><a
              href="../de-DE/sect.package-meta-information.html">de-DE</a></li><li><a
              href="../el-GR/sect.package-meta-information.html">el-GR</a></li><li><a
              href="../en-US/sect.package-meta-information.html">en-US</a></li><li><a
              href="../es-ES/sect.package-meta-information.html">es-ES</a></li><li><a
              href="../fa-IR/sect.package-meta-information.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.package-meta-information.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.package-meta-information.html">hr-HR</a></li><li><a
              href="../id-ID/sect.package-meta-information.html">id-ID</a></li><li><a
              href="../it-IT/sect.package-meta-information.html">it-IT</a></li><li><a
              href="../ja-JP/sect.package-meta-information.html">ja-JP</a></li><li><a
              href="../pl-PL/sect.package-meta-information.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.package-meta-information.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.package-meta-information.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.package-meta-information.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.package-meta-information.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.package-meta-information.html">zh-CN</a></li></ul></div></body></html>
