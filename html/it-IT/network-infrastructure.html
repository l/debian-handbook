<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Capitolo 10. Infrastruttura di rete</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-it-IT-1.0-1" /><meta
        name="keywords"
        content="Rete, Gateway, TCP/IP , IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="Il manuale dell'amministratore Debian" /><link
        rel="up"
        href="index.html"
        title="Il manuale dell'amministratore Debian" /><link
        rel="prev"
        href="sect.power-management.html"
        title="9.12. Gestione dell'energia: Advanced Configuration and Power Interface (ACPI)" /><link
        rel="next"
        href="sect.virtual-private-network.html"
        title="10.2. Rete privata virtuale (VPN)" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/it-IT/network-infrastructure.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.power-management.html"><strong>Indietro</strong></a></li><li
          class="home">Il manuale dell'amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.virtual-private-network.html"><strong>Avanti</strong></a></li></ul><div
        xml:lang="it-IT"
        class="chapter"
        lang="it-IT"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  id="network-infrastructure"></a>Capitolo 10. Infrastruttura di rete</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="network-infrastructure.html#sect.gateway">10.1. Gateway</a></span></dt><dt><span
                class="section"><a
                  href="sect.virtual-private-network.html">10.2. Rete privata virtuale (VPN)</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.virtual-private-network.html#sect.openvpn">10.2.1. OpenVPN</a></span></dt><dt><span
                    class="section"><a
                      href="sect.virtual-private-network.html#sect.ssh-vpn">10.2.2. Rete privata virtuale con SSH</a></span></dt><dt><span
                    class="section"><a
                      href="sect.virtual-private-network.html#sect.ipsec">10.2.3. IPSec</a></span></dt><dt><span
                    class="section"><a
                      href="sect.virtual-private-network.html#sect.pptp">10.2.4. PPTP</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.quality-of-service.html">10.3. Qualità del servizio (QoS)</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.quality-of-service.html#sect.qos-principe">10.3.1. Principi e meccanismi</a></span></dt><dt><span
                    class="section"><a
                      href="sect.quality-of-service.html#sect.qos-config">10.3.2. Configurazione ed implementazione</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.dynamic-routing.html">10.4. Instradamento dinamico</a></span></dt><dt><span
                class="section"><a
                  href="sect.ipv6.html">10.5. IPv6</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.ipv6.html#sect.ipv6-tunneling">10.5.1. Tunneling</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.domain-name-servers.html">10.6. Server dei nomi di dominio (DNS)</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.domain-name-servers.html#sect.dns-principe">10.6.1. Principi e meccanismi</a></span></dt><dt><span
                    class="section"><a
                      href="sect.domain-name-servers.html#sect.dns-config">10.6.2. Configurazione</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.dhcp.html">10.7. DHCP</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dhcp.html#sect.dhcp-config">10.7.1. Configurazione</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dhcp.html#sect.dhcp-dns">10.7.2. DHCP e DNS</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.network-diagnosis-tools.html">10.8. Strumenti di diagnosi di rete</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.network-diagnosis-tools.html#sect.netstat">10.8.1. Diagnosi locale: <code
                        class="command">netstat</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.network-diagnosis-tools.html#sect.nmap">10.8.2. Diagnosi da remoto: <code
                        class="command">nmap</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.network-diagnosis-tools.html#sect.sniffers">10.8.3. Sniffer: <code
                        class="command">tcpdump</code> e <code
                        class="command">wireshark</code></a></span></dt></dl></dd></dl></div><div
          class="highlights"><div
            class="para">
		Linux beneficia del notevole patrimonio di Unix nel campo delle reti, e Debian offre una gamma completa di strumenti per la loro creazione e gestione. Questo capitolo esamina questi strumenti.
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    id="sect.gateway"></a>10.1. Gateway</h2></div></div></div><div
            class="para">
			Un gateway è un sistema di connessione tra reti diverse. Questo termine si riferisce spesso al «punto di uscita» di una rete locale sul percorso obbligato per tutti gli indirizzi IP esterni. Il gateway è connesso a ciascuna delle reti che collega insieme, e agisce come un router per trasmettere i pacchetti IP tra le varie interfacce.
		</div><a
            id="idm140108856640864"
            class="indexterm"></a><a
            id="idm140108857086640"
            class="indexterm"></a><a
            id="idm140108839014336"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> Pacchetto IP</strong></p></div></div></div><a
              id="idm140108853187712"
              class="indexterm"></a><div
              class="para">
			La maggior parte delle reti attuali utilizzano il protocollo IP (protocollo Internet: <span
                class="emphasis"><em>Internet Protocol</em></span>). Questo protocollo segmenta i dati trasmessi in pacchetti di dimensioni limitate. Ogni pacchetto contiene, in aggiunta ai dati da trasmettere, un numero di dati necessari per il suo corretto instradamento.
		</div></div><div
            class="sidebar"><a
              id="sidebar.tcp-udp"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> TCP/UDP</strong></p></div></div></div><a
              id="idm140108856586272"
              class="indexterm"></a><a
              id="idm140108852603696"
              class="indexterm"></a><a
              id="idm140108852602256"
              class="indexterm"></a><a
              id="idm140108852601296"
              class="indexterm"></a><div
              class="para">
			Molti programmi non gestiscono autonomamente i singoli pacchetti, anche se i dati che trasmettono viaggiano su IP, ma generalmente utilizzano TCP (protocollo di controllo trasmissione: <span
                class="emphasis"><em>Transmission Control Protocol</em></span>). TCP è un livello sopra IP che consente la creazione di connessioni dedicate a flussi di dati tra due punti. I programmi in seguito visualizzano solo un punto di ingresso in cui i dati possono essere trasmessi con la garanzia che gli stessi dati risulteranno senza perdita (e nella stessa sequenza) nel punto di uscita all'altra estremità della connessione. Benché possono accadere molti tipi di errori negli strati inferiori, questi vengono compensati da TCP: i pacchetti persi vengono ritrasmessi, ed i pacchetti in arrivo nell'ordine sbagliato (per esempio, se hanno usato percorsi differenti) vengono riordinati in modo appropriato.
		</div><div
              class="para">
			Un altro protocollo che si basa sull'IP è UDP (<span
                class="emphasis"><em>User Datagram Protocol</em></span>). Al contrario di TCP, è orientato al pacchetto di dati (packet-oriented). I suoi obiettivi sono diversi: lo scopo di UDP è solo quello di trasmettere un pacchetto da un'applicazione all'altra. Il protocollo non tenta di compensare la perdita di pacchetti possibile nel percorso, né garantisce che i pacchetti vengano ricevuti nello stesso ordine in cui sono stati inviati. Il vantaggio principale di questo protocollo è che la latenza è notevolmente migliorata, in quanto la perdita di un singolo pacchetto non ritarda la ricezione di tutti i pacchetti successivi fino quando quello perso viene ritrasmesso.
		</div><div
              class="para">
			Sia TCP che UDP coinvolgono le porte, che sono «numeri di interno», per stabilire una comunicazione con una determinata applicazione su una macchina. Questo concetto permette di mantenere comunicazioni multiple diverse in parallelo con lo stesso destinatario, visto che possono essere distinte in base al numero di porta.
		</div><div
              class="para">
			Alcuni di questi numeri di porta - standardizzati da IANA (<span
                class="emphasis"><em>Internet Assigned Numbers Authority</em></span>), sono «ben noti» per essere associati ai servizi di rete. Per esempio, la porta TCP 25 viene generalmente utilizzata dal server di posta elettronica. <div
                class="url">→ <a
                  href="http://www.iana.org/assignments/port-numbers">http://www.iana.org/assignments/port-numbers</a></div>
		</div></div><div
            class="para">
			Quando una rete locale utilizza un intervallo di indirizzi privati (non instradabili su Internet), il gateway deve attuare il <span
              class="emphasis"><em>mascheramento degli indirizzi</em></span> in modo che le macchine sulla rete possano comunicare con il mondo esterno. L'operazione di mascheramento è una sorta di proxy operante a livello di rete: ogni connessione in uscita da una macchina interna viene sostituita con una connessione dal gateway stesso (in quanto il gateway ha un indirizzo instradabile verso l'esterno), i dati che passano dalla connessione mascherata vengono inviati alla nuova, ed i dati che ritornano in risposta vengono inviati attraverso la connessione mascherata alla macchina interna. Il gateway utilizza una serie di porte TCP dedicate a questo scopo, di solito con numeri molto elevati (oltre 60000). Ogni connessione proveniente da una macchina interna appare quindi al mondo esterno, come una connessione proveniente da una di queste porte riservate.
		</div><a
            id="idm140108835633200"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURA</em></span> Intervallo di indirizzi privati</strong></p></div></div></div><a
              id="idm140108835631152"
              class="indexterm"></a><a
              id="idm140108835629712"
              class="indexterm"></a><div
              class="para">
			RFC 1918 defines three ranges of IPv4 addresses not meant to be routed on the Internet but only used in local networks. The first one, <code
                class="literal">10.0.0.0/8</code> (see sidebar <a
                class="xref"
                href="sect.network-config.html#sidebar.networking-basics"><span
                  class="emphasis"><em>FONDAMENTALI</em></span> Concetti di rete essenziali (Ethernet, indirizzo IP, sottorete, broadcast).</a>), is a class-A range (with 2<sup>24</sup> IP addresses). The second one, <code
                class="literal">172.16.0.0/12</code>, gathers 16 class-B ranges (<code
                class="literal">172.16.0.0/16</code> to <code
                class="literal">172.31.0.0/16</code>), each containing 2<sup>16</sup> IP addresses. Finally, <code
                class="literal">192.168.0.0/16</code> is a class-B range (grouping 256 class-C ranges, <code
                class="literal">192.168.0.0/24</code> to <code
                class="literal">192.168.255.0/24</code>, with 256 IP addresses each). <div
                class="url">→ <a
                  href="http://www.faqs.org/rfcs/rfc1918.html">http://www.faqs.org/rfcs/rfc1918.html</a></div>
		</div></div><div
            class="para">
			Il gateway può anche eseguire due tipi di <span
              class="emphasis"><em>traduzione degli indirizzi di rete</em></span> (<span
              class="emphasis"><em>Network Address Translation</em></span>, o abbreviato NAT). Il primo tipo, <span
              class="emphasis"><em>Destination NAT</em></span> (DNAT) consiste nel modificare l'indirizzo IP di destinazione (e/o la porta TCP o UDP) di una connessione (generalmente) in entrata. Il meccanismo di controllo e tracciatura del collegamento modifica anche i pacchetti successivi nella stessa connessione per assicurare la continuità nella comunicazione. Il secondo tipo di NAT è <span
              class="emphasis"><em>Source NAT</em></span> (SNAT), di cui è un caso particolare il <span
              class="emphasis"><em>mascheramento</em></span>. SNAT modifica l'indirizzo IP sorgente (e/o la porta TCP o UDP) del pacchetto (generalmente) in uscita. Come per DNAT, tutti i pacchetti nella connessione sono opportunamente gestiti dal meccanismo di tracciamento della connessione stessa. Si noti che NAT è rilevante solo per IPv4 e il suo spazio di indirizzi limitato; in IPv6, l'ampia disponibilità di indirizzi riduce notevolmente l'utilità di NAT, consentendo a tutti gli indirizzi «interni» di essere direttamente instradabili su Internet (ciò non implica che le macchine interne siano accessibili, in quanto i firewall intermedi sono in grado di filtrare il traffico).
		</div><a
            id="idm140108856316816"
            class="indexterm"></a><a
            id="idm140108856315856"
            class="indexterm"></a><a
            id="idm140108837461280"
            class="indexterm"></a><a
            id="idm140108837460320"
            class="indexterm"></a><a
            id="idm140108837459360"
            class="indexterm"></a><a
            id="idm140108837458400"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> Port forwarding</strong></p></div></div></div><a
              id="idm140108837456320"
              class="indexterm"></a><div
              class="para">
			A concrete application of DNAT is <span
                class="emphasis"><em>port forwarding</em></span>. Incoming connections to a given port of a machine are forwarded to a port on another machine. Other solutions may exist for achieving a similar effect, though, especially at the application level with <code
                class="command">ssh</code> (see <a
                class="xref"
                href="sect.remote-login.html#sect.ssh-port-forwarding">Sezione 9.2.1.3, «Creazione di tunnel cifrati con il port forwarding»</a>) or <code
                class="command">redir</code>.
		</div></div><div
            class="para">
			Basta teoria, andiamo sul pratico. Trasformare un sistema Debian in un gateway è una questione semplice, basta attivare l'apposita opzione nel kernel Linux, mediante il filesystem virtuale <code
              class="filename">/proc/</code>:
		</div><pre
            class="screen">
<code
              class="computeroutput"># </code><strong
              class="userinput"><code>echo 1 &gt; /proc/sys/net/ipv4/conf/default/forwarding</code></strong></pre><div
            class="para">
			Questa opzione può anche essere attivata automaticamente all'avvio, se <code
              class="filename">/etc/sysctl.conf</code> imposta l'opzione <code
              class="literal">net.ipv4.conf.default.forwarding</code> a <code
              class="literal">1</code>.
		</div><div
            class="example"><a
              id="example.sysctl.conf"></a><p
              class="title"><strong>Esempio 10.1. Il file <code
                  class="filename">/etc/sysctl.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
net.ipv4.conf.default.forwarding = 1
net.ipv4.conf.default.rp_filter = 1
net.ipv4.tcp_syncookies = 1
</pre></div></div><div
            class="para">
			Lo stesso effetto può essere ottenuto per IPv6 semplicemente sostituendo <code
              class="literal">ipv4</code> con <code
              class="literal">ipv6</code> nel comando manuale e modificando la riga <code
              class="literal">net.ipv6.conf.all.forwarding</code> nel file <code
              class="filename">/etc/sysctl.conf</code>.
		</div><div
            class="para">
			Abilitare il mascheramento IPv4 è un'operazione leggermente più complessa che coinvolge la configurazione del firewall <span
              class="emphasis"><em>netfilter</em></span>.
		</div><div
            class="para">
			Similmente, l'utilizzo di NAT (per IPv4) richiede configurare <span
              class="emphasis"><em>netfilter</em></span>. Dato che lo scopo primario di questo componente è il filtraggio dei pacchetti, i dettagli sono elencati nel <a
              class="xref"
              href="security.html">Capitolo 14: «<em>Sicurezza</em>»</a> (vedere la <a
              class="xref"
              href="sect.firewall-packet-filtering.html">Sezione 14.2, «Firewall o filtraggio dei pacchetti»</a>).
		</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.power-management.html"><strong>Indietro</strong>9.12. Gestione dell'energia: Advanced Configurati...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.virtual-private-network.html"><strong>Avanti</strong>10.2. Rete privata virtuale (VPN)</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/network-infrastructure.html">ar-MA</a></li><li><a
              href="../da-DK/network-infrastructure.html">da-DK</a></li><li><a
              href="../de-DE/network-infrastructure.html">de-DE</a></li><li><a
              href="../el-GR/network-infrastructure.html">el-GR</a></li><li><a
              href="../en-US/network-infrastructure.html">en-US</a></li><li><a
              href="../es-ES/network-infrastructure.html">es-ES</a></li><li><a
              href="../fa-IR/network-infrastructure.html">fa-IR</a></li><li><a
              href="../fr-FR/network-infrastructure.html">fr-FR</a></li><li><a
              href="../hr-HR/network-infrastructure.html">hr-HR</a></li><li><a
              href="../id-ID/network-infrastructure.html">id-ID</a></li><li><a
              href="../it-IT/network-infrastructure.html">it-IT</a></li><li><a
              href="../ja-JP/network-infrastructure.html">ja-JP</a></li><li><a
              href="../pl-PL/network-infrastructure.html">pl-PL</a></li><li><a
              href="../pt-BR/network-infrastructure.html">pt-BR</a></li><li><a
              href="../ro-RO/network-infrastructure.html">ro-RO</a></li><li><a
              href="../ru-RU/network-infrastructure.html">ru-RU</a></li><li><a
              href="../tr-TR/network-infrastructure.html">tr-TR</a></li><li><a
              href="../zh-CN/network-infrastructure.html">zh-CN</a></li></ul></div></body></html>
