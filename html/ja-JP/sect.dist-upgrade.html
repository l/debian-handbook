<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.6. 安定版から次のディストリビューションへのアップグレード</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ja-JP-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="apt.html"
        title="第 6 章 メンテナンスと更新、APT ツール" /><link
        rel="prev"
        href="sect.package-authentication.html"
        title="6.5. パッケージ信頼性の確認" /><link
        rel="next"
        href="sect.regular-upgrades.html"
        title="6.7. システムを最新の状態に保つ" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ja-JP/sect.dist-upgrade.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.dist-upgrade"></a>6.6. 安定版から次のディストリビューションへのアップグレード</h2></div></div></div><div
          class="para">
			Debian の最もよく知られた特色の 1 つに、インストールされたシステムを安定版から次の安定版にアップグレードできることが挙げられます。そして有名なサブコマンドである <span
            class="foreignphrase"><em
              class="foreignphrase">dist-upgrade</em></span> はプロジェクトの評判に大きく寄与し続けています。いくつかの事前準備に必要な時間を含めても、コンピュータのアップグレードに必要な時間はパッケージリポジトリからのダウンロード速度に依存してわずか数分から数十分です。
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.3"></a>6.6.1. 推奨手順</h3></div></div></div><div
            class="para">
				Debian の安定版は次のリリースまでの間にかなり長い時間をかけて大きく進化するので、アップグレードの前にリリースノートを読むべきです。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> リリースノート</strong></p></div></div></div><div
              class="para">
				オペレーティングシステムの (より一般的に言えば、ソフトウェアの) リリースノートはソフトウェアの概観と、あるバージョンに固有な点の詳細を説明する文書です。リリースノートは通常、完全な文書に比べて短く、前のバージョン以降導入された機能をリストアップしています。加えて、アップグレード手順の詳細、以前のバージョンのユーザに対する警告、そして時々正誤表を含んでいます。
			</div><div
              class="para">
				Debian のリリースノートはオンライン上で利用できます。すなわち、現在の安定版に対するリリースノートには専用の URL が割り当てられ、古いリリースに対するリリースノートにはコードネームを含んだ URL が割り当てられています。<div
                class="url">→ <a
                  href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></div><div
                class="url">→ <a
                  href="http://www.debian.org/releases/wheezy/releasenotes">http://www.debian.org/releases/wheezy/releasenotes</a></div>
			</div></div><div
            class="para">
				この節では、特に <span
              class="distribution distribution">Wheezy</span> システムを <span
              class="distribution distribution">Jessie</span> にアップグレードを行う場合について解説します。システムのアップグレードはシステムに甚大な変更を加えます。このため、危険が全くないわけではありません。アップグレードを行う前に、必ずすべての重要なデータをバックアップしてください。
			</div><div
            class="para">
				アップグレードを簡単に (短時間で) 実行するために身に付けるべき良い癖の 1 つに、インストール済みパッケージを整理整頓し、本当に必要なものだけを残すことがあります。これを行う便利なツールが <code
              class="command">aptitude</code>、<code
              class="command">deborphan</code>、<code
              class="command">debfoster</code> です (<a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">第 6.2.7 節「自動的にインストールされたパッケージの追跡」</a>を参照してください)。たとえば以下のコマンドを実行した後、<code
              class="command">aptitude</code> の対話型モードで削除予定としてマークされたパッケージの再確認と微調整を行うことができます。
			</div><pre
            class="screen"># <strong
              class="userinput"><code>deborphan | xargs aptitude --schedule-only remove</code></strong></pre><div
            class="para">
				次にシステムのアップグレードを行います。最初に <code
              class="filename">/etc/apt/sources.list</code> ファイルを書き換えて、APT にパッケージの取得先を <span
              class="distribution distribution">Wheezy</span> から <span
              class="distribution distribution">Jessie</span> に変更するよう伝えます。<code
              class="filename">/etc/apt/sources.list</code> ファイルの中でコードネームではなく<span
              class="distribution distribution">安定版</span>へのリファレンスを使っている場合、この変更は必要ありません。なぜなら、<span
              class="distribution distribution">安定版</span>は常に Debian の最新リリース版を指しているからです。どちらの場合でも、利用できるパッケージのデータベースを更新してください (<code
              class="command">apt update</code> コマンドを実行するか <code
              class="command">synaptic</code> の更新ボタンを押してください)。
			</div><div
            class="para">
				新しいパッケージソースが登録されたら、真っ先に <code
              class="command">apt upgrade</code> を使い、最小アップグレードを実行するべきです。アップグレードを 2 段階に分けて行うことにより、パッケージ管理ツールの作業が軽減されますし、パッケージ管理ツールが最新のバージョンになっていることが保証されます。また、最新のパッケージ管理ツールには、多くのバグ修正がなされているかもしれませんし、ディストリビューション全体のアップグレードを完了させるために必要な改善が含まれているかもしれません。
			</div><div
            class="para">
				最小アップグレードが終了したら、<code
              class="command">apt full-upgrade</code>、<code
              class="command">aptitude</code>、<code
              class="command">synaptic</code> のうちどれか 1 つを使って、ディストリビューション全体のアップグレードを行います。提案された操作を適用する前に注意深く確認するべきです。具体的に言えば、提案パッケージを追加したい場合や、推奨されたけれども使いにくいと知っているパッケージを除外したい場合があるかもしれません。いかなる場合でもフロントエンドは、整合性が保たれて最新の <span
              class="distribution distribution">Jessie</span> システムになるような、解決策を用意します。管理者に要求されるのは、パッケージがダウンロードされるまで待って、Debconf とマシンに合わせて変更された設定ファイルの保存可否に関する質問に答え、APT が作業を終えるまで見ているだけです。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.4"></a>6.6.2. アップグレードの後から問題を取り扱う</h3></div></div></div><div
            class="para">
				Debian メンテナの最大限の努力にも関わらず、システムのメジャーアップグレードは常に望んだ通りに順調に進むわけではありません。新しいソフトウェアバージョンは古いものと互換性がないかもしれません (たとえば、デフォルト動作やデータフォーマットが変わっているかもしれません)。また、いくつかのバグは Debian リリース前のテスト段階を経たにも関わらず見過ごされているかもしれません。
			</div><div
            class="para">
				いくつかの問題を未然に防ぐために、<span
              class="pkg pkg">apt-listchanges</span> パッケージをインストールすることが可能です。<span
              class="pkg pkg">apt-listchanges</span> は、あるパッケージのアップグレード作業の開始時に、このパッケージのアップグレードを行うことで生じる可能性のある問題の情報を表示します。この情報はパッケージメンテナがまとめたもので、ユーザが内容を確認できるように <code
              class="filename">/usr/share/doc/<em
                class="replaceable">package</em>/NEWS.Debian</code> ファイルに含まれています。これらのファイルを (場合によっては <span
              class="pkg pkg">apt-listchanges</span> を通じて) 読めば、予期しない状況に驚かされることがなくなるでしょう。
			</div><div
            class="para">
				あるソフトウェアの新しいバージョンが全く動かない場合があるかもしれません。これは通常、そのアプリケーションがそれほど人気ではない場合や十分にテストされていない場合に起こります。さらに、リリース直前の更新はそれまでに存在しなかった不具合を発生させる場合があり、この種の不具合は安定版がリリースされた後に見つかります。どちらの場合でも、最初にやることはバグ追跡システム <code
              class="literal">https://bugs.debian.org/<em
                class="replaceable">package</em></code> でこの問題が既に報告されているか確認することです。まだ報告されていなければ、<code
              class="command">reportbug</code> を使って自分で報告するべきです。既に報告されていれば、バグ報告と関連メッセージがバグに関連する情報の素晴らしいソースになります。
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						パッチが既に存在し、バグ報告からそれを入手できる場合もあります。この場合、壊れたパッケージの修正されたバージョンを再コンパイルすることが可能です (<a
                    class="xref"
                    href="debian-packaging.html#sect.rebuilding-package">第 15.1 節「ソースを使ったパッケージの再ビルド」</a>をご覧ください)。
					</div></li><li
                class="listitem"><div
                  class="para">
						バグ報告には問題に対する次善策が報告されており、報告に対する返信から問題の本質を理解できる場合もあります。
					</div></li><li
                class="listitem"><div
                  class="para">
						さらに、メンテナが修正されたパッケージを用意して既に公開している場合もあります。
					</div></li></ul></div><div
            class="para">
				バグの重要度に依存して、パッケージの新しいバージョンが安定版リリースに対する新しい改訂版として用意されている場合もあります。この場合、修正されたパッケージは Debian アーカイブミラーの <code
              class="literal">proposed-updates</code> セクションから提供されます (<a
              class="xref"
              href="apt.html#sect.proposed-updates">第 6.1.2.3 節「提案された更新」</a>を参照してください)。対応するエントリを一時的に <code
              class="filename">sources.list</code> に追加すれば、更新されたパッケージを <code
              class="command">apt</code> や <code
              class="command">aptitude</code> からインストールすることが可能です。
			</div><div
            class="para">
				修正されたパッケージがまだ <code
              class="literal">proposed-updates</code> セクションから提供されていないこともあります。これは、安定版リリースマネージャによる妥当性の確認が終わっていないからです。パッケージが公開待ち状態にあるかをウェブページから確認できます。このウェブページに載せられたパッケージはまだ利用できませんが、少なくとも公開待ち状態であるか否かを確認できます。<div
              class="url">→ <a
                href="https://release.debian.org/proposed-updates/stable.html">https://release.debian.org/proposed-updates/stable.html</a></div>
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>戻る</strong>6.5. パッケージ信頼性の確認</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>次へ</strong>6.7. システムを最新の状態に保つ</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.dist-upgrade.html">ar-MA</a></li><li><a
              href="../da-DK/sect.dist-upgrade.html">da-DK</a></li><li><a
              href="../de-DE/sect.dist-upgrade.html">de-DE</a></li><li><a
              href="../el-GR/sect.dist-upgrade.html">el-GR</a></li><li><a
              href="../en-US/sect.dist-upgrade.html">en-US</a></li><li><a
              href="../es-ES/sect.dist-upgrade.html">es-ES</a></li><li><a
              href="../fa-IR/sect.dist-upgrade.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.dist-upgrade.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.dist-upgrade.html">hr-HR</a></li><li><a
              href="../id-ID/sect.dist-upgrade.html">id-ID</a></li><li><a
              href="../it-IT/sect.dist-upgrade.html">it-IT</a></li><li><a
              href="../ja-JP/sect.dist-upgrade.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.dist-upgrade.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.dist-upgrade.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.dist-upgrade.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.dist-upgrade.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.dist-upgrade.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.dist-upgrade.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.dist-upgrade.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.dist-upgrade.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.dist-upgrade.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.dist-upgrade.html">zh-TW</a></li></ul></div></body></html>
