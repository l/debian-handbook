<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.2. ネットワークの設定</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ja-JP-1.0-1" /><meta
        name="keywords"
        content="設定, 地域化, ロケール, ネットワーク, 名前解決, ユーザ, グループ, アカウント, コマンドラインインタプリタ, シェル, 印刷, ブートローダ, カーネルのコンパイル" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="basic-configuration.html"
        title="第 8 章 基本設定、ネットワーク、アカウント、印刷..." /><link
        rel="prev"
        href="basic-configuration.html"
        title="第 8 章 基本設定、ネットワーク、アカウント、印刷..." /><link
        rel="next"
        href="sect.hostname-name-service.html"
        title="8.3. ホスト名と名前解決サービスの設定" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ja-JP/sect.network-config.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.network-config"></a>8.2. ネットワークの設定</h2></div></div></div><div
          class="sidebar"><a
            id="sidebar.networking-basics"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>BACK TO BASICS</em></span> ネットワークの本質的概念 (イーサネット、IP アドレス、サブネット、ブロードキャスト)</strong></p></div></div></div><a
            id="id-1.11.6.2.2"
            class="indexterm"></a><a
            id="id-1.11.6.2.3"
            class="indexterm"></a><a
            id="id-1.11.6.2.4"
            class="indexterm"></a><a
            id="id-1.11.6.2.5"
            class="indexterm"></a><a
            id="id-1.11.6.2.6"
            class="indexterm"></a><a
            id="id-1.11.6.2.7"
            class="indexterm"></a><a
            id="id-1.11.6.2.8"
            class="indexterm"></a><div
            class="para">
			多くの現代的なローカルネットワークがイーサネットプロトコルを使っています。データはフレームと呼ばれる小さなブロックに分割され、一度に 1 つのフレームがワイヤ上で転送されます。データ転送速度は古いイーサネットカードの 10 Mb/s から新しいカードの 10 Gb/s (現在最も一般的な速度は 100 Mb/s から 1 Gb/s) までさまざまあります。最も広く使われているケーブルは、確実に保証される転送速度に依存して 10BASE-T、100BASE-T、1000BASE-T、10GBASE-T と呼ばれています(T は「ツイストペア」を意味しています)。ケーブルの終端には RJ45 コネクタが付いています。他のケーブル型もあり、それらは 1 Gb/s 以上の速度で使われています。
		</div><a
            id="id-1.11.6.2.10"
            class="indexterm"></a><a
            id="id-1.11.6.2.11"
            class="indexterm"></a><div
            class="para">
			IP アドレスは、ローカルネットワークやインターネットでコンピュータのネットワークインターフェースを識別するために使われる番号です。IP の現在最も広く使われているバージョン (IPv4) では、IP アドレスは 32 ビットにエンコードされ、通常ピリオドで区切った 4 個の数字で表現されます (例 <code
              class="literal">192.168.0.1</code>)、それぞれの数字は 0 以上 255 以下です (8 ビットのデータに対応します)。IP の次期バージョン IPv6 では、アドレス空間を 128 ビットに拡張し、IP アドレスは通常コロンで区切られた 16 進数列で表されます (たとえば 2001:0db8:13bb:0002:0000:0000:0000:0020 などで、これは短縮形の場合 2001:db8:13bb:2::20 と表されます)。
		</div><a
            id="id-1.11.6.2.13"
            class="indexterm"></a><a
            id="id-1.11.6.2.14"
            class="indexterm"></a><a
            id="id-1.11.6.2.15"
            class="indexterm"></a><div
            class="para">
			サブネットマスク (ネットマスク) は 2 進コードの形で、ある IP アドレスのネットワークに相当する部分を定義します。残りの部分はマシンに相当する部分を定義します。ここで挙げる静的 IPv4 アドレスの設定例では、サブネットマスク <code
              class="literal">255.255.255.0</code> (2 進数表記では 24 個の「1」の後に 8 個の「0」が並ぶ) は IP アドレスの最初の 24 ビット分がネットワークアドレスに対応し、残りの 8 ビット分がマシンに固有のアドレスであることを意味しています。IPv6 では可読性を高めるためにネットマスクを 2 進数表記した際に「1」となるビットの個数で表すので、ネットマスクは <code
              class="literal">64</code> のように書けます。
		</div><div
            class="para">
			ネットワークアドレスは IP アドレスの一種で、マシン番号を表現する部分は 0 で表されます。完全なネットワークにおける IPv4 アドレスの範囲は通常 <span
              class="emphasis"><em>a.b.c.d/e</em></span> という構文で表現されます。ここで、<span
              class="emphasis"><em>a.b.c.d</em></span> はネットワークアドレスで <span
              class="emphasis"><em>e</em></span> は IP アドレスのネットワーク部分を表すビット数です。つまり例のネットワークは <code
              class="literal">192.168.0.0/24</code> のように表現されます。IPv6 の場合も構文は似ており、<code
              class="literal">2001:db8:13bb:2::/64</code> のように表現されます。
		</div><a
            id="id-1.11.6.2.18"
            class="indexterm"></a><a
            id="id-1.11.6.2.19"
            class="indexterm"></a><div
            class="para">
			ルータとは、複数のネットワークを相互に接続するマシンです。ルータを通過するすべてのトラフィックは接続されたネットワークに誘導されます。これを行うために、ルータは着信パケットを解析し、宛先の IP アドレスに従ってパケットを転送します。ルータは通常ゲートウェイとしても知られています。ルータがゲートウェイの役割を果たす場合、ルータはローカルネットワークを越える (インターネットなどの外部ネットワークに向かう) ためのマシンとして機能します。
		</div><a
            id="id-1.11.6.2.21"
            class="indexterm"></a><div
            class="para">
			ブロードキャストアドレスは特殊なアドレスでネットワークにいるすべてのマシンに対応付けられています。ブロードキャストアドレスは、ほとんど「転送され」ませんし、当該のネットワークだけを対象に働きます。具体的に言うと、ブロードキャスト宛のデータパケットはルータを通過しないことを意味しています。
		</div><div
            class="para">
			この章では IPv4 アドレスだけに注目します。なぜなら IPv4 アドレスは現在最も一般的に利用されているからです。IPv6 プロトコルの詳細は<a
              class="xref"
              href="sect.ipv6.html">第 10.5 節「IPv6」</a>で説明されていますが、その概念は IPv4 と同じです。
		</div></div><div
          class="para">
			ネットワークは初回インストール時に自動設定されます。この時同時に NetworkManager がインストールされたなら (一般にデスクトップ環境をインストールした場合には同時にインストールされます)、自分で設定する必要はないかもしれません (たとえば、単一の有線接続で DHCP を使い、特別な設定を必要としない場合など)。自分で設定する必要がある場合 (たとえば WiFi インターフェース用の設定が必要な場合)、<code
            class="filename">/etc/NetworkManager/system-connections/</code> に設定ファイルを配置します。
		</div><div
          class="para">
			NetworkManager がインストールされなかった場合、インストーラは <code
            class="filename">/etc/network/interfaces</code> ファイルを作成して <span
            class="pkg pkg">ifupdown</span> を設定します。<code
            class="literal">auto</code> で始まる行は、そのインターフェースが <code
            class="literal">networking</code> サービスによって起動時に自動設定されることを意味します。
		</div><div
          class="para">
			サーバ環境においては通常、ネットワーク設定ツールとして <span
            class="pkg pkg">ifupdown</span> を使います。このため、<span
            class="pkg pkg">ifupdown</span> については次節で説明します。
		</div><a
          id="id-1.11.6.6"
          class="indexterm"></a><a
          id="id-1.11.6.7"
          class="indexterm"></a><a
          id="id-1.11.6.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVE</em></span> NetworkManager</strong></p></div></div></div><a
            id="id-1.11.6.9.2"
            class="indexterm"></a><div
            class="para">
			NetworkManager はマシンを移動して使う場合に特に推奨され (<a
              class="xref"
              href="sect.network-config.html#sect.roaming-network-config">第 8.2.5 節「ローミングユーザ向けの自動ネットワーク設定」</a>を参照してください)、デフォルトのネットワーク管理ツールとしても極めて便利です。コンピュータの起動の可能な限り早い段階で使われる「システム接続」を作るには、<code
              class="filename">/etc/NetworkManager/system-connections/</code> 内の <code
              class="filename">.ini</code> 系ファイルを手作業で編集するか、またはグラフィカルツール (<code
              class="command">nm-connection-editor</code>) を使います。NetworkManager でネットワーク接続を管理する場合、<code
              class="filename">/etc/network/interfaces</code> に含まれるすべてのエントリを無効化するのを忘れないでください。<div
              class="url">→ <a
                href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings</a></div><div
              class="url">→ <a
                href="https://developer.gnome.org/NetworkManager/1.6/ref-settings.html">https://developer.gnome.org/NetworkManager/1.6/ref-settings.html</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.interface-ethernet"></a>8.2.1. イーサネットインターフェース</h3></div></div></div><div
            class="para">
				コンピュータにイーサネットカードが付けられている場合、イーサネットカードに関連付けられる IP ネットワークは 1 つか 2 つの方法で必ず設定されなければいけません。最も簡単な方法は DHCP を使う動的設定で、これにはローカルネットワークで DHCP サーバを動かす必要があります。動的設定では、以下の例で <code
              class="literal">hostname</code> 設定に対応する、希望ホスト名を示すことが可能です。そして、DHCP サーバは適切なネットワーク設定を送信します。
			</div><a
            id="id-1.11.6.10.3"
            class="indexterm"></a><a
            id="id-1.11.6.10.4"
            class="indexterm"></a><div
            class="example"><a
              id="example.config-dhcp"></a><p
              class="title"><strong>例 8.1 DHCP 設定</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet dhcp
  hostname arrakis</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IN PRACTICE</em></span> ネットワークインターフェースの名称</strong></p></div></div></div><a
              id="id-1.11.6.10.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.3"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.4"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.5"
              class="indexterm"></a><div
              class="para">
				デフォルトで、カーネルはネットワークインターフェースに <code
                class="literal">eth0</code> (優先イーサネット) や <code
                class="literal">wlan0</code> (WiFi) などの一般名を付けます。一般名中の番号は検出順を意味するカウンタです。現代的なハードウェアにおいては、ハードウェアの検出順序は再起動のたびに変化するかもしれません。このためデフォルト名は当てになりません。
			</div><div
              class="para">
				幸いなことに、systemd と udev にはインターフェースを検出したら直ちにその名前を変更する機能があります。デフォルトの命名規則は <code
                class="filename">/lib/systemd/network/99-default.link</code> で定義されています (ファイル内の <code
                class="literal">NamePolicy</code> エントリに関する説明は <span
                class="citerefentry"><span
                  class="refentrytitle">systemd.link</span>(5)</span> を参照してください)。実際のところ、インターフェース名はデバイスの物理位置に基づいており (どこに接続されているか予想しやすいようになっています)、有線イーサネットは <code
                class="literal">en</code> から WiFi は <code
                class="literal">wl</code> から名前が始まります。上の例では、名前の残りの部分は PCI (<code
                class="literal">p</code>)、バス番号 (<code
                class="literal">0</code>)、スロット番号 (<code
                class="literal">s31</code>)、ファンクション番号 (<code
                class="literal">f6</code>) の略称です。
			</div><div
              class="para">
				当然ですが、この命名規則を上書きしたり、いくつかの特定のインターフェースに特別な名前を付けることも可能です。ネットワークインターフェースの名前は <code
                class="command">ip addr</code> の出力 (または <code
                class="filename">/sys/class/net/</code> のファイル名) に使われています。
			</div></div><div
            class="para">
				「静的」設定の場合、必ず決められた方法でネットワーク設定を定義しなければいけません。「静的」設定には少なくとも IP アドレスとサブネットマスクが含まれます。さらに場合によってはネットワークとブロードキャストアドレスが含まれることがあります。ゲートウェイには外部に接続しているルータを指定します。
			</div><div
            class="example"><a
              id="example.static-network"></a><p
              class="title"><strong>例 8.2 静的設定</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> 複数アドレス</strong></p></div></div></div><div
              class="para">
				複数のインターフェースに 1 つの物理ネットワークカードを関連付けることだけでなく、1 つのインターフェースに複数の IP アドレスを関連付けることも可能です。ある IP アドレスは DNS 経由で複数の名前に関連付けられているかもしれませんし、ある名前は複数の数値 IP アドレスに関連付けられているかもしれません。この点も忘れないでください。
			</div><div
              class="para">
				お察しの通り、この設定はちょっと複雑で、この設定が必要になるのはとても特殊な場合だけです。ここで引用しているのは、典型的な通常設定の例です。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.interface-wireless"></a>8.2.2. 無線インターフェース</h3></div></div></div><a
            id="id-1.11.6.11.2"
            class="indexterm"></a><div
            class="para">
				ワイヤレスネットワークカードを使えるようにすることはもう少し難しい作業かもしれません。最初に、多くのワイヤレスネットワークカードにはプロプライエタリのファームウェアが必要で、Debian はそれをデフォルトでインストールしません。ワイヤレスネットワークでは暗号を使って、アクセス権限を持つユーザのみがネットワークを使えるように制限しています。これはつまりネットワーク設定に秘密鍵を保存することを意味します。それでは各項目ごとに解決していきましょう。
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.11.6.11.4"></a>8.2.2.1. 必要なファームウェアのインストール</h4></div></div></div><a
              id="id-1.11.6.11.4.2"
              class="indexterm"></a><a
              id="id-1.11.6.11.4.3"
              class="indexterm"></a><div
              class="para">
					最初に APT の sources.list ファイルで non-free リポジトリを有効化しなければいけません。このファイルに関する詳細は<a
                class="xref"
                href="apt.html#sect.apt-sources.list">第 6.1 節「<code
                  class="filename">sources.list</code> ファイルの内容」</a>を参照してください。多くのファームウェアがプロプライエタリなものであり、そのため non-free リポジトリにあります。この手順を飛ばすこともできますが、次の手順で必要なファームウェアが見つからなかった場合には、non-free セクションを有効化してください。
				</div><div
              class="para">
					適切な <code
                class="literal">firmware-*</code> パッケージをインストールしなければいけませんが、インストールするべきパッケージがわからないなら、<span
                class="pkg pkg">isenkram</span> パッケージをインストールして、<code
                class="command">isenkram-autoinstall-firmware</code> コマンドを実行してください。通常、パッケージの名前はハードウェア製造業者の名前か対応するカーネルモジュールからつけられています。つまり Intel の無線カード用のパッケージは <span
                class="pkg pkg">firmware-iwlwifi</span>、Qualcomm Atheros 用は <span
                class="pkg pkg">firmware-atheros</span>、Ralink 用は <span
                class="pkg pkg">firmware-ralink</span> などです。ファームウェアのインストール後に再起動を推奨します。なぜなら、カーネルドライバがファームウェアファイルを探すのは最初にロードされた時に限られ、それ以降はファームウェアを探さないからです。
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="id-1.11.6.11.5"></a>8.2.2.2. <code
                      class="filename">/etc/network/interfaces</code> 内の無線に関するエントリ</h4></div></div></div><a
              id="id-1.11.6.11.5.2"
              class="indexterm"></a><div
              class="para">
					<span
                class="emphasis"><em>ifupdown</em></span> には無線インターフェースを管理する機能がありますが、<span
                class="pkg pkg">wpasupplicant</span> パッケージの手助けが必要です。これは <span
                class="emphasis"><em>ifupdown</em></span> と (WPA/WPA2 暗号化を使う場合に) 無線インターフェースを設定するための <code
                class="command">wpa_supplicant</code> コマンドを統合するものです。これで <code
                class="filename">/etc/network/interfaces</code> 内のエントリに無線ネットワークの名前 (SSID) と <span
                class="emphasis"><em>事前共有鍵</em></span> (PSK) を指定する 2 つの拡張パラメータを利用できるようになります。
				</div><div
              class="example"><a
                id="example.config-wireless"></a><p
                class="title"><strong>例 8.3 無線インターフェース用の DHCP 設定</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
auto wlp4s0
iface wlp4s0 inet dhcp
  wpa-ssid Falcot
  wpa-psk ccb290fd4fe6b22935cbae31449e050edd02ad44627b16ce0151668f5f53c01b</pre></div></div><div
              class="para">
					<code
                class="literal">wpa-psk</code> パラメータには平文または <code
                class="command">wpa_passphrase <em
                  class="replaceable">SSID</em> <em
                  class="replaceable">passphrase</em></code> でハッシュ化されたパスフレーズを指定します。暗号化されていない無線接続を使う場合、<code
                class="literal">wpa-key-mgmt NONE</code> を追記して <code
                class="literal">wpa-psk</code> エントリを削除します。利用できる設定オプションに関する詳しい情報は <code
                class="filename">/usr/share/doc/wpasupplicant/README.Debian.gz</code> を参照してください。
				</div><div
              class="para">
					この時点で、<code
                class="filename">/etc/network/interfaces</code> の読み込みパーミッションを root ユーザのみに制限することを検討すべきでしょう。なぜなら、このファイルに含まれる秘密鍵を誰もが見れる状況は避けるべきだからです。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HISTORY</em></span> WEP 暗号化</strong></p></div></div></div><a
                id="id-1.11.6.11.5.7.2"
                class="indexterm"></a><div
                class="para">
					WEP 暗号化プロトコルを使うことは推奨されませんが、<span
                  class="pkg pkg">wireless-tools</span> パッケージを使えばそれも可能です。使い方は <code
                  class="filename">/usr/share/doc/wireless-tools/README.Debian</code> を参照してください。
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.ppp-rtc"></a>8.2.3. PSTN モデム経由の PPP 接続</h3></div></div></div><a
            id="id-1.11.6.12.2"
            class="indexterm"></a><a
            id="id-1.11.6.12.3"
            class="indexterm"></a><a
            id="id-1.11.6.12.4"
            class="indexterm"></a><a
            id="id-1.11.6.12.5"
            class="indexterm"></a><div
            class="para">
				2 点間 (PPP) 接続は断続的な接続を確立します。さらに PPP 接続は電話モデム (「PSTN モデム」とも呼ばれます。この名前は公衆交換電話網を経由して接続するところから付けられました) を使って接続する場合の最も一般的な接続方法です。
			</div><div
            class="para">
				電話モデムを使って接続する場合、アクセスプロバイダのアカウント (電話番号、ユーザ名、パスワード) が必要で、認証プロトコルを使うこともあります。PPP 接続は <code
              class="command">pppconfig</code> ツール (同名の Debian パッケージに含まれます) を使って設定されます。デフォルトで、<code
              class="command">pppconfig</code> ツールは <code
              class="literal">provider</code> (インターネットサービスプロバイダのように) と名付けられた接続を設定します。認証プロトコルがよく分からなければ、<span
              class="emphasis"><em>PAP</em></span> を使ってください。大多数のインターネットサービスプロバイダは <span
              class="emphasis"><em>PAP</em></span> を提供しています。
			</div><a
            id="id-1.11.6.12.8"
            class="indexterm"></a><a
            id="id-1.11.6.12.9"
            class="indexterm"></a><div
            class="para">
				設定が完了したら、<code
              class="command">pon</code> コマンドを使って接続することが可能です (デフォルト接続名である <code
              class="literal">provider</code> が適切でない場合、接続名をパラメータとして与えてください)。リンクを切断するには <code
              class="command">poff</code> コマンドを使ってください。これら 2 つのコマンドを実行できるのは、root ユーザと <code
              class="literal">dip</code> グループに所属するユーザだけです。
			</div><a
            id="id-1.11.6.12.11"
            class="indexterm"></a><a
            id="id-1.11.6.12.12"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.adsl"></a>8.2.4. ADSL モデム経由の接続</h3></div></div></div><a
            id="id-1.11.6.13.2"
            class="indexterm"></a><a
            id="id-1.11.6.13.3"
            class="indexterm"></a><a
            id="id-1.11.6.13.4"
            class="indexterm"></a><div
            class="para">
				「ADSL モデム」という一般名称の意味には、全く違う機能を持つ数多くの装置が含まれています。Linux で使うのが最も簡単なモデムはイーサネットインターフェースを持つものです (USB インターフェースではありません)。この種のモデムは人気になりつつあります。さらに、多くの ADSL インターネットサービスプロバイダはイーサネットインターフェース付きの「ボックス」を貸与します (またはリースします)。モデムの種類に依存して、必要な設定は広範囲にわたります。
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-pppoe"></a>8.2.4.1. PPPOE をサポートするモデム</h4></div></div></div><a
              id="id-1.11.6.13.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.13.6.3"
              class="indexterm"></a><div
              class="para">
					一部のイーサネットモデムは PPPOE プロトコル (Point to Point Protocol over Ethernet) に対応しています。PPPOE 接続を設定するには、<code
                class="command">pppoeconf</code> ツール (同名のパッケージに含まれます) を使います。PPPOE 接続を設定するために、<code
                class="command">pppoeconf</code> ツールは与えられた設定で <code
                class="filename">/etc/ppp/peers/dsl-provider</code> ファイルを修正し、ログイン情報を <code
                class="filename">/etc/ppp/pap-secrets</code> と <code
                class="filename">/etc/ppp/chap-secrets</code> ファイルに記録します。<code
                class="command">pppoeconf</code> ツールが提案したすべての変更を受け入れることを推奨します。
				</div><div
              class="para">
					この設定が完了したら、<code
                class="command">pon dsl-provider</code> で ADSL 接続を開始、<code
                class="command">poff dsl-provider</code> で切断できます。
				</div><a
              id="id-1.11.6.13.6.6"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> 起動時に <code
                          class="command">ppp</code> を開始</strong></p></div></div></div><a
                id="id-1.11.6.13.6.7.2"
                class="indexterm"></a><a
                id="id-1.11.6.13.6.7.3"
                class="indexterm"></a><div
                class="para">
					定義によれば、ADSL 上の PPP 接続は断続的なものです。しかしながら、通常サービスプロバイダは時間に依存して従量課金しないので、常に接続状態を保つという誘惑に対して、ほとんど不利な点はありません。常時接続状態を保つ標準的な方法は init システムを使うことです。
				</div><div
                class="para">
					systemd を使うなら、ADSL 接続用の自動再開タスクを追加するには、以下の内容を含む <code
                  class="filename">/etc/systemd/system/adsl-connection.service</code> などの「ユニットファイル」を作成するだけで簡単に行うことが可能です。
				</div><pre
                class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div
                class="para">
					このユニットファイルの配置を完了したら、<code
                  class="command">systemctl enable adsl-connection</code> を実行してこれを有効化する必要があります。その後手作業で <code
                  class="command">systemctl start adsl-connection</code> を実行してループを開始します。起動時にはこれが自動的に実行されます。
				</div><div
                class="para">
					<code
                  class="command">systemd</code> を使っていないシステム (Debian <span
                  class="distribution distribution">Wheezy</span> およびそれ以前のバージョンのシステム) では、標準的な SystemV init を別の方法で設定します。このようなシステムでは、<code
                  class="filename">/etc/inittab</code> ファイルの最後に以下の 1 行を追加するだけで設定は完了します。このように設定することで、接続が切断されたらいつでも、<code
                  class="command">init</code> が再接続を試行するようになります。
				</div><pre
                class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider</pre><div
                class="para">
					ADSL 接続が 1 日に 1 回自動切断されるような場合、この方法を取ることで、通信が遮断される期間を短くすることが可能です。
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-pptp"></a>8.2.4.2. PPTP をサポートするモデム</h4></div></div></div><a
              id="id-1.11.6.13.7.2"
              class="indexterm"></a><div
              class="para">
					PPTP (Point-to-Point Tunneling Protocol) プロトコルは Microsoft によって作られました。PPTP は 初期の ADSL で使われましたが、すぐに PPPOE によって置き換えられました。PPTP を使わなければいけない場合は、<a
                class="xref"
                href="sect.virtual-private-network.html#sect.pptp">第 10.2.4 節「PPTP」</a>をご覧ください。
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.adsl-dhcp"></a>8.2.4.3. DHCP をサポートするモデム</h4></div></div></div><div
              class="para">
					モデムとコンピュータがイーサネットケーブル (クロスケーブル) で接続されている場合、通常は DHCP でコンピュータのネットワーク接続を設定します。さらにそのようなモデムは自動的にデフォルトでゲートウェイとして働き、ルーティングを処理します (これは、モデムがコンピュータとインターネットの間のネットワークトラフィックを管理することを意味しています)。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>BACK TO BASICS</em></span> 直接イーサネット接続用のクロスケーブル</strong></p></div></div></div><a
                id="id-1.11.6.13.8.3.2"
                class="indexterm"></a><div
                class="para">
					コンピュータネットワークカードはケーブルの特定のワイヤからデータを受信し、別のワイヤからデータを送信します。コンピュータをローカルネットワークに接続する場合、通常ネットワークカードとリピータまたはスイッチの間をケーブル (ストレートまたはクロスケーブル) で接続します。しかしながら、2 台のコンピュータを直接 (中間にスイッチやリピータを介さずに) 接続したい場合、必ず送信側カードからみた送信ワイヤに伝わる信号を受信側カードからみた受信ワイヤに (その逆も) 伝送させなければいけません。これがクロスケーブルの目的であり、クロスケーブルが使われる理由です。
				</div><div
                class="para">
					ケーブルの種類を区別して用途に合わせて使うという作業は、時間とともにほとんど無意味な作業になりつつある点に注意してください。なぜなら、最近のネットワークカードはケーブルの種類を検出して適切に適用できるからです。従って、ある場所で両方の種類のケーブルが使えるというのは異常ではありません。
				</div></div><div
              class="para">
					市場に出ている多くの「ADSL ルータ」とインターネットサービスプロバイダによって提供されるほとんどの ADSL モデムはこのような方法で使われます。
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.roaming-network-config"></a>8.2.5. ローミングユーザ向けの自動ネットワーク設定</h3></div></div></div><a
            id="id-1.11.6.14.2"
            class="indexterm"></a><a
            id="id-1.11.6.14.3"
            class="indexterm"></a><div
            class="para">
				Falcot の多くのエンジニアはラップトップコンピュータを持っており、自宅でも職務上の目的を果たすためにそれを使います。使用するネットワーク設定は場所によって異なります。自宅では wifi ネットワーク (WPA 鍵で保護されている) を使っているかもしれませんし、その一方で職場ではセキュリティと帯域幅を向上させるために有線ネットワークを使っています。
			</div><div
            class="para">
				対応するネットワークインターフェースを手作業で接続したり切断するのを避けるために、管理者はローミングマシンに <span
              class="pkg pkg">network-manager</span> パッケージをインストールしました。NetworkManager を使うと、ユーザはグラフィカルデスクトップの通知エリアに表示された小さなアイコンを使って、あるネットワークから別のネットワークに簡単に切り替えることが可能です。NetworkManager のアイコンをクリックすると、利用できるネットワーク (有線と無線の両方) のリストが表示されます。このためユーザは単純に使いたいネットワークを選ぶだけです。NetworkManager は接続済みのネットワークの設定を保存します。そして現在の接続が切断された場合、利用できるネットワークから最適なものを選んで、自動的に切り替えます。
			</div><div
            class="para">
				これを行うために、NetworkManager プログラムは 2 つに分割されています。すなわち、ネットワークインターフェースの有効化と設定を担当している root として動くデーモンと、このデーモンを操作するユーザインターフェースの 2 つに分割されています。PolicyKit は NetworkManager プログラムを操作する際に要求される認証を取り扱います。Debian は PolicyKit を設定して、netdev グループが NetworkManager の接続を追加したり、変えることができるようにしています。
			</div><div
            class="para">
				NetworkManager はさまざまな種類の接続 (DHCP、手作業設定、ローカルネットワーク) をサポートしていますが、設定をうまく動作させるには NetworkManager プログラム以外を使ってはいけません。このため、NetworkManager は <code
              class="filename">/etc/network/interfaces</code> に含まれるすべてのネットワークインターフェースのうち、不適切なものを系統的に無視します。NetworkManager はネットワーク接続が見つからない場合にその詳細を教えてくれないので、<code
              class="filename">/etc/network/interfaces</code> から NetworkManager で管理されるすべてのインターフェースに関する設定を削除するのが簡単です。
			</div><div
            class="para">
				NetworkManager は最初のインストール中に「デスクトップ環境」タスクを選んだ場合にデフォルトでインストールされることに注意してください。
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>戻る</strong>第 8 章 基本設定、ネットワーク、アカウント、印刷...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>次へ</strong>8.3. ホスト名と名前解決サービスの設定</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.network-config.html">ar-MA</a></li><li><a
              href="../da-DK/sect.network-config.html">da-DK</a></li><li><a
              href="../de-DE/sect.network-config.html">de-DE</a></li><li><a
              href="../el-GR/sect.network-config.html">el-GR</a></li><li><a
              href="../en-US/sect.network-config.html">en-US</a></li><li><a
              href="../es-ES/sect.network-config.html">es-ES</a></li><li><a
              href="../fa-IR/sect.network-config.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.network-config.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.network-config.html">hr-HR</a></li><li><a
              href="../id-ID/sect.network-config.html">id-ID</a></li><li><a
              href="../it-IT/sect.network-config.html">it-IT</a></li><li><a
              href="../ja-JP/sect.network-config.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.network-config.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.network-config.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.network-config.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.network-config.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.network-config.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.network-config.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.network-config.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.network-config.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.network-config.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.network-config.html">zh-TW</a></li></ul></div></body></html>
