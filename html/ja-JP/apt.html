<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">第 6 章 メンテナンスと更新、APT ツール</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ja-JP-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="prev"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. 他のパッケージングシステムとの共存" /><link
        rel="next"
        href="sect.apt-get.html"
        title="6.2. aptitude、apt-get、apt コマンド" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ja-JP/apt.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>次へ</strong></a></li></ul><div
        xml:lang="ja-JP"
        class="chapter"
        lang="ja-JP"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  id="apt"></a>第 6 章 メンテナンスと更新、APT ツール</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="apt.html#sect.apt-sources.list">6.1. <code
                    class="filename">sources.list</code> ファイルの内容</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.6">6.1.1. 構文</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.7">6.1.2. <span
                        class="distribution distribution">安定版</span> ユーザ用リポジトリ</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.8">6.1.3. <span
                        class="distribution distribution">テスト版</span>/<span
                        class="distribution distribution">不安定版</span>ユーザ向けリポジトリ</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.9">6.1.4. 非公式リソース、<code
                        class="literal">mentors.debian.net</code></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.10">6.1.5. Debian パッケージのキャッシュプロキシ</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-get.html">6.2. <code
                    class="command">aptitude</code>、<code
                    class="command">apt-get</code>、<code
                    class="command">apt</code> コマンド</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.7">6.2.1. 初期設定</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.8">6.2.2. インストールと削除</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-upgrade">6.2.3. システムのアップグレード</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-config">6.2.4. 設定オプション</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt.priorities">6.2.5. パッケージ優先度の管理</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-mix-distros">6.2.6. 複数ディストリビューションの利用</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.automatic-tracking">6.2.7. 自動的にインストールされたパッケージの追跡</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-cache.html">6.3. <code
                    class="command">apt-cache</code> コマンド</a></span></dt><dt><span
                class="section"><a
                  href="sect.apt-frontends.html">6.4. フロントエンド、<code
                    class="command">aptitude</code>、<code
                    class="command">synaptic</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#sect.aptitude">6.4.1. <code
                        class="command">aptitude</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#id-1.9.13.7">6.4.2. <code
                        class="command">synaptic</code></a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.package-authentication.html">6.5. パッケージ信頼性の確認</a></span></dt><dt><span
                class="section"><a
                  href="sect.dist-upgrade.html">6.6. 安定版から次のディストリビューションへのアップグレード</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.3">6.6.1. 推奨手順</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.4">6.6.2. アップグレードの後から問題を取り扱う</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.regular-upgrades.html">6.7. システムを最新の状態に保つ</a></span></dt><dt><span
                class="section"><a
                  href="sect.automatic-upgrades.html">6.8. 自動アップグレード</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.5">6.8.1. <code
                        class="command">dpkg</code> の設定</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.6">6.8.2. APT の設定</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.7">6.8.3. <code
                        class="command">debconf</code> の設定</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.8">6.8.4. コマンドラインインターフェースの制御</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.9">6.8.5. 奇跡の組み合わせ</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.searching-packages.html">6.9. パッケージの検索</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Debian が管理者に人気がある理由は、ソフトウェアのインストールが簡単で、システム全体の更新が簡単だからです。この比類なき長所は、主として <span
              class="emphasis"><em>APT</em></span> プログラムが担っており、Falcot Corp の管理者はこれについて熱心に学びました。
	</div></div><div
          class="para">
		<a
            id="id-1.9.4.1"
            class="indexterm"></a><a
            id="id-1.9.4.2"
            class="indexterm"></a>APT は Advanced Package Tool の略称です。APT を「先進的」たらしめているものとは、パッケージの取り扱い方です。APT はパッケージを独立なものとして単純に評価するのではなく、パッケージ全体を考慮し、(依存関係に従って) 利用できて相性の良いパッケージを選び出すことで、実現できる最適なパッケージの組み合わせを作り出します。
	</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>VOCABULARY</em></span> パッケージソースとソースパッケージ</strong></p></div></div></div><div
            class="para">
		<span
              class="emphasis"><em>ソース</em></span> という言葉を使うと意味が曖昧になる場合があります。ソースパッケージ — プログラムのソースコードを含んだパッケージ — をパッケージソース — パッケージが保存されているリポジトリ (ウェブサイト、FTP サーバ、CD-ROM、ローカルディレクトリなど) — と混同してはいけません。
	</div></div><div
          class="para">
		APT には「パッケージソースのリスト」を与える必要があります。つまり <code
            class="filename">/etc/apt/sources.list</code> には Debian パッケージを公開しているさまざまなリポジトリ (つまり「ソース」) が記載されています。APT はそれぞれのソースで公開されているパッケージのリストを取り込みます。具体的に言うと、バイナリパッケージソースの場合は <code
            class="filename">Packages.xz</code> ファイルまたは別の方法で圧縮されたファイル (<code
            class="filename">Packages.gz</code> や <code
            class="filename">Packages.bz2</code>)、ソースパッケージソースの場合は <code
            class="filename">Sources.xz</code> ファイルまたは別の方法で圧縮されたファイルをダウンロードして、内容を解析して、パッケージのリストを取り込みます。これらのファイルの古いコピーが既にあるのなら、APT は差分だけをダウンロードしてファイルを更新することも可能です (補注<a
            class="xref"
            href="sect.apt-get.html#sidebar.apt-pdiff">「<span
              class="emphasis"><em>TIP</em></span> 増分アップグレード」</a>を参照してください)。
	</div><a
          id="id-1.9.7"
          class="indexterm"></a><a
          id="id-1.9.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>BACK TO BASICS</em></span> <code
                      class="command">gzip</code>、<code
                      class="command">bzip2</code>、<code
                      class="command">LZMA</code>、<code
                      class="command">XZ</code> 圧縮</strong></p></div></div></div><a
            id="id-1.9.9.2"
            class="indexterm"></a><a
            id="id-1.9.9.3"
            class="indexterm"></a><a
            id="id-1.9.9.4"
            class="indexterm"></a><a
            id="id-1.9.9.5"
            class="indexterm"></a><div
            class="para">
		<code
              class="filename">.gz</code> 拡張子は <code
              class="command">gzip</code> ユーティリティで圧縮されたファイルを意味しています。<code
              class="command">gzip</code> は高速かつ効率的にファイルを圧縮する伝統的 Unix ユーティリティです。新しいツールを使えば圧縮効率は高くなるのですが、その代わりにファイルを圧縮および展開するために多くのリソース (計算時間とメモリ) が必要になります。新しいツールには、登場順に <code
              class="command">bzip2</code> (<code
              class="filename">.bz2</code> 拡張子のファイルを生成)、<code
              class="command">lzma</code> (<code
              class="filename">.lzma</code> ファイル)、<code
              class="command">xz</code> (<code
              class="filename">.xz</code> ファイル) などがあります。
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    id="sect.apt-sources.list"></a>6.1. <code
                    class="filename">sources.list</code> ファイルの内容</h2></div></div></div><a
            id="id-1.9.10.2"
            class="indexterm"></a><a
            id="id-1.9.10.3"
            class="indexterm"></a><a
            id="id-1.9.10.4"
            class="indexterm"></a><a
            id="id-1.9.10.5"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="id-1.9.10.6"></a>6.1.1. 構文</h3></div></div></div><div
              class="para">
				<code
                class="filename">/etc/apt/sources.list</code> ファイルの有効な各行にはソースの説明が含まれ、ソースの説明は空白で分割された 3 つのフィールドからなります。
			</div><div
              class="para">
				1 番目のフィールドはソースタイプです。
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						「<code
                      class="literal">deb</code>」はバイナリパッケージ用です。
					</div></li><li
                  class="listitem"><div
                    class="para">
						「<code
                      class="literal">deb-src</code>」はソースパッケージ用です。
					</div></li></ul></div><div
              class="para">
				2 番目のフィールドはパッケージソースの基点 URL です (基点 URL は <code
                class="filename">Packages.gz</code> ファイル内のファイル名と組み合わせて使われます。さらに基点 URL は完全で有効な URL でなければいけません)。起点 URL には Debian アーカイブミラーまたはサードパーティが提供する他のパッケージアーカイブを指定できます。基点 URL はシステムのファイル階層構造の中にあるローカルソースを表す <code
                class="literal">file://</code>、ウェブサーバにあるソースを示す <code
                class="literal">http://</code>、FTP サーバにあるソースを示す <code
                class="literal">ftp://</code> で始めることも可能です。さらに基点 URL は CD-ROM/DVD-ROM/Blu-ray ディスクからインストールしたことを表す <code
                class="literal">cdrom:</code> で始めることも可能です。しかし基点 URL に <code
                class="literal">cdrom:</code> を設定する場合はそれほど多くありません。なぜなら、ネットワークを使ったインストール方法がずっと一般的だからです。
			</div><div
              class="para">
				最後のフィールドの構文はリポジトリの構造に依存します。最も単純な場合、このフィールドにはソースから見たサブディレクトリ (末尾スラッシュ必須) を指定します (サブディレクトリがない、つまりパッケージが指定された URL の直下にあることを示す単純な「<code
                class="filename">./</code>」を指定する場合が多いです)。しかし最も多く見られるのは、リポジトリが Debian アーカイブミラーのように構造化されている、つまり複数のコンポーネントを持つ複数のディストリビューションを配布している場合です。この場合、そのマシンのディストリビューションの名前 (「コードネーム」(補注<a
                class="xref"
                href="sect.foundation-documents.html#sidebar.bruce-perens">「<span
                  class="emphasis"><em>COMMUNITY</em></span> Bruce Perens、賛否の分かれるリーダー」</a>を参照してください) または対応する「スイート」つまり <code
                class="literal">stable</code>、<code
                class="literal">testing</code>、<code
                class="literal">unstable</code>) を指定し、その後に有効化するコンポーネント (またはセクション) を指定します (典型的な Debian アーカイブミラーでは <code
                class="literal">main</code>、<code
                class="literal">contrib</code>、<code
                class="literal">non-free</code> などを指定します)。
			</div><div
              class="sidebar"><a
                id="sidebar.sections"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> <code
                          class="literal">main</code>、<code
                          class="literal">contrib</code>、<code
                          class="literal">non-free</code> アーカイブ</strong></p></div></div></div><a
                id="id-1.9.10.6.7.2"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.3"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.4"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.5"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.6"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.7"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.8"
                class="indexterm"></a><div
                class="para">
				Debian では、ソフトウェアの作者が決めたライセンスを基準に、パッケージを 3 つのセクションに分類しています。<code
                  class="literal">main</code> には Debian フリーソフトウェアガイドラインに完全に適合するすべてのパッケージが収録されています。
			</div><div
                class="para">
				これに対して、<code
                  class="literal">non-free</code> アーカイブには、Debian フリーソフトウェアガイドラインに適合しない (または完全に適合するわけではない) ものの制限なく配布することを許されたソフトウェアが収録されています。<code
                  class="literal">non-free</code> アーカイブは公式には Debian の一部ではなく、これらのプログラムを必要としているユーザ向けのサービスです。しかし Debian は常にフリーソフトウェアを重点的に使うことを推奨します。<code
                  class="literal">non-free</code> セクションの存在は Richard M. Stallman にとって無視できない問題であり、フリーソフトウェア財団は <code
                  class="literal">non-free</code> セクションの存在を理由に Debian をユーザに推奨していません。
			</div><div
                class="para">
				<code
                  class="literal">contrib</code> (貢献) には、フリーではない要素を使わなければ動かないオープンソースソフトウェアが収録されています。フリーではない要素とは <code
                  class="literal">non-free</code> セクションに収録されたソフトウェア、およびたとえばゲーム ROM、コンソールの BIOS、などのフリーではないファイルを指します。また、<code
                  class="literal">contrib</code> にはコンパイルの際にプロプライエタリな要素を必要とするフリーソフトウェアが収録されています。当初このようなフリーソフトウェアにはプロプライエタリな Java 環境を必要としていた OpenOffice.org オフィススイートなどがありました。
			</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> <code
                          class="filename">/etc/apt/sources.list.d/*.list</code> ファイル</strong></p></div></div></div><div
                class="para">
				多数のパッケージソースを利用する場合、これらを複数のファイルに分割すると役に立つかもしれません。この場合、各パッケージソースを <code
                  class="filename">/etc/apt/sources.list.d/<em
                    class="replaceable">filename</em>.list</code> に保存します (補注<a
                  class="xref"
                  href="sect.apt-get.html#sidebar.directory.d">「<span
                    class="emphasis"><em>BACK TO BASICS</em></span> <code
                    class="filename">.d</code> で終わるディレクトリ」</a>を参照してください)。
			</div></div><a
              id="id-1.9.10.6.9"
              class="indexterm"></a><div
              class="para">
				<code
                class="literal">cdrom</code> エントリはあなたの持っている CD/DVD-ROM を表しています。他のエントリと異なり、CD-ROM は常に利用できるわけではありません。なぜなら、ディスクをドライブに挿入しなければいけませんし、一度に 1 つのディスクしか読めないからです。このような理由で、CD-ROM ソースは少し違う方法で管理されます。ソースを追加するには通常 <code
                class="command">apt-cdrom</code> プログラムに <code
                class="literal">add</code> パラメータを付けて実行します。このようにプログラムを実行すると、ドライブにディスクを挿入するよう要求されます。<code
                class="command">apt-cdrom</code> プログラムはディスクの内容を閲覧して <code
                class="filename">Packages</code> ファイルを探します。<code
                class="filename">Packages</code> ファイルは利用できるパッケージに関する APT のデータベースを更新するために利用されます (更新作業は <code
                class="command">apt update</code> コマンドで実行されます)。そして、APT はディスクに含まれるパッケージが必要になったらディスクを挿入するように要求します。
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="id-1.9.10.7"></a>6.1.2. <span
                      class="distribution distribution">安定版</span> ユーザ用リポジトリ</h3></div></div></div><div
              class="para">
				下に示すのは、Debian の<span
                class="distribution distribution">安定版</span>を動かしているシステムで標準的な <code
                class="filename">sources.list</code> です。
			</div><div
              class="example"><a
                id="example.stable-sources-list"></a><p
                class="title"><strong>例 6.1 Debian 安定版ユーザ向けの <code
                    class="filename">/etc/apt/sources.list</code> ファイル</strong></p><div
                class="example-contents"><pre
                  class="programlisting"># セキュリティ更新
deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free

## Debian アーカイブミラー

# ベースリポジトリ
deb http://ftp.debian.org/debian jessie main contrib non-free
deb-src http://ftp.debian.org/debian jessie main contrib non-free

# 安定版更新
deb http://ftp.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.debian.org/debian jessie-updates main contrib non-free

# 安定版バックポート
deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb-src http://ftp.debian.org/debian jessie-backports main contrib non-free</pre></div></div><div
              class="para">
				このファイルは Debian <span
                class="distribution distribution">Jessie</span> (これを書いている時点の <span
                class="distribution distribution">安定版</span>) に関連するパッケージの全ソースをリストしています。ここでディストリビューション名に「jessie」を使い、対応する「stable」(<code
                class="literal">stable</code>、<code
                class="literal">stable-updates</code>、<code
                class="literal">stable-backports</code>) という別名を使わなかったのには理由があります。それは、新しい安定版が公開されることにより自動的にディストリビューションのバージョンが変わることを避けるためです。
			</div><div
              class="para">
				多くのパッケージは「ベースリポジトリ」から取得されます。「ベースリポジトリ」にはすべてのパッケージが収録されていますが、<span
                class="distribution distribution">安定版</span>の「ベースリポジトリ」はめったに更新されません (約 2 カ月に 1 度の「ポイントリリース」で更新されます)。「ベースリポジトリ」以外のリポジトリには一部のパッケージだけが収録されており (すべてパッケージが収録されているわけではありません)、「ベースリポジトリ」以外のリポジトリに更新 (「ベースリポジトリ」に含まれるパッケージの新しいバージョン) が収録されていた場合、APT は更新をインストールします。以下の節ではそれぞれのリポジトリの目的とリポジトリの運営ルールについて説明します。
			</div><div
              class="para">
				あるパッケージの希望したバージョンが複数のリポジトリから取得できる場合、<code
                class="filename">sources.list</code> ファイルにリストされた最初のリポジトリから取得されることに注意してください。この理由から、非公式ソースは通常最後に追加されます。
			</div><div
              class="para">
				ちなみに、この節で<span
                class="distribution distribution">安定版</span>に関して述べていることのほとんどは<span
                class="distribution distribution">旧安定版</span>に関しても同じことが言えます。なぜなら、<span
                class="distribution distribution">旧安定版</span>とは並行してメンテナンスされている古い<span
                class="distribution distribution">安定版</span>に過ぎないからです。
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.security-updates"></a>6.1.2.1. セキュリティ更新</h4></div></div></div><a
                id="id-1.9.10.7.8.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.4"
                class="indexterm"></a><div
                class="para">
					セキュリティ更新リポジトリは Debian アーカイブミラーの通常のネットワーク上ではなく、<code
                  class="literal">security.debian.org</code> (<a
                  class="link"
                  href="sect.debian-internals.html#dsa-team">Debian システム管理者</a>が管理する少数のマシン) でホストされています。セキュリティ更新アーカイブには、<span
                  class="distribution distribution">安定版</span>ディストリビューション用の (Debian セキュリティチームまたはパッケージメンテナが用意した) セキュリティ更新が含まれています。
				</div><div
                class="para">
					<code
                  class="literal">security.debian.org</code> は<span
                  class="distribution distribution">テスト版</span>用のセキュリティ更新もホストしていますが、実際にこれがホストされることはめったにありません。なぜなら、<span
                  class="distribution distribution">テスト版</span>に対するセキュリティ更新は<span
                  class="distribution distribution">不安定版</span>対する通常の更新手順を通じて行われることが多いからです。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.stable-updates"></a>6.1.2.2. 安定版更新</h4></div></div></div><a
                id="id-1.9.10.7.9.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.4"
                class="indexterm"></a><div
                class="para">
					安定版更新リポジトリにはセキュリティに影響をおよぼすパッケージは含まれませんが、その重要性により次回の安定版ポイントリリースよりも前にユーザに提供するだけの価値があるとみなされた更新が含まれています。
				</div><div
                class="para">
					通常、安定版更新リポジトリにはリリースの前に修正できなかったり後続の更新によって生まれた重要なバグの修正が含まれています。さらに緊急度に応じて、時間とともに進化させる必要のあるパッケージの更新を含めることも可能です。これに該当するのはたとえば <span
                  class="pkg pkg">spamassassin</span> のスパム検出ルール、<span
                  class="pkg pkg">clamav</span> のウイルスデータベース、すべてのタイムゾーンの夏時間ルール (<span
                  class="pkg pkg">tzdata</span>) などがあります。
				</div><div
                class="para">
					実質的には、安定版更新リポジトリは内容を <code
                  class="literal">proposed-updates</code> リポジトリからの一部抜粋したものです。安定版更新リポジトリの内容は安定版リリースマネージャが注意深く選んでいます。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.proposed-updates"></a>6.1.2.3. 提案された更新</h4></div></div></div><a
                id="id-1.9.10.7.10.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.10.3"
                class="indexterm"></a><div
                class="para">
					<span
                  class="distribution distribution">安定版</span> ディストリビューションはひとたび公開されたら、約 2 カ月に 1 回だけ更新されます。<code
                  class="literal">proposed-updates</code> リポジトリとは (安定版リリースマネージャの指揮の下で) 今後予定されている更新を準備するためのリポジトリです。
				</div><div
                class="para">
					前の節で説明したセキュリティ更新と安定版更新は、常に <code
                  class="literal">proposed-updates</code> リポジトリに加えられますが、更新は他にもあります。なぜなら、パッケージメンテナは素早くリリースすることもないけれど重要と思われるバグを修正する機会があるからです。
				</div><div
                class="para">
					正式公開前に更新をテストするためには <code
                  class="literal">proposed-updates</code> リポジトリを使います。以下で引用した例は <code
                  class="literal">jessie-proposed-updates</code> という別名を使っています。このような、より明白でより一貫性のある別名を使っている理由は、(<span
                  class="distribution distribution">旧安定版</span> に対する更新用のリポジトリとして) <code
                  class="literal">wheezy-proposed-updates</code> という別名が存在するからです。
				</div><pre
                class="programlisting">deb http://ftp.debian.org/debian jessie-proposed-updates main contrib non-free</pre></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.backports"></a>6.1.2.4. 安定版バックポート</h4></div></div></div><a
                id="id-1.9.10.7.11.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.4"
                class="indexterm"></a><div
                class="para">
					<code
                  class="literal">stable-backports</code> リポジトリは「パッケージのバックポート」をホストしています。「パッケージのバックポート」という用語は古いディストリビューション (通常は<span
                  class="distribution distribution">安定版</span>) 用に再コンパイルした最新ソフトウェアのパッケージを指す言葉です。
				</div><div
                class="para">
					<span
                  class="distribution distribution">安定版</span>ディストリビューションの公開から少し時間が経っただけで、多くのソフトウェアプロジェクトが新バージョンをリリースします。しかしながら、ソフトウェアの新バージョンは現在の<span
                  class="distribution distribution">安定版</span>に組み込まれません (<span
                  class="distribution distribution">安定版</span>に組み込まれるのはセキュリティ問題などの最も重要な問題に対する修正に限られています)。安定性の観点から<span
                  class="distribution distribution">テスト版</span>や<span
                  class="distribution distribution">不安定版</span>ディストリビューションを使うのは危険過ぎると考える安定版のユーザ向けに、パッケージメンテナはしばしば<span
                  class="distribution distribution">安定版</span>向けに最新のソフトウェアアプリケーションを再コンパイルして提供することがあります。バックポートされたパッケージを使うことにより、安定版のユーザはシステムの不安定性をバックポートされたパッケージに起因する不安定性だけに制限することが可能です。<div
                  class="url">→ <a
                    href="http://backports.debian.org">http://backports.debian.org</a></div>
				</div><div
                class="para">
					今や <code
                  class="literal">stable-backports</code> リポジトリは普通の Debian アーカイブミラーから利用できます。しかし <span
                  class="distribution distribution">Squeeze</span> 用のバックポートはまだ専用サーバ (<code
                  class="literal">backports.debian.org</code>) でホストされており、以下の <code
                  class="filename">sources.list</code> エントリが必要です。
				</div><a
                id="id-1.9.10.7.11.8"
                class="indexterm"></a><pre
                class="programlisting">deb http://backports.debian.org/debian-backports squeeze-backports main contrib non-free</pre><div
                class="para">
					<code
                  class="literal">stable-backports</code> に収録されているバックポートは常に<span
                  class="distribution distribution">テスト版</span>で利用できるパッケージから作成されます。このおかげで、次の Debian 安定版リリースが利用できるようになったら、すべてのインストール済みバックポートパッケージはそれに対応する安定版から提供されたパッケージにアップグレードできることが保証されています。
				</div><div
                class="para">
					<code
                  class="literal">stable-backports</code> リポジトリはパッケージの新しいバージョンを提供しますが、APT は以下に示すように明確な指示を出さない限り (または以前に同じバックポートの古いバージョンをインストールしていない限り) バックポートパッケージをインストールしません。
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install <em
                      class="replaceable">package</em>/jessie-backports
</code></strong><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install -t jessie-backports <em
                      class="replaceable">package</em>
</code></strong></pre></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="id-1.9.10.8"></a>6.1.3. <span
                      class="distribution distribution">テスト版</span>/<span
                      class="distribution distribution">不安定版</span>ユーザ向けリポジトリ</h3></div></div></div><div
              class="para">
				以下に示すのは、Debian の<span
                class="distribution distribution">テスト版</span>や<span
                class="distribution distribution">不安定版</span>を動かしているシステムで標準的な <code
                class="filename">sources.list</code> です。
			</div><div
              class="example"><a
                id="example.testing-sources-list"></a><p
                class="title"><strong>例 6.2 Debian <span
                    class="distribution distribution">テスト版</span>/<span
                    class="distribution distribution">不安定版</span>ユーザ向けの <code
                    class="filename">/etc/apt/sources.list</code> ファイル</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
# 不安定版
deb http://ftp.debian.org/debian unstable main contrib non-free
deb-src http://ftp.debian.org/debian unstable main contrib non-free

# テスト版
deb http://ftp.debian.org/debian testing main contrib non-free
deb-src http://ftp.debian.org/debian testing main contrib non-free

# 安定版
deb http://ftp.debian.org/debian stable main contrib non-free
deb-src http://ftp.debian.org/debian stable main contrib non-free

# セキュリティ更新
deb http://security.debian.org/ stable/updates main contrib non-free
deb http://security.debian.org/ testing/updates main contrib non-free
deb-src http://security.debian.org/ stable/updates main contrib non-free
deb-src http://security.debian.org/ testing/updates main contrib non-free</pre></div></div><div
              class="para">
				この <code
                class="filename">sources.list</code> ファイルを使う場合、APT は<span
                class="distribution distribution">不安定版</span>からパッケージをインストールします。これを望まない場合、<code
                class="literal">APT::Default-Release</code> 設定を使って (<a
                class="xref"
                href="sect.apt-get.html#sect.apt-upgrade">第 6.2.3 節「システムのアップグレード」</a>をご覧ください) APT に他のディストリビューションから (今回の場合<span
                class="distribution distribution">テスト版</span>から) パッケージを取得するよう伝えます。
			</div><div
              class="para">
				ここで指定するリポジトリは 1 種類のバージョンに対するリポジトリだけでも十分なのに、3 種類のバージョンに対するリポジトリを含めているのには正当な理由があります。<span
                class="distribution distribution">テスト版</span>のユーザなら、あるパッケージの<span
                class="distribution distribution">テスト版</span>に含まれるバージョンが厄介なバグの影響を受けている場合、そのパッケージを<span
                class="distribution distribution">不安定版</span>に含まれる修正済みバージョンにアップグレードできれば嬉しいでしょう。逆に、<span
                class="distribution distribution">不安定版</span>のユーザなら、あるパッケージの<span
                class="distribution distribution">不安定版</span>に含まれるバージョンに前のバージョンになかった不具合がある場合、そのパッケージを<span
                class="distribution distribution">テスト版</span>に含まれる (おそらく動く) バージョンにダウングレードすることも可能です。
			</div><div
              class="para">
				ここに<span
                class="distribution distribution">安定版</span>用のリポジトリが含まれている点については異論があるかもしれませんが、こうすることで開発版から削除されたパッケージを入手できるようになります。また、最新安定版リリース以降に変更さていないパッケージの最新更新を手に入れることも保証されます。
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="id-1.9.10.8.7"></a>6.1.3.1. <span
                        class="distribution distribution">実験版</span>リポジトリ</h4></div></div></div><a
                id="id-1.9.10.8.7.2"
                class="indexterm"></a><div
                class="para">
					<span
                  class="distribution distribution">実験版</span>パッケージのアーカイブはすべての Debian アーカイブミラーに存在し、品質基準を満たしていないためにまだ<span
                  class="distribution distribution">不安定版</span>に収録されていないパッケージを含んでいます。すなわち、<span
                  class="distribution distribution">実験版</span>に含まれるパッケージはソフトウェアの開発版バージョンか先行バージョン (アルファ、ベータ、リリース候補など) であることが多いです。パッケージに対する一連の修正によって問題が引き起こされる可能性がある場合も、パッケージは<span
                  class="distribution distribution">実験版</span>に送られます。メンテナは、重要な問題を取り扱う能力を持つ先進的なユーザの助けを借りて、その問題を明らかにしようとします。この最初のステージの後、パッケージは<span
                  class="distribution distribution">不安定版</span>に移動されます。<span
                  class="distribution distribution">不安定版</span>に移動されたパッケージはより多くのユーザに配布され、より詳細にテストされます。
				</div><div
                class="para">
					<span
                  class="distribution distribution">実験版</span>リポジトリを使うのは通常、システムを破壊したり修復することを気にしないユーザです。<span
                  class="distribution distribution">実験版</span>リポジトリを使うユーザは必要に応じて試してみたいか使ってみたいと思ったパッケージを<span
                  class="distribution distribution">実験版</span>からシステムに取り込むことができます。これはまさに Debian が<span
                  class="distribution distribution">実験版</span>を活用する時の方法です。なぜなら、<span
                  class="distribution distribution">実験版</span>リポジトリを APT の <code
                  class="filename">sources.list</code> ファイルに追加しても、実験版パッケージを体系的に利用することにはならないからです。<span
                  class="distribution distribution">実験版</span>リポジトリを追加するには以下を <code
                  class="filename">sources.list</code> ファイルに追加します。
				</div><div
                class="informalexample"><pre
                  class="programlisting">deb http://ftp.debian.org/debian experimental main contrib non-free</pre></div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="id-1.9.10.9"></a>6.1.4. 非公式リソース、<code
                      class="literal">mentors.debian.net</code></h3></div></div></div><a
              id="id-1.9.10.9.2"
              class="indexterm"></a><div
              class="para">
				Debian パッケージの非公式ソースはたくさんあります。非公式ソースはソフトウェアを再コンパイルした先進的ユーザ (Ubuntu は Personal Package Archive サービスを提供することで先進的ユーザの提供する非公式ソースを普及させました)、自分の創作物を誰でも利用できる状態にするプログラマ、自分のパッケージの先行バージョンをオンラインで提供する Debian 開発者によって提供されています。
			</div><div
              class="para">
				<code
                class="literal">mentors.debian.net</code> サイトは興味深いものです (ただしこのサイトが配布しているのはソースパッケージだけです)。なぜなら <code
                class="literal">mentors.debian.net</code> には、パッケージの組み込み過程を経ずに、公式 Debian 開発者の候補者や Debian パッケージを作りたいと望むボランティアが作成したパッケージが集められているからです。<code
                class="literal">mentors.debian.net</code> に集められたパッケージは、品質保証のないまま、利用できるようになっています。このため、起源と整合性を必ず確認し、稼働中のシステムでパッケージを使う前にパッケージを必ずテストしてください。
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>COMMUNITY</em></span> <code
                          class="literal">debian.net</code> サイト</strong></p></div></div></div><a
                id="id-1.9.10.9.5.2"
                class="indexterm"></a><div
                class="para">
				<span
                  class="emphasis"><em>debian.net</em></span> ドメインは Debian プロジェクトの公式所有物ではありません。それぞれの Debian 開発者は自分用に <span
                  class="emphasis"><em>debian.net</em></span> ドメイン名を使うことが許されています。そのようなウェブサイトには、Debian プロジェクトに所属せず Debian 開発者が設けたマシンでホストされている非公式サービス (個人サイト) や今まさに <span
                  class="emphasis"><em>debian.org</em></span> に移動されようとしているサービスの試作品が含まれています。一部のサービスの試作品が <span
                  class="emphasis"><em>debian.net</em></span> に残されている理由は 2 つあります。すなわち、誰もそのサービスを公式化する (<span
                  class="emphasis"><em>debian.org</em></span> ドメインでホストしてメンテナンスを保証する) のに必要な作業を行わなかったか、そのサービスを公式化するのはあまりに議論の余地がありすぎるかのどちらかです。
			</div></div><div
              class="para">
				あるパッケージをインストールすることは、パッケージの作者に root 権限を与えることを意味しています。なぜなら、パッケージ作者は root 権限で実行される初期化スクリプトの内容を決定するからです。公式 Debian パッケージは、パッケージの起源と整合性が確認できるように、選出され審査を受けたボランティアとパッケージの内容の責任を請け負うことができるボランティアによって作成されます。
			</div><div
              class="para">
				一般に、出自が不明で公式 Debian サーバの 1 つでホストされていないパッケージには警戒してください。つまり、作者の信頼度を評価し、パッケージの整合性を確認してください。<div
                class="url">→ <a
                  href="http://mentors.debian.net/">http://mentors.debian.net/</a></div>
			</div><div
              class="sidebar"><a
                id="sidebar.snapshot.debian.org"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> パッケージの古いバージョン、<code
                          class="literal">snapshot.debian.org</code></strong></p></div></div></div><a
                id="id-1.9.10.9.8.2"
                class="indexterm"></a><div
                class="para">
				2010 年 4 月に登場した <code
                  class="literal">snapshot.debian.org</code> サービスにより、「時間を逆行」したり、パッケージの古いバージョンを見つけることが可能になりました。<code
                  class="literal">snapshot.debian.org</code> サービスは、たとえばパッケージのどのバージョンで前のバージョンになかった不具合が発生したかを特定するために、より正確に言えば、不具合が修正されるまでの期間中に古いバージョンを利用するために、使えます。
			</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="id-1.9.10.10"></a>6.1.5. Debian パッケージのキャッシュプロキシ</h3></div></div></div><a
              id="id-1.9.10.10.2"
              class="indexterm"></a><a
              id="id-1.9.10.10.3"
              class="indexterm"></a><div
              class="para">
				マシンのネットワーク全体で、同じ更新済みパッケージをダウンロードするために同じリモートサーバを使うよう設定されている場合、管理者はネットワークのローカルキャッシュとして振る舞う中間プロキシを用意するのは有益なことであると知っています (補注<a
                class="xref"
                href="sect.apt-cache.html#sidebar.cache">「<span
                  class="emphasis"><em>VOCABULARY</em></span> キャッシュ」</a>を参照してください)。
			</div><div
              class="para">
				APT が「標準的な」プロキシを使うように設定することも可能です (APT 側は<a
                class="xref"
                href="sect.apt-get.html#sect.apt-config">第 6.2.4 節「設定オプション」</a>、プロキシ側は<a
                class="xref"
                href="sect.http-ftp-proxy.html">第 11.6 節「HTTP/FTP プロキシ」</a>を参照してください)。しかしながら、Debian にはこの問題に対するより優れた選択肢が準備されています。この節で取り上げる専用ソフトウェアは単純なプロキシキャッシュよりも賢いです。なぜなら、このソフトウェアは APT リポジトリの特定の構造を頼りにできるからです (たとえば、個々のファイルが時代遅れになるタイミングがわかるので、ファイルを保存しておく時間を調整できます)。
			</div><a
              id="id-1.9.10.10.6"
              class="indexterm"></a><a
              id="id-1.9.10.10.7"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">apt-cacher</span> と <span
                class="pkg pkg">apt-cacher-ng</span> は普通のプロキシキャッシュサーバのように振る舞います。APT の <code
                class="filename">sources.list</code> を変更する必要はありませんが、APT の外部リクエスト用のプロキシ設定をこれらのプロキシキャッシュサーバに変更する必要があります。
			</div><a
              id="id-1.9.10.10.9"
              class="indexterm"></a><div
              class="para">
				これに対して、<span
                class="pkg pkg">approx</span> は基点 URL の下にある複数のリモートリポジトリを「ミラー」する HTTP サーバのように振る舞います。最上位ディレクトリの名前とリモート側リポジトリの基点 URL の対応関係は <code
                class="filename">/etc/approx/approx.conf</code> に保存されています。
			</div><pre
              class="programlisting">
# &lt;最上位ディレクトリの名前&gt; &lt;リモート側リポジトリの基点 URL&gt;
debian   http://ftp.debian.org/debian
security http://security.debian.org</pre><div
              class="para">
				<span
                class="pkg pkg">approx</span> のデフォルト設定では、inetd (<a
                class="xref"
                href="sect.inetd.html">第 9.6 節「<code
                  class="command">inetd</code> スーパーサーバ」</a>を参照してください) 経由でポート 9999 番を使います。ユーザは基点 URL が approx サーバを指すように <code
                class="filename">sources.list</code> ファイルを書き換えなければいけません。
			</div><pre
              class="programlisting"># ローカル approx サーバを利用する設定を施した sources.list の見本
deb http://apt.falcot.com:9999/security jessie/updates main contrib non-free
deb http://apt.falcot.com:9999/debian jessie main contrib non-free
</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>戻る</strong>5.5. 他のパッケージングシステムとの共存</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>次へ</strong>6.2. aptitude、apt-get、apt コマンド</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/apt.html">ar-MA</a></li><li><a
              href="../da-DK/apt.html">da-DK</a></li><li><a
              href="../de-DE/apt.html">de-DE</a></li><li><a
              href="../el-GR/apt.html">el-GR</a></li><li><a
              href="../en-US/apt.html">en-US</a></li><li><a
              href="../es-ES/apt.html">es-ES</a></li><li><a
              href="../fa-IR/apt.html">fa-IR</a></li><li><a
              href="../fr-FR/apt.html">fr-FR</a></li><li><a
              href="../hr-HR/apt.html">hr-HR</a></li><li><a
              href="../id-ID/apt.html">id-ID</a></li><li><a
              href="../it-IT/apt.html">it-IT</a></li><li><a
              href="../ja-JP/apt.html">ja-JP</a></li><li><a
              href="../ko-KR/apt.html">ko-KR</a></li><li><a
              href="../nb-NO/apt.html">nb-NO</a></li><li><a
              href="../pl-PL/apt.html">pl-PL</a></li><li><a
              href="../pt-BR/apt.html">pt-BR</a></li><li><a
              href="../ro-RO/apt.html">ro-RO</a></li><li><a
              href="../ru-RU/apt.html">ru-RU</a></li><li><a
              href="../tr-TR/apt.html">tr-TR</a></li><li><a
              href="../zh-CN/apt.html">zh-CN</a></li><li><a
              href="../zh-TW/apt.html">zh-TW</a></li></ul></div></body></html>
