<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.3. Structure d'un paquet source</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Paquet binaire, Paquet source, dpkg, Dépendances, Conflit" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Chapitre 5. Système de paquetage, outils et principes fondamentaux" /><link
        rel="prev"
        href="sect.package-meta-information.html"
        title="5.2. Méta-informations d'un paquet" /><link
        rel="next"
        href="sect.manipulating-packages-with-dpkg.html"
        title="5.4. Manipuler des paquets avec dpkg" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/fr-FR/sect.source-package-structure.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.source-package-structure"></a>5.3. Structure d'un paquet source</h2></div></div></div><a
          id="id-1.8.7.2"
          class="indexterm"></a><a
          id="id-1.8.7.3"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.8.7.4"></a>5.3.1. Format</h3></div></div></div><a
            id="id-1.8.7.4.2"
            class="indexterm"></a><a
            id="id-1.8.7.4.3"
            class="indexterm"></a><a
            id="id-1.8.7.4.4"
            class="indexterm"></a><a
            id="id-1.8.7.4.5"
            class="indexterm"></a><div
            class="para">
				Un paquet source est habituellement constitué de 3 fichiers : un <code
              class="filename">.dsc</code>, un <code
              class="filename">.orig.tar.gz</code> et un <code
              class="filename">.debian.tar.gz</code> (ou <code
              class="filename">.diff.gz</code>). Ils permettent de créer les paquets binaires (les fichiers <code
              class="filename">.deb</code> décrits plus haut) du programme à partir de son code source, écrit en langage de programmation.
			</div><div
            class="para">
				Le fichier <code
              class="filename">.dsc</code> (<span
              class="foreignphrase"><em
                class="foreignphrase">Debian Source Control</em></span>, ou contrôle des sources de Debian) est un court fichier texte contenant un en-tête RFC 2822 (tout comme le fichier <code
              class="filename">control</code> étudié dans la <a
              class="xref"
              href="sect.package-meta-information.html#sect.control">Section 5.2.1, « Description : fichier <code
                class="filename">control</code> »</a>) qui décrit le paquet source et indique quels autres fichiers en font partie. Il est signé par son mainteneur, ce qui en garantit l'authenticité — consulter la <a
              class="xref"
              href="sect.package-authentication.html">Section 6.5, « Vérification d'authenticité des paquets »</a> pour plus de détails à ce sujet.
			</div><div
            class="example"><a
              id="id-1.8.7.4.8"></a><p
              class="title"><strong>Exemple 5.1. Un fichier <code
                  class="filename">.dsc</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.62-3
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.6
Vcs-Browser: http://anonscm.debian.org/gitweb/?p=collab-maint/zim.git
Vcs-Git: git://anonscm.debian.org/collab-maint/zim.git
Build-Depends: debhelper (&gt;= 9), xdg-utils, python (&gt;= 2.6.6-3~), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg
Package-List:
 zim deb x11 optional arch=all
Checksums-Sha1:
 ad8de170826682323c10195b65b9f1243fd75637 1772246 zim_0.62.orig.tar.gz
 a4f70d6f7fb404022c9cc4870a4e62ea3ca08388 14768 zim_0.62-3.debian.tar.xz
Checksums-Sha256:
 19d62aebd2c1a92d84d80720c6c1dcdb779c39a2120468fed01b7f252511bdc2 1772246 zim_0.62.orig.tar.gz
 fc2e827e83897d5e33f152f124802c46c3c01c5158b75a8275a27833f1f6f1de 14768 zim_0.62-3.debian.tar.xz
Files:
 43419efba07f7086168442e3d698287a 1772246 zim_0.62.orig.tar.gz
 725a69663a6c2961f07673ae541298e4 14768 zim_0.62-3.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
Comment: Signed by Raphael Hertzog

iQEcBAEBCAAGBQJUR2jqAAoJEAOIHavrwpq5WFcH/RsdzCHc1oXXxHitU23hEqMj
T6ok29M1UFDJDowMXW75jQ1nT4WPUtvEGygkCHeoO/PvjEvB0sjU8GQlX+N9ddSB
aHfqfAYmVhADNGxrXQT5inZXUa8qGeeq2Sqf6YcWtsnuD56lDbvxkyf/XYopoIEl
oltfl05z/AI+vYsW482YrCz0fxNAKAvkyuPhDebYI8jnKWeAANoqmKpsNc/HYyvT
+ZiA5o57OiGdOKT6XGy3/FiF3dkHiRY8lXW7xdr1BbIgulwl9UmiUNwuxwOYbQO7
edtjiTJqOaFUA0x1zB/XGv5tHr1MjP8naT+kfVoVHTOox51CDbeu5D3DZY4imcY=
=Wtoa
-----END PGP SIGNATURE-----</pre></div></div><a
            id="id-1.8.7.4.9"
            class="indexterm"></a><div
            class="para">
				On notera au passage que le paquet source compte lui aussi des dépendances (<code
              class="literal">Build-Depends</code>), totalement distinctes de celles des paquets binaires, puisqu'il s'agit d'outils nécessaires pour compiler le logiciel concerné et construire son paquet binaire.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENTION</em></span> Espaces de noms distincts</strong></p></div></div></div><div
              class="para">
				Il est important de voir qu'il n'y a pas forcément correspondance entre le nom du paquet source et celui du ou des paquets binaires qu'il génère — c'est assez facile à comprendre si l'on sait que chaque paquet source peut générer plusieurs paquets binaires. C'est pourquoi le fichier <code
                class="filename">.dsc</code> dispose des champs <code
                class="literal">Source</code> et <code
                class="literal">Binary</code> pour nommer explicitement le paquet source et stocker la liste des paquets binaires qu'il génère.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> Pourquoi séparer en plusieurs paquets</strong></p></div></div></div><div
              class="para">
				Il est très fréquent qu'un paquet source (donc un ensemble logiciel donné) génère plusieurs paquets binaires. Les raisons sont multiples : un logiciel peut souvent être utilisé dans différents contextes ; ainsi une bibliothèque partagée peut être installée pour faire fonctionner une application (par exemple <span
                class="pkg pkg">libc6</span>), ou alors elle peut être installée pour développer un nouveau logiciel (<span
                class="pkg pkg">libc6-dev</span> sera alors le bon paquet). On retrouve la même logique pour des services client/serveur où l'on souhaite installer la partie serveur sur une première machine et la partie client sur d'autres (c'est par exemple le cas de <span
                class="pkg pkg">openssh-server</span> et <span
                class="pkg pkg">openssh-client</span>).
			</div><div
              class="para">
				Il est également fréquent que la documentation soit fournie dans un paquet dédié : l'utilisateur peut l'installer indépendamment du logiciel et peut à tout moment choisir de la supprimer pour gagner de l'espace disque. En outre, cela constitue une économie d'espace disque sur les miroirs Debian puisque le paquet de documentation sera alors partagé entre toutes les architectures (au lieu d'avoir la documentation dupliquée dans les paquets de chaque architecture).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>PERSPECTIVE</em></span> Différents formats de paquet source</strong></p></div></div></div><div
              class="para">
				À l'origine, il n'y avait qu'un seul format de paquet source. Il s'agit du format <code
                class="literal">1.0</code> qui associe une archive <code
                class="filename">.orig.tar.gz</code> à un patch de « debianisation » <code
                class="filename">.diff.gz</code> (il existe aussi une variante — constituée d'une seule archive <code
                class="filename">.tar.gz</code> — qui est automatiquement employée si aucun fichier <code
                class="filename">.orig.tar.gz</code> n'est disponible).
			</div><div
              class="para">
				Depuis Debian <span
                class="distribution distribution">Squeeze</span>, les développeurs Debian ont la possibilité d'opter pour de nouveaux formats qui corrigent de nombreuses limitations du format historique. Ainsi le format « <code
                class="literal">3.0 (quilt)</code> » permet d'avoir dans un même paquet source plusieurs archives en amont : en plus de l'habituel <code
                class="filename">.orig.tar.gz</code>, on peut inclure des <code
                class="filename">.orig-<em
                  class="replaceable">composant</em>.tar.gz</code> pour tenir compte des logiciels qui sont distribués en plusieurs composants en amont mais dont on souhaite ne faire qu'un paquet source. Ces archives peuvent également être compressées avec <code
                class="command">bzip2</code> ou <code
                class="command">xz</code> au lieu de <code
                class="command">gzip</code>, d'où un gain d'espace disque et de ressources réseau. Enfin, le <span
                class="foreignphrase"><em
                  class="foreignphrase">patch</em></span> monolithique <code
                class="filename">.diff.gz</code> est remplacé par une archive <code
                class="filename">.debian.tar.gz</code> contenant les instructions de compilation et les modifications unitaires apportées par le mainteneur du paquet. Ces dernières sont enregistrées sous une forme compatible avec <code
                class="command">quilt</code> — un outil facilitant la gestion d'une série de <span
                class="foreignphrase"><em
                  class="foreignphrase">patchs</em></span>.
			</div></div><div
            class="para">
				Le fichier <code
              class="filename">.orig.tar.gz</code> est une archive contenant les codes sources du programme tels qu'ils ont été fournis par son auteur. Il est demandé aux développeurs de ne pas modifier cette archive afin de pouvoir vérifier facilement la provenance et l'intégrité du fichier (par simple comparaison d'une somme de contrôle) et par respect pour la volonté de certains auteurs.
			</div><div
            class="para">
				Le fichier <code
              class="filename">.debian.tar.gz</code> contient quant à lui l'ensemble des modifications apportées par le mainteneur Debian, notamment l'ajout d'un répertoire <code
              class="filename">debian</code> contenant les instructions à exécuter pour construire un paquet Debian.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>OUTIL</em></span> Décompresser un paquet source</strong></p></div></div></div><a
              id="id-1.8.7.4.16.2"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.3"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.4"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.5"
              class="indexterm"></a><div
              class="para">
				Si l'on dispose d'un paquet source, on peut employer la commande <code
                class="command">dpkg-source</code> (du paquet <span
                class="pkg pkg">dpkg-dev</span>) pour le décompacter :
			</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg-source -x paquet_0.7-1.dsc</code></strong></pre><div
              class="para">
				On peut également employer <code
                class="command">apt-get</code> pour télécharger un paquet source et le décompacter dans la foulée. Il faut cependant disposer de lignes <code
                class="literal">deb-src</code> adéquates dans le fichier <code
                class="filename">/etc/apt/sources.list</code> (décrit plus en détail dans la <a
                class="xref"
                href="apt.html#sect.apt-sources.list">Section 6.1, « Renseigner le fichier <code
                  class="filename">sources.list</code> »</a>). Ces dernières sont employées pour lister des « sources » de paquets sources (c'est-à-dire des serveurs mettant à disposition un ensemble de paquets sources).
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>apt-get source <em
                    class="replaceable">paquet</em></code></strong></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.8.7.5"></a>5.3.2. Utilité chez Debian</h3></div></div></div><div
            class="para">
				Le paquet source est à la base de tout chez Debian. Tous les paquets Debian proviennent d'un paquet source et chaque changement dans un paquet Debian est la conséquence d'une modification réalisée au niveau du paquet source. Les mainteneurs Debian travaillent au niveau du paquet source, en connaissant cependant les conséquences de leurs actions sur les paquets binaires. Le fruit de leur travail se retrouve donc dans les paquets sources disponibles chez Debian : on peut y remonter facilement et tout en découle.
			</div><div
            class="para">
				Lorsqu'une nouvelle version d'un paquet (paquet source et un ou plusieurs paquets binaires) parvient sur le serveur Debian, c'est le paquet source qui est le plus important. En effet, il sera ensuite utilisé par tout un réseau de machines d'architectures différentes pour compilation sur les différentes architectures prises en charge par Debian. Le fait que le développeur envoie également un ou plusieurs paquets binaires pour une architecture donnée (en général i386 ou amd64) est relativement secondaire, puisque tout aurait aussi bien pu être généré automatiquement.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Précédent</strong>5.2. Méta-informations d'un paquet</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>Suivant</strong>5.4. Manipuler des paquets avec dpkg</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.source-package-structure.html">ar-MA</a></li><li><a
              href="../da-DK/sect.source-package-structure.html">da-DK</a></li><li><a
              href="../de-DE/sect.source-package-structure.html">de-DE</a></li><li><a
              href="../el-GR/sect.source-package-structure.html">el-GR</a></li><li><a
              href="../en-US/sect.source-package-structure.html">en-US</a></li><li><a
              href="../es-ES/sect.source-package-structure.html">es-ES</a></li><li><a
              href="../fa-IR/sect.source-package-structure.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.source-package-structure.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.source-package-structure.html">hr-HR</a></li><li><a
              href="../id-ID/sect.source-package-structure.html">id-ID</a></li><li><a
              href="../it-IT/sect.source-package-structure.html">it-IT</a></li><li><a
              href="../ja-JP/sect.source-package-structure.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.source-package-structure.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.source-package-structure.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.source-package-structure.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.source-package-structure.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.source-package-structure.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.source-package-structure.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.source-package-structure.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.source-package-structure.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.source-package-structure.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.source-package-structure.html">zh-TW</a></li></ul></div></body></html>
