<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Chapitre 5. Système de paquetage, outils et principes fondamentaux</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Paquet binaire, Paquet source, dpkg, dépendances, conflit" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="prev"
        href="sect.after-first-boot.html"
        title="4.3. Après le premier démarrage" /><link
        rel="next"
        href="sect.package-meta-information.html"
        title="5.2. Méta-informations d'un paquet" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/fr-FR/packaging-system.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>Suivant</strong></a></li></ul><div
        xml:lang="fr-FR"
        class="chapter"
        lang="fr-FR"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  id="packaging-system"></a>Chapitre 5. Système de paquetage, outils et principes fondamentaux</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="packaging-system.html#sect.binary-package-structure">5.1. Structure d'un paquet binaire</a></span></dt><dt><span
                class="section"><a
                  href="sect.package-meta-information.html">5.2. Méta-informations d'un paquet</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.control">5.2.1. Description : fichier <code
                        class="filename">control</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#idm140565688539152">5.2.2. Scripts de configuration</a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.conffiles">5.2.3. Sommes de contrôle, liste des fichiers de configuration</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.source-package-structure.html">5.3. Structure d'un paquet source</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#idm140565671372208">5.3.1. Format</a></span></dt><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#idm140565671317568">5.3.2. Utilité chez Debian</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.manipulating-packages-with-dpkg.html">5.4. Manipuler des paquets avec <code
                    class="command">dpkg</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm140565671304656">5.4.1. Installation de paquets</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm140565671267648">5.4.2. Suppression de paquet</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm140565671254368">5.4.3. Consulter la base de données de <code
                        class="command">dpkg</code> et inspecter des fichiers <code
                        class="filename">.deb</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#idm140565671201824">5.4.4. Journal de <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#sect.multi-arch">5.4.5. Support multi-architecture</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.coexistence-with-other-packaging-systems.html">5.5. Cohabitation avec d'autres systèmes de paquetages</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		En tant qu'administrateur de système Debian, vous allez régulièrement manipuler des paquets (fichiers <code
              class="filename">.deb</code>) car ils abritent des ensembles fonctionnels cohérents (applications, documentations...) dont ils facilitent l'installation et la maintenance. Mieux vaut donc savoir de quoi ils sont constitués et comment on les utilise.
	</div></div><div
          class="para">
		Vous trouverez ci-après la description des structures et contenus des paquets de type « binaire » puis « source ». Les premiers sont les fichiers <code
            class="filename">.deb</code> directement utilisables par <code
            class="command">dpkg</code> alors que les seconds contiennent les codes sources des programmes ainsi que les instructions pour créer les paquets binaires.
	</div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    id="sect.binary-package-structure"></a>5.1. Structure d'un paquet binaire</h2></div></div></div><a
            id="idm140565667400160"
            class="indexterm"></a><a
            id="idm140565670323056"
            class="indexterm"></a><div
            class="para">
			Le format d'un paquet Debian est conçu de telle sorte que son contenu puisse être extrait sur tout système Unix disposant des commandes classiques <code
              class="command">ar</code>, <code
              class="command">tar</code> et <code
              class="command">gzip</code> (parfois <code
              class="command">xz</code> ou <code
              class="command">bzip2</code>). Cette propriété en apparence anodine est importante du point de vue de la portabilité et de la récupération en cas de catastrophe.
		</div><div
            class="para">
			Imagine, for example, that you mistakenly deleted the <code
              class="command">dpkg</code> program, and that you could thus no longer install Debian packages. <code
              class="command">dpkg</code> being a Debian package itself, it would seem your system would be done for... Fortunately, you know the format of a package and can therefore download the <code
              class="filename">.deb</code> file of the <span
              class="pkg pkg">dpkg</span> package and install it manually (see sidebar <a
              class="xref"
              href="packaging-system.html#sidebar.dpkg-apt-ar"><span
                class="emphasis"><em>OUTILS</em></span> <code
                class="command">dpkg</code>, <code
                class="command">APT</code> et <code
                class="command">ar</code></a>). If by some misfortune one or more of the programs <code
              class="command">ar</code>, <code
              class="command">tar</code> or <code
              class="command">gzip</code>/<code
              class="command">xz</code>/<code
              class="command">bzip2</code> have disappeared, you will only need to copy the missing program from another system (since each of these operates in a completely autonomous manner, without dependencies, a simple copy will suffice). If your system suffered some even more outrageous fortune, and even these don't work (maybe the deepest system libraries are missing?), you should try the static version of <code
              class="command">busybox</code>, which is even more self-contained, and provides subcommands such as <code
              class="command">busybox ar</code>, <code
              class="command">busybox tar</code> and <code
              class="command">busybox gunzip</code>.
		</div><div
            class="sidebar"><a
              id="sidebar.dpkg-apt-ar"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>OUTILS</em></span> <code
                        class="command">dpkg</code>, <code
                        class="command">APT</code> et <code
                        class="command">ar</code></strong></p></div></div></div><a
              id="idm140565674917600"
              class="indexterm"></a><a
              id="idm140565674916480"
              class="indexterm"></a><a
              id="idm140565674915360"
              class="indexterm"></a><div
              class="para">
			<code
                class="command">dpkg</code> est le programme qui permet de manipuler des fichiers <code
                class="filename">.deb</code>, notamment de les extraire, analyser, décompacter, etc.
		</div><div
              class="para">
			<code
                class="command">APT</code> est un ensemble logiciel qui sert à effectuer des modifications globales sur le système : installation ou suppression d'un paquet en gérant les dépendances, mise à jour du système, consultation des paquets disponibles, etc.
		</div><div
              class="para">
			<a
                id="idm140565670582384"
                class="indexterm"></a> Quant au programme <code
                class="command">ar</code>, il permet de manipuler les archives du même nom : <code
                class="command">ar t <em
                  class="replaceable">archive</em></code> donne la liste des fichiers contenus dans l'archive, <code
                class="command">ar x <em
                  class="replaceable">archive</em></code> extrait les fichiers de l'archive dans le répertoire courant, <code
                class="command">ar d <em
                  class="replaceable">archive</em> <em
                  class="replaceable">fichier</em></code> supprime un fichier de l'archive, etc. Sa page de manuel (<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>) documente ses nombreuses autres opérations. <code
                class="command">ar</code> est un outil très rudimentaire et un administrateur Unix ne l'emploiera qu'à de rares occasions contrairement à <code
                class="command">tar</code>, programme de gestion d'archives et de fichiers plus évolué. C'est pourquoi il est facile de restaurer <code
                class="command">dpkg</code> en cas de suppression involontaire. Il suffit de télécharger son paquet Debian et d'extraire le contenu de son archive <code
                class="filename">data.tar.gz</code> dans la racine du système (<code
                class="filename">/</code>) :
		</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>tar -C / -p -xzf data.tar.gz</code></strong></pre></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>B.A.-BA</em></span> Notation des pages de manuel</strong></p></div></div></div><div
              class="para">
			Il est déroutant, pour les néophytes, de trouver dans la littérature des références à « <span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span> ». Il s'agit en fait généralement d'une notation commode pour désigner la page de manuel intitulée <code
                class="literal">ar</code> dans la section 1.
		</div><div
              class="para">
			Il peut aussi arriver que cette notation soit utilisée pour lever des ambiguïtés, par exemple pour différencier la commande <code
                class="command">printf</code> que l'on pourra désigner par <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(1)</span> et la fonction <code
                class="function">printf</code> du langage C, que l'on pourra désigner par <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(3)</span>.
		</div><div
              class="para">
			Le <a
                class="xref"
                href="solving-problems.html">Chapitre 7, <em>Résolution de problèmes et sources d'information</em></a> revient plus longuement sur les pages de manuel (voir <a
                class="xref"
                href="solving-problems.html#sect.manual-pages">Section 7.1.1, « Les pages de manuel »</a>).
		</div></div><div
            class="para">
			Examinons le contenu d'un fichier <code
              class="filename">.deb</code> :
		</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ar t dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">debian-binary
control.tar.gz
data.tar.gz
$ </code><strong
              class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ls</code></strong>
<code
              class="computeroutput">control.tar.gz  data.tar.gz  debian-binary  dpkg_1.16.10_i386.deb
$ </code><strong
              class="userinput"><code>tar tzf data.tar.gz | head -n 15</code></strong>
<code
              class="computeroutput">./
./var/
./var/lib/
./var/lib/dpkg/
./var/lib/dpkg/parts/
./var/lib/dpkg/info/
./var/lib/dpkg/alternatives/
./var/lib/dpkg/updates/
./etc/
./etc/logrotate.d/
./etc/logrotate.d/dpkg
./etc/dpkg/
./etc/dpkg/dpkg.cfg.d/
./etc/dpkg/dpkg.cfg
./etc/alternatives/
$ </code><strong
              class="userinput"><code>tar tzf control.tar.gz</code></strong>
<code
              class="computeroutput">./
./conffiles
./postinst
./md5sums
./prerm
./preinst
./control
./postrm
$ </code><strong
              class="userinput"><code>cat debian-binary</code></strong>
<code
              class="computeroutput">2.0</code></pre><div
            class="para">
			Comme vous le voyez, l'archive <code
              class="command">ar</code> d'un paquet Debian est constituée de trois fichiers :
		</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">debian-binary</code>. This is a text file which simply indicates the version of the <code
                    class="filename">.deb</code> file used (in 2015: version 2.0).
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">control.tar.gz</code>. Ce fichier d'archive rassemble les diverses méta-informations disponibles. Les outils de gestion des paquets y trouvent, entre autres, le nom et la version de l'ensemble abrité. Certaines de ces méta-informations leur permettent de déterminer s'il est ou non possible de l'installer ou de le désinstaller, par exemple en fonction de la liste des paquets déjà présents sur la machine.
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">data.tar.gz</code>. Cette archive contient tous les fichiers à extraire du paquet ; c'est là que sont stockés les exécutables, la documentation, etc. Certains paquets peuvent employer d'autres formats de compression, auquel cas le fichier sera nommé différemment (<code
                    class="filename">data.tar.bz2</code> pour bzip2, <code
                    class="filename">data.tar.xz</code> pour XZ, <code
                    class="filename">data.tar.lzma</code> pour LZMA).
				</div></li></ul></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Précédent</strong>4.3. Après le premier démarrage</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>Suivant</strong>5.2. Méta-informations d'un paquet</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/packaging-system.html">ar-MA</a></li><li><a
              href="../da-DK/packaging-system.html">da-DK</a></li><li><a
              href="../de-DE/packaging-system.html">de-DE</a></li><li><a
              href="../el-GR/packaging-system.html">el-GR</a></li><li><a
              href="../en-US/packaging-system.html">en-US</a></li><li><a
              href="../es-ES/packaging-system.html">es-ES</a></li><li><a
              href="../fa-IR/packaging-system.html">fa-IR</a></li><li><a
              href="../fr-FR/packaging-system.html">fr-FR</a></li><li><a
              href="../hr-HR/packaging-system.html">hr-HR</a></li><li><a
              href="../id-ID/packaging-system.html">id-ID</a></li><li><a
              href="../it-IT/packaging-system.html">it-IT</a></li><li><a
              href="../ja-JP/packaging-system.html">ja-JP</a></li><li><a
              href="../pl-PL/packaging-system.html">pl-PL</a></li><li><a
              href="../pt-BR/packaging-system.html">pt-BR</a></li><li><a
              href="../ro-RO/packaging-system.html">ro-RO</a></li><li><a
              href="../ru-RU/packaging-system.html">ru-RU</a></li><li><a
              href="../tr-TR/packaging-system.html">tr-TR</a></li><li><a
              href="../zh-CN/packaging-system.html">zh-CN</a></li></ul></div></body></html>
