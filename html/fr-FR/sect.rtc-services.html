<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">11.8. Services de communication en temps réel</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Postfix, Apache, NFS, Samba, Squid, OpenLDAP, SIP" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="network-services.html"
        title="Chapitre 11. Services réseau : Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN" /><link
        rel="prev"
        href="sect.ldap-directory.html"
        title="11.7. Annuaire LDAP" /><link
        rel="next"
        href="advanced-administration.html"
        title="Chapitre 12. Administration avancée" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/fr-FR/sect.rtc-services.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.ldap-directory.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="advanced-administration.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.rtc-services"></a>11.8. Services de communication en temps réel</h2></div></div></div><div
          class="para">
			Les services de communication en temps réel (<span
            class="foreignphrase"><em
              class="foreignphrase">Real-Time Communication</em></span>, RTC) regroupent les services de voix sur IP, de video/webcam, de messagerie instantanée (<span
            class="foreignphrase"><em
              class="foreignphrase">instant messaging</em></span>, IM) et de partage de bureaux. Ce chapitre introduit trois services nécessaires dans une infrastructure de communication en temps réel : un serveur TURN, un serveur SIP et un serveur XMPP. Des explications claires et détaillées de comment planifier, installer et gérer ces services sont disponibles en anglais dans le <span
            class="foreignphrase"><em
              class="foreignphrase">Real-Time Communications Quick Start Guide</em></span>, y compris des exemples spécifiques à Debian. <div
            class="url">→ <a
              href="http://rtcquickstart.org">http://rtcquickstart.org</a></div>
		</div><a
          id="id-1.14.11.3"
          class="indexterm"></a><a
          id="id-1.14.11.4"
          class="indexterm"></a><a
          id="id-1.14.11.5"
          class="indexterm"></a><a
          id="id-1.14.11.6"
          class="indexterm"></a><div
          class="para">
			SIP et XMPP peuvent fournir les mêmes services. SIP est un peu plus connu pour la voix sur IP et la vidéo alors que XMPP est traditionnellement utilisé comme protocole de messagerie instantanée. En réalité, les deux peuvent être utilisés pour les deux services. Pour optimiser les options de connectivité, il est recommandé d'exploiter les deux en parallèle.
		</div><a
          id="id-1.14.11.8"
          class="indexterm"></a><a
          id="id-1.14.11.9"
          class="indexterm"></a><div
          class="para">
			Ces deux services utilisent des certificats X.509 pour garantir la confidentialité et l'authentification. La <a
            class="xref"
            href="sect.virtual-private-network.html#sect.easy-rsa">Section 10.2.1.1, « Infrastructure de clés publiques <span
              class="emphasis"><em>easy-rsa</em></span> »</a> donne plus de détails sur la création de ces certificats. Alternativement, on trouvera aussi des explications très utiles dans le <span
            class="foreignphrase"><em
              class="foreignphrase">Real-Time Communications Quick Start Guide</em></span> (en anglais) : <div
            class="url">→ <a
              href="http://rtcquickstart.org/guide/multi/tls.html">http://rtcquickstart.org/guide/multi/tls.html</a></div>
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.rtc-dns-settings"></a>11.8.1. Paramètres DNS pour les services RTC</h3></div></div></div><div
            class="para">
				Les services RTC nécessitent des enregistrements DNS SRV et NAPTR. Voici un exemple de configuration qui peut être mis dans le fichier de zone pour <code
              class="literal">falcot.com</code> :
			</div><a
            id="id-1.14.11.11.3"
            class="indexterm"></a><a
            id="id-1.14.11.11.4"
            class="indexterm"></a><pre
            class="programlisting">
; le serveur où tout va fonctionner
server1            IN     A      198.51.100.19
server1            IN     AAAA   2001:DB8:1000:2000::19

; IPv4 seulement pour TURN pour le moment, certains clients
; ne fonctionnent pas avec IPv6
turn-server        IN     A      198.51.100.19

; adresses IPv4 et IPv6 pour  SIP
sip-proxy          IN     A      198.51.100.19
sip-proxy          IN     AAAA   2001:DB8:1000:2000::19

; adresses IPv4 et IPv6 pour XMPP
xmpp-gw            IN     A      198.51.100.19
xmpp-gw            IN     AAAA   2001:DB8:1000:2000::19

; DNS SRV et NAPTR pour STUN / TURN
_stun._udp  IN SRV    0 1 3467 turn-server.falcot.com.
_turn._udp  IN SRV    0 1 3467 turn-server.falcot.com.
@           IN NAPTR  10 0 "s" "RELAY:turn.udp" "" _turn._udp.falcot.com.

; DNS SRV et NAPTR pour SIP
_sips._tcp  IN SRV    0 1 5061 sip-proxy.falcot.com.
@           IN NAPTR  10 0 "s" "SIPS+D2T" "" _sips._tcp.falcot.com.

; enregistrements DNS SRV pour les modes XMPP Server et Client:
_xmpp-client._tcp  IN     SRV    5 0 5222 xmpp-gw.falcot.com.
_xmpp-server._tcp  IN     SRV    5 0 5269 xmpp-gw.falcot.com.</pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.turn-server"></a>11.8.2. Serveur TURN</h3></div></div></div><div
            class="para">
				TURN est un service qui aide les clients derrière des routeurs NAT et des pare-feu à trouver le chemin le plus efficace pour communiquer avec d'autres clients et pour relayer les flux media si aucun chemin direct n'est trouvé. Il est grandement recommandé d'installer le serveur TURN avant que tous les autres services RTC ne soient disponibles pour les utilisateurs finaux.
			</div><a
            id="id-1.14.11.12.3"
            class="indexterm"></a><div
            class="para">
				TURN et le protocole ICE sont des standards ouverts. Pour tirer profit de ces protocoles, en maximisant la connectivité et en minimisant la frustration des utilisateurs, il est important de s'assurer que tous les logiciels clients les supportent.
			</div><a
            id="id-1.14.11.12.5"
            class="indexterm"></a><div
            class="para">
				Pour que l'algorithme ICE fonctionne efficacement, le serveur doit avoir deux adresses publiques IPv4.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.turn-server-install"></a>11.8.2.1. Installation du serveur TURN</h4></div></div></div><div
              class="para">
					Installez le paquet <span
                class="pkg pkg">resiprocate-turn-server</span>.
				</div><div
              class="para">
					Éditez le fichier de configuration <code
                class="filename">/etc/reTurn/reTurnServer.config</code>. Le plus important est d'intégrer les adresses IP du serveur.
				</div><pre
              class="programlisting">
# vos addresses IP vont ici :
TurnAddress = 198.51.100.19
TurnV6Address = 2001:DB8:1000:2000::19
AltStunAddress = 198.51.100.20
# votre domaine va ici, il doit correspondre à la valeur utilisée pour
# créer vos mots de passe avec l'algorithme de hachage HA1 :
AuthenticationRealm = myrealm

UserDatabaseFile = /etc/reTurn/users.txt
UserDatabaseHashedPasswords = true</pre><div
              class="para">
					Redémarrez le service.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.turn-server-management"></a>11.8.2.2. Gestion des utilisateurs de TURN</h4></div></div></div><div
              class="para">
					Utilisez l'utilitaire <code
                class="command">htdigest</code> pour gérer la liste des utilisateurs du serveur TURN.
				</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>htdigest /etc/reTurn/users.txt myrealm joe</code></strong></pre><div
              class="para">
					Après toute modification à <code
                class="filename">/etc/reTurn/users.txt</code>, envoyez le signal HUP pour que le serveur le recharge (ou autorisez le rechargement automatique dans <code
                class="filename">/etc/reTurn/reTurnServer.config</code>).
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.sip-server"></a>11.8.3. Serveur Proxy SIP</h3></div></div></div><div
            class="para">
				Un serveur proxy SIP gère les connexions SIP entrantes et sortantes entre différentes organisations, les fournisseurs de tronc SIP <span
              class="foreignphrase"><em
                class="foreignphrase">(SIP trunking)</em></span>, les autocommutateurs téléphoniques privés (<span
              class="foreignphrase"><em
                class="foreignphrase">Private Automatic Branch eXchange</em></span>, PBX) comme Asterisk, les téléphones SIP, les logiciels de téléphonie basés sur SIP et les applications WebRTC.
			</div><a
            id="id-1.14.11.13.3"
            class="indexterm"></a><a
            id="id-1.14.11.13.4"
            class="indexterm"></a><a
            id="id-1.14.11.13.5"
            class="indexterm"></a><a
            id="id-1.14.11.13.6"
            class="indexterm"></a><div
            class="para">
				Il est fortement recommandé d'installer et de configurer le proxy SIP avant d'essayer de mettre en place un <span
              class="foreignphrase"><em
                class="foreignphrase">PBX</em></span> (autocommutateur téléphonique privé). Le proxy SIP normalise une large partie du trafic arrivant au PBX et fournit une plus grande connectivité et une résilience plus importante.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.sip-server-install"></a>11.8.3.1. Installation du proxy SIP</h4></div></div></div><div
              class="para">
					Installez le paquet <span
                class="pkg pkg">repro</span>. Utiliser le paquet de <span
                class="distribution distribution">jessie-backposrts</span> est fortement recommandé car il contient les dernières améliorations qui augmentent la connectivité et la résilience.
				</div><a
              id="id-1.14.11.13.8.3"
              class="indexterm"></a><div
              class="para">
					Éditez le fichier de configuration <code
                class="filename">/etc/repro/repro.config</code>. Le plus important est d'ajouter les adresses IP du serveur. L'exemple ci-dessous montre comment configurer à la fois le SIP normal et <span
                class="foreignphrase"><em
                  class="foreignphrase">WebSockets/WebRTC</em></span> en utilisant TLS, IPv4 et IPv6 :
				</div><pre
              class="programlisting">
# Transport1 est pour SIP sur des connexions TLS
# On utilise le port 5061 ici mais on pourrait utiliser le port
# 443 si des clients sont derrière des pare-feu trop restrictifs
Transport1Interface = 198.51.100.19:5061
Transport1Type = TLS
Transport1TlsDomain = falcot.com
Transport1TlsClientVerification = Optional
Transport1RecordRouteUri = sip:falcot.com;transport=TLS
Transport1TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport1TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport2 est la version IPv6 de Transport1
Transport2Interface = 2001:DB8:1000:2000::19:5061
Transport2Type = TLS
Transport2TlsDomain = falcot.com
Transport2TlsClientVerification = Optional
Transport2RecordRouteUri = sip:falcot.com;transport=TLS
Transport2TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport2TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport3 est pour les connexions SIP sur WebSocket (WebRTC)
# On utilise le port 8443 ici mais on pourrait utiliser le port 443
Transport3Interface = 198.51.100.19:8443
Transport3Type = WSS
Transport3TlsDomain = falcot.com
# Ceci demanderait au navigateur d'envoyer un certificat, mais les
# navigateurs ne semblent pas bien le gérer, on le laisse donc à None :
Transport3TlsClientVerification = None
Transport3RecordRouteUri = sip:falcot.com;transport=WSS
Transport3TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport3TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport4 est la version IPv6 de Transport3
Transport4Interface = 2001:DB8:1000:2000::19:8443
Transport4Type = WSS
Transport4TlsDomain = falcot.com
Transport4TlsClientVerification = None
Transport4RecordRouteUri = sip:falcot.com;transport=WSS
Transport4TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport4TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport5 : ceci pourrait être pour des connexions TCP à un serveur
# Asterisk dans le réseau interne. N'autorisez pas le port 5060
# dans le pare-feu externe.
Transport5Interface = 198.51.100.19:5060
Transport5Type = TCP
Transport5RecordRouteUri = sip:198.51.100.19:5060;transport=TCP

HttpBindAddress = 198.51.100.19, 2001:DB8:1000:2000::19
HttpAdminUserFile = /etc/repro/users.txt

RecordRouteUri = sip:falcot.com;transport=tls
ForceRecordRouting = true
EnumSuffixes = e164.arpa, sip5060.net, e164.org
DisableOutbound = false
EnableFlowTokens = true
EnableCertificateAuthenticator = True</pre><div
              class="para">
					Définissez le mot de passe administrateur pour l'interface web avec l'utilitaire <code
                class="command">htdigest</code>. Le nom de l'utilisateur doit être <span
                class="emphasis"><em>admin</em></span> et le domaine <span
                class="foreignphrase"><em
                  class="foreignphrase">(realm)</em></span> doit correspondre à la valeur spécifiée dans <code
                class="filename">repro.config</code>.
				</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>htdigest /etc/repro/users.txt repro admin</code></strong></pre><div
              class="para">
					Redémarrez le service pour utiliser la nouvelle configuration.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.sip-server-management"></a>11.8.3.2. Gestion du proxy SIP</h4></div></div></div><div
              class="para">
					Visitez l'adresse <code
                class="literal">http://sip-proxy.falcot.com:5080</code> pour compléter la configuration en ajoutant les domaines, les utilisateurs locaux et les routes statiques.
				</div><div
              class="para">
					La première étape est d'ajouter le domaine local. Le processus doit être redémarré après l'ajout ou la suppression de domaines dans la liste.
				</div><div
              class="para">
					Le proxy sait comment acheminer les appels entre les utilisateurs locaux et les adresses SIP complètes, la configuration du routage est uniquement nécessaire si le comportement par défaut ne convient pas ; par exemple pour reconnaître des numéros de téléphone, il faut ajouter un préfixe et les router vers un fournisseur SIP.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.xmpp-server"></a>11.8.4. Serveur XMPP</h3></div></div></div><div
            class="para">
				Un serveur XMPP gère la connectivité entre les utilisateurs XMPP locaux et les utilisateurs XMPP dans d'autres domaines de l'Internet public.
			</div><a
            id="id-1.14.11.14.3"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VOCABULAIRE</em></span> XMPP ou Jabber ?</strong></p></div></div></div><a
              id="id-1.14.11.14.4.2"
              class="indexterm"></a><div
              class="para">
				Il est parfois fait référence à XMPP sous le nom de Jabber. En réalité, Jabber est une marque alors que XMPP est le nom officiel du standard.
			</div><a
              id="id-1.14.11.14.4.4"
              class="indexterm"></a></div><div
            class="para">
				Prosody est un serveur XMPP populaire qui fonctionne bien sur les serveurs Debian.
			</div><a
            id="id-1.14.11.14.6"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.xmpp-server-install"></a>11.8.4.1. Installation du serveur XMPP</h4></div></div></div><div
              class="para">
					Installez le paquet <span
                class="pkg pkg">prosody</span>. Il est préférable d'utiliser le paquet de <span
                class="distribution distribution">jessie-backports</span> car il intègre les dernières améliorations pour optimiser la connectivité et la résilience.
				</div><a
              id="id-1.14.11.14.7.3"
              class="indexterm"></a><div
              class="para">
					Vérifiez le fichier de configuration <code
                class="filename">/etc/prosody/prosody.cfg.lua</code>. La principale chose à faire est de renseigner l'identifiant des utilisateurs autorisés à gérer le serveur.
				</div><pre
              class="programlisting">
admins = { "joe@falcot.com" }</pre><div
              class="para">
					Il faut également un fichier de configuration pour chaque domaine. Copiez l'exemple de <code
                class="filename">/etc/prosody/conf.avail/example.com.cfg.lua</code> et adaptez le suivant les besoins. Voici le fichier <code
                class="literal">falcot.com.cfg.lua</code> créé par les administrateurs de Falcot :
				</div><pre
              class="programlisting">
VirtualHost "falcot.com"
        enabled = true
        ssl = {
                key = "/etc/ssl/private/falcot.com-key.pem";
                certificate = "/etc/ssl/public/falcot.com.pem";
                }</pre><div
              class="para">
					Pour activer le domaine, il faut créer un lien symbolique dans <code
                class="filename">/etc/prosody/conf.d/</code> :
				</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>ln -s /etc/prosody/conf.avail/falcot.com.cfg.lua /etc/prosody/conf.d/</code></strong></pre><div
              class="para">
					Redémarrez le service pour utiliser la nouvelle configuration.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      id="sect.xmpp-server-management"></a>11.8.4.2. Gestion du serveur XMPP</h4></div></div></div><div
              class="para">
					Certaines opérations de gestion peuvent être réalisées avec l'utilitaire en ligne de commande <code
                class="literal">prosodyctl</code>. Par exemple, pour ajouter le compte administrateur spécifié dans <code
                class="filename">/etc/prosody/prosody.cfg.lua</code> :
				</div><pre
              class="programlisting">
# prosodyctl adduser joe@falcot.com</pre><div
              class="para">
					La page <a
                href="http://prosody.im/doc/configure">Prosody online documentation</a> donne plus de détails sur comment personnaliser la configuration.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.rtc-port-443"></a>11.8.5. Services fonctionnant sur le port 443</h3></div></div></div><div
            class="para">
				Certains administrateurs préfèrent faire tourner tous leurs services RTC sur le port 443. Cela simplifie la connexion des utilisateurs qui sont dans des endroits éloignés, tels que des hôtels et des aéroports où les autres ports risquent d'être bloqués et où le trafic Internet est acheminé à travers des serveurs proxy HTTP.
			</div><div
            class="para">
				Pour réaliser ceci, chaque service (SIP, XMPP et TURN) doit avoir une adresse IP différente. Tous les services peuvent cependant être sur le même hôte puisque Linux gère des adresses IP multiples sur un seul hôte. Le numéro de port, 443, doit être spécifié dans les fichiers de configuration de chaque service et aussi dans les enregistrements DNS de type SRV.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="sect.rtc-webrtc"></a>11.8.6. Ajout de WebRTC</h3></div></div></div><div
            class="para">
				Falcot souhaite que les clients puissent téléphoner directement à partir du site web. Les administrateurs de Falcot veulent aussi utiliser WebRTC dans le cadre de leur plan de reprise après sinistre, pour que le personnel puisse utiliser les navigateurs web de chez eux pour se connecter au système téléphonique de l'entreprise et travailler normalement en cas d'urgence.
			</div><a
            id="id-1.14.11.16.3"
            class="indexterm"></a><a
            id="id-1.14.11.16.4"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>EN PRATIQUE</em></span> Essayer WebRTC</strong></p></div></div></div><a
              id="id-1.14.11.16.5.2"
              class="indexterm"></a><div
              class="para">
				Pour découvrir WebRTC, il existe plusieurs sites de démonstration qui permettent de tester directement les équipements. <div
                class="url">→ <a
                  href="http://www.sip5060.net/test-calls">http://www.sip5060.net/test-calls</a></div>
			</div></div><div
            class="para">
				WebRTC est une technologie qui évolue rapidement et il est donc essentiel d'utiliser les paquets des distributions <span
              class="distribution distribution">jessie-backports</span> ou <span
              class="distribution distribution">Testing</span>.
			</div><div
            class="para">
				JSCommunicator est un téléphone WebRTC générique, sans marque, qui n'a besoin d'aucun script côté serveur. Il est construit exclusivement avec du HTML, du CSS et du JavaScript. Il est à la base de nombreux autres services et modules WebRTC pour des <span
              class="foreignphrase"><em
                class="foreignphrase">frameworks</em></span> plus avancés. <div
              class="url">→ <a
                href="http://jscommunicator.org">http://jscommunicator.org</a></div>
			</div><a
            id="id-1.14.11.16.8"
            class="indexterm"></a><div
            class="para">
				Installer le paquet <span
              class="pkg pkg">jscommunicator-web-phone</span> est la méthode la plus rapide pour avoir un téléphone WebRTC sur un site web. Cela nécessite d'avoir un proxy SIP avec un transport WebSocket. Les instructions figurant dans la <a
              class="xref"
              href="sect.rtc-services.html#sect.sip-server-install">Section 11.8.3.1, « Installation du proxy SIP »</a> donnent les informations nécessaires pour activer un transport WebSocket dans le proxy SIP <span
              class="pkg pkg">repro</span>.
			</div><div
            class="para">
				<span
              class="pkg pkg">jscommunicator-web-phone</span> peut être utilisé de différentes façons. L'une des stratégies les plus simples est d'inclure ou de copier la configuration <code
              class="filename">/etc/jscommunicator-web-phone/apache.conf</code> dans la configuration d'un hôte virtuel Apache.
			</div><div
            class="para">
				Une fois que les fichiers de JSCommunicator sont disponibles sur le serveur web, il convient de personnaliser le fichier <code
              class="filename">/etc/jscommunicator-web-phone/config.js</code> pour pointer sur le serveur TURN et sur le serveur SIP. Par exemple ainsi :
			</div><pre
            class="programlisting">
JSCommSettings = {

  // Environnement du serveur web
  webserver: {
    url_prefix: null            // Si défini, préfixe pour construire sound/ URLs
  },

  // Relais STUN/TURN pour les médias
  stun_servers: [],
  turn_servers: [
    { server:"turn:turn-server.falcot.com?transport=udp", username:"joe", password:"j0Ep455d" }
  ],

  // Connexion WebSocket
  websocket: {
      // Notez qu'on utilise le certificat du domaine falcot.com et le port 8443
      // Cela correspond aux exemples Transport3 et Transport4 dans
      // le fichier de configuration repro.confifg de falcot.com
    servers: 'wss://falcot.com:8443',
    connection_recovery_min_interval: 2,
    connection_recovery_max_interval: 30
  },

  ...</pre><div
            class="para">
				Les sites web les plus avancés qui proposent d'appeler en ligne utilisent généralement un script côté serveur qui génère dynamiquement le fichier <code
              class="literal">config.js</code>. Le code source de <a
              href="http://drucall.org">DruCall</a> montre comment réaliser ceci en PHP.
			</div><a
            id="id-1.14.11.16.14"
            class="indexterm"></a><div
            class="para">
				Le tour d'horizon des logiciels serveurs proposé par ce chapitre est loin d'être exhaustif, mais il recouvre toutefois la réalité des services réseau les plus employés. Passons sans plus tarder à un chapitre encore plus technique : approfondissement de certains concepts, déploiement à grande échelle, virtualisation sont autant de sujets passionnants que nous allons aborder.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.ldap-directory.html"><strong>Précédent</strong>11.7. Annuaire LDAP</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="advanced-administration.html"><strong>Suivant</strong>Chapitre 12. Administration avancée</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.rtc-services.html">ar-MA</a></li><li><a
              href="../da-DK/sect.rtc-services.html">da-DK</a></li><li><a
              href="../de-DE/sect.rtc-services.html">de-DE</a></li><li><a
              href="../el-GR/sect.rtc-services.html">el-GR</a></li><li><a
              href="../en-US/sect.rtc-services.html">en-US</a></li><li><a
              href="../es-ES/sect.rtc-services.html">es-ES</a></li><li><a
              href="../fa-IR/sect.rtc-services.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.rtc-services.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.rtc-services.html">hr-HR</a></li><li><a
              href="../id-ID/sect.rtc-services.html">id-ID</a></li><li><a
              href="../it-IT/sect.rtc-services.html">it-IT</a></li><li><a
              href="../ja-JP/sect.rtc-services.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.rtc-services.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.rtc-services.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.rtc-services.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.rtc-services.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.rtc-services.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.rtc-services.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.rtc-services.html">tr-TR</a></li><li><a
              href="../zh-CN/sect.rtc-services.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.rtc-services.html">zh-TW</a></li></ul></div></body></html>
