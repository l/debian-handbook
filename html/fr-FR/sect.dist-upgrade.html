<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.6. Mise à jour d'une distribution à la suivante</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="apt.html"
        title="Chapitre 6. Maintenance et mise à jour : les outils APT" /><link
        rel="prev"
        href="sect.package-authentication.html"
        title="6.5. Vérification d'authenticité des paquets" /><link
        rel="next"
        href="sect.regular-upgrades.html"
        title="6.7. Maintenir un système à jour" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/fr-FR/sect.dist-upgrade.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.dist-upgrade"></a>6.6. Mise à jour d'une distribution à la suivante</h2></div></div></div><div
          class="para">
			Un des éléments les plus marquants de Debian est sa capacité à mettre à jour un système d'une distribution stable vers la suivante (le fameux <span
            class="foreignphrase"><em
              class="foreignphrase">dist-upgrade</em></span>, qui a contribué à la réputation du projet). Avec un peu d'attention, on peut ainsi migrer un ordinateur en quelques minutes ou dizaines de minutes, selon la rapidité d'accès aux sources de paquets.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.3"></a>6.6.1. Démarche à suivre</h3></div></div></div><div
            class="para">
				Comme le système Debian a le temps d'évoluer entre deux versions stables, on prendra soin de lire, avant d'entreprendre la mise à jour, les notes de publication.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>B.A.-BA</em></span> Notes de publication</strong></p></div></div></div><div
              class="para">
				Les notes de publication <span
                class="foreignphrase"><em
                  class="foreignphrase">(release notes)</em></span> d'un logiciel ou d'un système d'exploitation sont un document, généralement court par rapport à la documentation complète, qui donne une idée du logiciel en question, particulièrement de la version concernée. Ces documents donnent souvent un résumé des nouvelles fonctionnalités offertes par rapport aux versions précédentes, des instructions de mise à jour, des avertissements pour les utilisateurs des anciennes versions et parfois des errata.
			</div><div
              class="para">
				Pour les versions de Debian, on trouvera ces notes de publication sur le Web, autant pour la version stable courante que pour les précédentes (qui restent accessibles par leur nom de code) : <div
                class="url">→ <a
                  href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></div> <div
                class="url">→ <a
                  href="http://www.debian.org/releases/wheezy/releasenotes">http://www.debian.org/releases/wheezy/releasenotes</a></div>
			</div></div><div
            class="para">
				Nous allons ici nous attacher particulièrement à la migration d'un système <span
              class="distribution distribution">Wheezy</span> en <span
              class="distribution distribution">Jessie</span>. Comme toute opération majeure sur un système, cette mise à jour comporte une certaine part de risque et il est donc vivement conseillé de s'assurer que les données importantes sont sauvegardées avant de s'engager dans la procédure.
			</div><div
            class="para">
				Pour faciliter (et raccourcir) la mise à jour, il est également recommandé de faire un peu de nettoyage dans les paquets installés, pour ne garder que ceux qui sont réellement nécessaires. Pour cela, on mettra à profit les fonctions d'<code
              class="command">apt-get</code>, éventuellement en conjonction avec <code
              class="command">deborphan</code> et <code
              class="command">debfoster</code> (voir <a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">Section 6.2.7, « Suivi des paquets installés automatiquement »</a>). On pourra par exemple utiliser la commande suivante :
			</div><pre
            class="screen"># <strong
              class="userinput"><code>deborphan | xargs aptitude --schedule-only remove</code></strong></pre><div
            class="para">
				Passons à la mise à jour du système. On commencera par indiquer à APT qu'il doit utiliser <span
              class="distribution distribution">Jessie</span> au lieu de <span
              class="distribution distribution">Wheezy</span>, en modifiant le fichier <code
              class="filename">/etc/apt/sources.list</code> en conséquence. Si ce fichier ne contient que des références à <span
              class="distribution distribution">Stable</span> et non à un de ces noms de code, c'est encore plus simple : la modification n'est pas nécessaire, puisque <span
              class="distribution distribution">Stable</span> est toujours identique à la dernière version publiée de Debian. Dans les deux cas, on n'oubliera pas de rafraîchir la base de données des paquets disponibles (<code
              class="command">apt update</code>, ou le bouton de mise à jour dans <code
              class="command">synaptic</code>).
			</div><div
            class="para">
				Une fois que ces nouvelles sources de paquets sont déclarées, la première chose à faire est une mise à jour minimale avec <code
              class="command">apt upgrade</code>. Cette mise à jour en deux temps facilite la tâche des outils de gestion de paquets ; en particulier, cela assure que ces outils eux-mêmes sont dans leur dernière version et qu'ils disposent donc de correctifs et d'améliorations qui peuvent s'avérer nécessaires lors de la mise à jour complète de la distribution.
			</div><div
            class="para">
				Une fois ces préliminaires accomplis, on pourra passer à la mise à jour proprement dite, soit avec <code
              class="command">apt full-upgrade</code>, <code
              class="command">aptitude</code> ou <code
              class="command">synaptic</code>. On vérifiera les actions à effectuer avant de les déclencher (pour éventuellement ajouter des paquets suggérés, ou désélectionner des paquets qui ne sont que recommandés) ; le frontal devrait dans tous les cas arriver à un scénario dont la situation finale est un système <span
              class="distribution distribution">Jessie</span> cohérent et à jour. Il suffira alors de patienter durant le téléchargement des paquets, de répondre aux questions Debconf et de regarder la magie s'opérer pendant le reste de la procédure en gardant un œil attentif sur les éventuelles questions portant sur le remplacement de fichiers de configuration qui auraient été localement modifiés.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.15.4"></a>6.6.2. Gérer les problèmes consécutifs à une mise à jour</h3></div></div></div><div
            class="para">
				Malgré tous les efforts des mainteneurs Debian, une mise à jour majeure du système d'exploitation cause parfois quelques soucis. Les nouvelles versions de certains logiciels sont parfois incompatibles avec les précédentes (évolution d'un format de données, comportement par défaut qui diffère, etc.). En outre, certains bogues passent inaperçus malgré la période de test précédant la publication d'une nouvelle version.
			</div><div
            class="para">
				Pour anticiper les problèmes liés aux évolutions des logiciels mis à jour, il est utile d'installer le paquet <span
              class="pkg pkg">apt-listchanges</span>. Il affichera, au début d'une mise à jour de paquet, des informations relatives aux embarras possibles. Ces informations sont rédigées par les mainteneurs de paquets à l'intention des utilisateurs et placées dans des fichiers <code
              class="filename">/usr/share/doc/<em
                class="replaceable">paquet</em>/NEWS.Debian</code> et en tenir compte évitera toute mauvaise surprise.
			</div><div
            class="para">
				Parfois, la nouvelle version d'un logiciel ne fonctionne plus du tout. C'est par exemple le cas si le logiciel n'est pas très populaire et n'a pas été suffisamment testé ; une mise à jour de dernière minute peut aussi introduire des régressions qui ne sont découvertes qu'après publication. Dans ce cas, le premier réflexe sain est de consulter le système de suivi de bogue à l'adresse <code
              class="literal">https://bugs.debian.org/<em
                class="replaceable">paquet</em></code> pour déterminer si le problème est déjà connu et signalé. Si ce n'est pas le cas, il faut le signaler avec <code
              class="command">reportbug</code>. Sinon, la lecture du rapport de bogue sera généralement très instructive :
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						On peut y découvrir l'existence d'un correctif qui permet alors de recompiler localement une version corrigée du paquet Debian (voir <a
                    class="xref"
                    href="debian-packaging.html#sect.rebuilding-package">Section 15.1, « Recompiler un paquet depuis ses sources »</a>).
					</div></li><li
                class="listitem"><div
                  class="para">
						Parfois, d'autres utilisateurs ont trouvé un moyen de contourner le problème et partagent leur expérience dans l'historique du bogue.
					</div></li><li
                class="listitem"><div
                  class="para">
						Enfin un paquet corrigé peut avoir été préparé par le mainteneur et être disponible en téléchargement.
					</div></li></ul></div><div
            class="para">
				Selon la gravité du bogue, une nouvelle version peut être préparée pour être intégrée dans une nouvelle révision de la version stable. Dans ce cas, un paquet corrigé est peut-être disponible dans la section <code
              class="literal">proposed-updates</code> des miroirs Debian (voir <a
              class="xref"
              href="apt.html#sect.proposed-updates">Section 6.1.2.3, « Mises à jour proposées »</a>). On peut alors temporairement ajouter l'entrée correspondante dans son fichier <code
              class="filename">sources.list</code> et installer la mise à jour avec <code
              class="command">apt</code> ou <code
              class="command">aptitude</code>.
			</div><div
            class="para">
				Si le paquet n'est pas encore disponible dans cette section, on peut vérifier s'il est en attente de validation par les SRM (les gestionnaires de la version stable) en consultant leur page web. Les paquets listés sur cette page ne sont pas encore disponibles publiquement mais l'on sait au moins que le processus de publication suit son cours. <div
              class="url">→ <a
                href="https://release.debian.org/proposed-updates/stable.html">https://release.debian.org/proposed-updates/stable.html</a></div>
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>Précédent</strong>6.5. Vérification d'authenticité des paquets</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>Suivant</strong>6.7. Maintenir un système à jour</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.dist-upgrade.html">ar-MA</a></li><li><a
              href="../da-DK/sect.dist-upgrade.html">da-DK</a></li><li><a
              href="../de-DE/sect.dist-upgrade.html">de-DE</a></li><li><a
              href="../el-GR/sect.dist-upgrade.html">el-GR</a></li><li><a
              href="../en-US/sect.dist-upgrade.html">en-US</a></li><li><a
              href="../es-ES/sect.dist-upgrade.html">es-ES</a></li><li><a
              href="../fa-IR/sect.dist-upgrade.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.dist-upgrade.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.dist-upgrade.html">hr-HR</a></li><li><a
              href="../id-ID/sect.dist-upgrade.html">id-ID</a></li><li><a
              href="../it-IT/sect.dist-upgrade.html">it-IT</a></li><li><a
              href="../ja-JP/sect.dist-upgrade.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.dist-upgrade.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.dist-upgrade.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.dist-upgrade.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.dist-upgrade.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.dist-upgrade.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.dist-upgrade.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.dist-upgrade.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.dist-upgrade.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.dist-upgrade.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.dist-upgrade.html">zh-TW</a></li></ul></div></body></html>
