<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Chapter 6. Maintenance and Updates: The APT Tools</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.1" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-en-US-1.0-1" /><meta
        name="keywords"
        content="apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="prev"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. Coexistence with Other Packaging Systems" /><link
        rel="next"
        href="sect.apt-get.html"
        title="6.2. aptitude and apt-get Commands" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/en-US/apt.html" /></head><body
      class="draft "><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="http://debian-handbook.info"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Prev</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>Next</strong></a></li></ul><div
        xml:lang="en-US"
        class="chapter"
        lang="en-US"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  id="apt"></a>Chapter 6. Maintenance and Updates: The APT Tools</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="apt.html#sect.apt-sources.list">6.1. Filling in the <code
                    class="filename">sources.list</code> File</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="apt.html#idm139788556745056">6.1.1. Syntax</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#idm139788558623072">6.1.2. Repositories for <span
                        class="distribution distribution">Stable</span> Users</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#idm139788575692032">6.1.3. Repositories for <span
                        class="distribution distribution">Testing</span>/<span
                        class="distribution distribution">Unstable</span> Users</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#idm139788575665296">6.1.4. Non-Official Resources: <code
                        class="literal">apt-get.org</code> and <code
                        class="literal">mentors.debian.net</code></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#idm139788575644976">6.1.5. Caching Proxy for Debian Packages</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-get.html">6.2. <code
                    class="command">aptitude</code> and <code
                    class="command">apt-get</code> Commands</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-get.html#idm139788575616880">6.2.1. Initialization</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#idm139788575609664">6.2.2. Installing and Removing</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-upgrade">6.2.3. System Upgrade</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-config">6.2.4. Configuration Options</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt.priorities">6.2.5. Managing Package Priorities</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-mix-distros">6.2.6. Working with Several Distributions</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.automatic-tracking">6.2.7. Tracking Automatically Installed Packages</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-cache.html">6.3. The <code
                    class="command">apt-cache</code> Command</a></span></dt><dt><span
                class="section"><a
                  href="sect.apt-frontends.html">6.4. Frontends: <code
                    class="command">aptitude</code>, <code
                    class="command">synaptic</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#sect.aptitude">6.4.1. <code
                        class="command">aptitude</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#idm139788574112048">6.4.2. <code
                        class="command">synaptic</code></a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.package-authentication.html">6.5. Checking Package Authenticity</a></span></dt><dt><span
                class="section"><a
                  href="sect.dist-upgrade.html">6.6. Upgrading from One Stable Distribution to the Next</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#idm139788574066080">6.6.1. Recommended Procedure</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#idm139788574043440">6.6.2. Handling Problems after an Upgrade</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.regular-upgrades.html">6.7. Keeping a System Up to Date</a></span></dt><dt><span
                class="section"><a
                  href="sect.automatic-upgrades.html">6.8. Automatic Upgrades</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#idm139788573986720">6.8.1. Configuring <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#idm139788573982848">6.8.2. Configuring APT</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#idm139788573980512">6.8.3. Configuring <code
                        class="command">debconf</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#idm139788573971920">6.8.4. Handling Command Line Interactions</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#idm139788573967792">6.8.5. The Miracle Combination</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.searching-packages.html">6.9. Searching for Packages</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		What makes Debian so popular with administrators is how easily software can be installed and how easily the whole system can be updated. This unique advantage is largely due to the <span
              class="emphasis"><em>APT</em></span> program, that Falcot Corp administrators studied with enthusiasm.
	</div></div><div
          class="para">
		<a
            id="idm139788562524768"
            class="indexterm"></a> <a
            id="idm139788563063008"
            class="indexterm"></a> APT is the abbreviation for Advanced Package Tool. What makes this program “advanced” is its approach to packages. It doesn't simply evaluate them individually, but it considers them as a whole and produces the best possible combination of packages depending on what is available and compatible (according to dependencies).
	</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>VOCABULARY</em></span> Package source and source package</strong></p></div></div></div><div
            class="para">
		The word <span
              class="emphasis"><em>source</em></span> can be ambiguous. A source package — a package containing the source code of a program — should not be confused with a package source — a repository (website, FTP server, CD-ROM, local directory, etc.) which contains packages.
	</div></div><div
          class="para">
		APT needs to be given a “list of package sources”: the file <code
            class="filename">/etc/apt/sources.list</code> will list the different repositories (or “sources”) that publish Debian packages. APT will then import the list of packages published by each of these sources. This operation is achieved by downloading <code
            class="filename">Packages.xz</code> or a variant using a different compression method (such as <code
            class="filename">Packages.gz</code>, <code
            class="filename">.bz2</code> or <code
            class="filename">.lzma</code>) files (in case of a source of binary packages) and <code
            class="filename">Sources.xz</code> or a variant (in case of a source of source packages) and by analyzing their contents. When an old copy of these files is already present, APT can update it by only downloading the differences (see sidebar <a
            class="xref"
            href="sect.apt-get.html#sidebar.apt-pdiff"><span
              class="emphasis"><em>TIP</em></span> Incremental upgrade</a>).
	</div><a
          id="idm139788556241904"
          class="indexterm"></a><a
          id="idm139788565871264"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>BACK TO BASICS</em></span> <code
                      class="command">gzip</code>, <code
                      class="command">bzip2</code>, <code
                      class="command">LZMA</code> and <code
                      class="command">XZ</code> Compression</strong></p></div></div></div><a
            id="idm139788562547456"
            class="indexterm"></a><a
            id="idm139788562546336"
            class="indexterm"></a><a
            id="idm139788558191952"
            class="indexterm"></a><a
            id="idm139788558190832"
            class="indexterm"></a><div
            class="para">
		A <code
              class="filename">.gz</code> extension refers to a file compressed with the <code
              class="command">gzip</code> utility. <code
              class="command">gzip</code> is the fast and efficient traditional Unix utility to compress files. Newer tools achieve better rates of compression but require more resources (computation time and memory) to compress and uncompress a file. Among them, and by order of appearance, there are <code
              class="command">bzip2</code> (generating files with a <code
              class="filename">.bz2</code> extension), <code
              class="command">lzma</code> (generating <code
              class="filename">.lzma</code> files) and <code
              class="command">xz</code> (generating <code
              class="filename">.xz</code> files).
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    id="sect.apt-sources.list"></a>6.1. Filling in the <code
                    class="filename">sources.list</code> File</h2></div></div></div><a
            id="idm139788556750176"
            class="indexterm"></a><a
            id="idm139788556749056"
            class="indexterm"></a><a
            id="idm139788556747616"
            class="indexterm"></a><a
            id="idm139788556746176"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="idm139788556745056"></a>6.1.1. Syntax</h3></div></div></div><div
              class="para">
				Each active line of the <code
                class="filename">/etc/apt/sources.list</code> file contains the description of a source, made of 3 parts separated by spaces.
			</div><div
              class="para">
				The first field indicates the source type:
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb</code>” for binary packages,
					</div></li><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb-src</code>” for source packages.
					</div></li></ul></div><div
              class="para">
				The second field gives the base URL of the source (combined with the filenames present in the <code
                class="filename">Packages.gz</code> files, it must give a full and valid URL): this can consist in a Debian mirror or in any other package archive set up by a third party. The URL can start with <code
                class="literal">file://</code> to indicate a local source installed in the system's file hierarchy, with <code
                class="literal">http://</code> to indicate a source accessible from a web server, or with <code
                class="literal">ftp://</code> for a source available on an FTP server. The URL can also start with <code
                class="literal">cdrom://</code> for CD-ROM/DVD-ROM/Blu-ray disc based installations, although this is less frequent, since network-based installation methods are more and more common.
			</div><div
              class="para">
				The syntax of the last field depends on the structure of the repository. In the simplest cases, you can simply indicate a subdirectory (with a required trailing slash) of the desired source (this is often a simple “<code
                class="filename">./</code>” which refers to the absence of a subdirectory — the packages are then directly at the specified URL). But in the most common case, the repositories will be structured like a Debian mirror, with multiple distributions each having multiple components. In those cases, name the chosen distribution (by its “codename” — see the list in sidebar <a
                class="xref"
                href="sect.foundation-documents.html#sidebar.bruce-perens"><span
                  class="emphasis"><em>COMMUNITY</em></span> Bruce Perens, a controversial leader</a> — or by the corresponding “suites” — <code
                class="literal">stable</code>, <code
                class="literal">testing</code>, <code
                class="literal">unstable</code>), then the components (or sections) to enable (chosen between <code
                class="literal">main</code>, <code
                class="literal">contrib</code>, and <code
                class="literal">non-free</code> in a typical Debian mirror).
			</div><div
              class="sidebar"><a
                id="sidebar.sections"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> The <code
                          class="literal">main</code>, <code
                          class="literal">contrib</code> and <code
                          class="literal">non-free</code> archives</strong></p></div></div></div><a
                id="idm139788561987376"
                class="indexterm"></a><a
                id="idm139788561985776"
                class="indexterm"></a><a
                id="idm139788561984496"
                class="indexterm"></a><a
                id="idm139788561982896"
                class="indexterm"></a><a
                id="idm139788561981616"
                class="indexterm"></a><a
                id="idm139788561980016"
                class="indexterm"></a><a
                id="idm139788561978736"
                class="indexterm"></a><div
                class="para">
				Debian uses three sections to differentiate packages according to the licenses chosen by the authors of each work. <code
                  class="literal">Main</code> gathers all packages which fully comply with the Debian Free Software Guidelines.
			</div><div
                class="para">
				The <code
                  class="literal">non-free</code> archive is different because it contains software which does not (entirely) conform to these principles but which can nevertheless be distributed without restrictions. This archive, which is not officially part of Debian, is a service for users who could need some of those programs — however Debian always recommends giving priority to free software. The existence of this section represents a considerable problem for Richard M. Stallman and keeps the Free Software Foundation from recommending Debian to users.
			</div><div
                class="para">
				<code
                  class="literal">Contrib</code> (contributions) is a set of open source software which cannot function without some non-free elements. These elements can be software from the <code
                  class="literal">non-free</code> section, or non-free files such as game ROMs, BIOS of consoles, etc. <code
                  class="literal">Contrib</code> also includes free software whose compilation requires proprietary elements. This was initially the case for the OpenOffice.org office suite, which used to require a proprietary Java environment.
			</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> <code
                          class="filename">/etc/apt/sources.list.d/*.list</code> files</strong></p></div></div></div><div
                class="para">
				If many package sources are referenced, it can be useful to split them in multiple files. Each part is then stored in <code
                  class="filename">/etc/apt/sources.list.d/<em
                    class="replaceable">filename</em>.list</code> (see sidebar <a
                  class="xref"
                  href="sect.apt-get.html#sidebar.directory.d"><span
                    class="emphasis"><em>BACK TO BASICS</em></span> Directories ending in <code
                    class="filename">.d</code></a>).
			</div></div><a
              id="idm139788558627648"
              class="indexterm"></a><div
              class="para">
				The <code
                class="literal">cdrom</code> entries describe the CD/DVD-ROMs you have. Contrary to other entries, a CD-ROM is not always available since it has to be inserted into the drive and since only one disc can be read at a time. For those reasons, these sources are managed in a slightly different way, and need to be added with the <code
                class="command">apt-cdrom</code> program, usually executed with the <code
                class="literal">add</code> parameter. The latter will then request the disc to be inserted in the drive and will browse its contents looking for <code
                class="filename">Packages</code> files. It will use these files to update its database of available packages (this operation is usually done by the <code
                class="command">apt-get update</code> command). From then on, APT can require the disc to be inserted if it needs one of its packages.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="idm139788558623072"></a>6.1.2. Repositories for <span
                      class="distribution distribution">Stable</span> Users</h3></div></div></div><div
              class="para">
				Here is a standard <code
                class="filename">sources.list</code> for a system running the <span
                class="distribution distribution">Stable</span> version of Debian:
			</div><div
              class="example"><a
                id="example.stable-sources-list"></a><p
                class="title"><strong>Example 6.1. <code
                    class="filename">/etc/apt/sources.list</code> file for users of Debian Stable</strong></p><div
                class="example-contents"><pre
                  class="programlisting"># Security updates
deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free

## Debian mirror

# Base repository
deb http://ftp.debian.org/debian jessie main contrib non-free
deb-src http://ftp.debian.org/debian jessie main contrib non-free

# Stable updates
deb http://ftp.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.debian.org/debian jessie-updates main contrib non-free

# Stable backports
deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb-src http://ftp.debian.org/debian jessie-backports main contrib non-free
</pre></div></div><div
              class="para">
				This file lists all sources of packages associated with the <span
                class="distribution distribution">Jessie</span> version of Debian (the current <span
                class="distribution distribution">Stable</span> as of this writing). We opted to name “jessie” explicitly instead of using the corresponding “stable“ alias (<code
                class="literal">stable</code>, <code
                class="literal">stable-updates</code>, <code
                class="literal">stable-backports</code>) because we don't want to have the underlying distribution changed outside of our control when the next stable release comes out.
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>QUICK LOOK</em></span> <code
                          class="command">apt-spy</code></strong></p></div></div></div><a
                id="idm139788575746688"
                class="indexterm"></a><div
                class="para">
				This software tests the download speed from several Debian mirrors and generates a <code
                  class="filename">sources.list</code> file which points to the fastest mirror.
			</div><div
                class="para">
				The mirror selected during installation is generally suitable since its selection is based on the country. However, if the download is a little slow, or after a move, you can try running the application available in the <span
                  class="pkg pkg">apt-spy</span> package.
			</div></div><div
              class="para">
				Most packages will come from the “base repository” which contains all packages but is seldom updated (about once every 2 months for a “point release”). The other repositories are partial (they do not contain all packages) and can host updates (packages with newer version) that APT might install. The following sections will explain the purpose and the rules governing each of those repositories.
			</div><div
              class="para">
				Note that when the desired version of a package is available on several repositories, the first one listed in the <code
                class="filename">sources.list</code> file will be used. For this reason, non-official sources are usually added at the end of the file.
			</div><div
              class="para">
				As a side note, most of what this section says about <span
                class="distribution distribution">Stable</span> applies equally well to <span
                class="distribution distribution">Oldstable</span> since the latter is just an older <span
                class="distribution distribution">Stable</span> that is maintained in parallel.
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.security-updates"></a>6.1.2.1. Security Updates</h4></div></div></div><a
                id="idm139788575737744"
                class="indexterm"></a><a
                id="idm139788575736624"
                class="indexterm"></a><a
                id="idm139788575735664"
                class="indexterm"></a><div
                class="para">
					The security updates are not hosted on the usual network of Debian mirrors but on <code
                  class="literal">security.debian.org</code> (on a small set of machines maintained by the <a
                  class="link"
                  href="sect.debian-internals.html#dsa-team">Debian System Administrators</a>). This archive contains security updates (prepared by the Debian Security Team and/or by package maintainers) for the <span
                  class="distribution distribution">Stable</span> distribution.
				</div><div
                class="para">
					The server can also host security updates for <span
                  class="distribution distribution">Testing</span> but this doesn't happen very often since those updates tend to reach <span
                  class="distribution distribution">Testing</span> via the regular flow of updates coming from <span
                  class="distribution distribution">Unstable</span>.
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.stable-updates"></a>6.1.2.2. Stable Updates</h4></div></div></div><a
                id="idm139788575728224"
                class="indexterm"></a><a
                id="idm139788575727264"
                class="indexterm"></a><a
                id="idm139788575726144"
                class="indexterm"></a><div
                class="para">
					Stable updates are not security sensitive but are deemed important enough to be pushed to users before the next stable point release.
				</div><div
                class="para">
					This repository will typically contain fixes for critical bugs which could not be fixed before release or which have been introduced by subsequent updates. Depending on the urgency, it can also contain updates for packages that have to evolve over time… like <span
                  class="pkg pkg">spamassassin</span>'s spam detection rules, <span
                  class="pkg pkg">clamav</span>'s virus database, or the daylight-saving time rules of all timezones (<span
                  class="pkg pkg">tzdata</span>).
				</div><div
                class="para">
					In practice, this repository is a subset of the <code
                  class="literal">proposed-updates</code> repository, carefully selected by the Stable Release Managers.
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.proposed-updates"></a>6.1.2.3. Proposed Updates</h4></div></div></div><a
                id="idm139788575719136"
                class="indexterm"></a><a
                id="idm139788575718016"
                class="indexterm"></a><div
                class="para">
					Once published, the <span
                  class="distribution distribution">Stable</span> distribution is only updated about once every 2 months. The <code
                  class="literal">proposed-updates</code> repository is where the expected updates are prepared (under the supervision of the Stable Release Managers).
				</div><div
                class="para">
					The security and stable updates documented in the former sections are always included in this repository, but there is more too, because package maintainers also have the opportunity to fix important bugs that do not deserve an immediate release.
				</div><div
                class="para">
					Anyone can use this repository to test those updates before their official publication. The extract below uses the <code
                  class="literal">jessie-proposed-updates</code> alias which is both more explicit and more consistent since <code
                  class="literal">wheezy-proposed-updates</code> also exists (for the <span
                  class="distribution distribution">Oldstable</span> updates):
				</div><pre
                class="programlisting">deb http://ftp.debian.org/debian jessie-proposed-updates main contrib non-free
</pre></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="sect.backports"></a>6.1.2.4. Stable Backports</h4></div></div></div><a
                id="idm139788575710496"
                class="indexterm"></a><a
                id="idm139788575709376"
                class="indexterm"></a><a
                id="idm139788575708416"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">stable-backports</code> repository hosts “package backports”. The term refers to a package of some recent software which has been recompiled for an older distribution, generally for <span
                  class="distribution distribution">Stable</span>.
				</div><div
                class="para">
					When the distribution becomes a little dated, numerous software projects have released new versions that are not integrated into the current <span
                  class="distribution distribution">Stable</span> (which is only modified to address the most critical problems, such as security problems). Since the <span
                  class="distribution distribution">Testing</span> and <span
                  class="distribution distribution">Unstable</span> distributions can be more risky, package maintainers sometimes offer recompilations of recent software applications for <span
                  class="distribution distribution">Stable</span>, which has the advantage to limit potential instability to a small number of chosen packages. <div
                  class="url">→ <a
                    href="http://backports.debian.org">http://backports.debian.org</a></div>
				</div><div
                class="para">
					The <code
                  class="literal">stable-backports</code> repository is now available on the usual Debian mirrors. But backports for <span
                  class="distribution distribution">Squeeze</span> are still hosted on a dedicated server (<code
                  class="literal">backports.debian.org</code>), and requires the following <code
                  class="filename">sources.list</code> entry:
				</div><a
                id="idm139788575698400"
                class="indexterm"></a><pre
                class="programlisting">deb http://backports.debian.org/debian-backports squeeze-backports main contrib non-free
</pre><div
                class="para">
					Backports from <code
                  class="literal">stable-backports</code> are always created from packages available in <span
                  class="distribution distribution">Testing</span>. This ensures that all installed backports will be upgradable to the corresponding stable version once the next stable release of Debian is available.
				</div><div
                class="para">
					Even though this repository provides newer versions of packages, APT will not install them unless you give explicit instructions to do so (or unless you have already done so with a former version of the given backport):
				</div><pre
                class="screen">
$ <strong
                  class="userinput"><code>sudo apt-get install <em
                      class="replaceable">package</em>/jessie-backports</code></strong>
$ <strong
                  class="userinput"><code>sudo apt-get install -t jessie-backports <em
                      class="replaceable">package</em></code></strong></pre></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="idm139788575692032"></a>6.1.3. Repositories for <span
                      class="distribution distribution">Testing</span>/<span
                      class="distribution distribution">Unstable</span> Users</h3></div></div></div><div
              class="para">
				Here is a standard <code
                class="filename">sources.list</code> for a system running the <span
                class="distribution distribution">Testing</span> or <span
                class="distribution distribution">Unstable</span> version of Debian:
			</div><div
              class="example"><a
                id="example.testing-sources-list"></a><p
                class="title"><strong>Example 6.2. <code
                    class="filename">/etc/apt/sources.list</code> file for users of Debian <span
                    class="distribution distribution">Testing</span>/<span
                    class="distribution distribution">Unstable</span></strong></p><div
                class="example-contents"><pre
                  class="programlisting">
# Unstable
deb http://ftp.debian.org/debian unstable main contrib non-free
deb-src http://ftp.debian.org/debian unstable main contrib non-free

# Testing
deb http://ftp.debian.org/debian testing main contrib non-free
deb-src http://ftp.debian.org/debian testing main contrib non-free

# Stable
deb http://ftp.debian.org/debian stable main contrib non-free
deb-src http://ftp.debian.org/debian stable main contrib non-free

# Security updates
deb http://security.debian.org/ stable/updates main contrib non-free
deb http://security.debian.org/ testing/updates main contrib non-free
deb-src http://security.debian.org/ stable/updates main contrib non-free
deb-src http://security.debian.org/ testing/updates main contrib non-free
</pre></div></div><div
              class="para">
				With this <code
                class="filename">sources.list</code> file APT will install packages from <span
                class="distribution distribution">Unstable</span>. If that is not desired, use the <code
                class="literal">APT::Default-Release</code> setting (see <a
                class="xref"
                href="sect.apt-get.html#sect.apt-upgrade">Section 6.2.3, “System Upgrade”</a>) to instruct APT to pick packages from another distribution (most likely <span
                class="distribution distribution">Testing</span> in this case).
			</div><div
              class="para">
				There are good reasons to include all those repositories, even though a single one should be enough. <span
                class="distribution distribution">Testing</span> users will appreciate the possibility to cherry-pick a fixed package from <span
                class="distribution distribution">Unstable</span> when the version in <span
                class="distribution distribution">Testing</span> is affected by an annoying bug. On the opposite, <span
                class="distribution distribution">Unstable</span> users bitten by unexpected regressions have the possibility to downgrade packages to their (supposedly working) <span
                class="distribution distribution">Testing</span> version.
			</div><div
              class="para">
				The inclusion of <span
                class="distribution distribution">Stable</span> is more debatable but it often gives access to some packages which have been removed from the development versions. It also ensures that you get the latest updates for packages which have not been modified since the last stable release.
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        id="idm139788575674976"></a>6.1.3.1. The <span
                        class="distribution distribution">Experimental</span> Repository</h4></div></div></div><a
                id="idm139788575673392"
                class="indexterm"></a><div
                class="para">
					The archive of <span
                  class="distribution distribution">Experimental</span> packages is present on all Debian mirrors, and contains packages which are not in the <span
                  class="distribution distribution">Unstable</span> version yet because of their substandard quality — they are often software development versions or pre-versions (alpha, beta, release candidate…). A package can also be sent there after undergoing subsequent changes which can generate problems. The maintainer then tries to uncover them with help from advanced users who can handle important issues. After this first stage, the package is moved into <span
                  class="distribution distribution">Unstable</span>, where it reaches a much larger audience and where it will be tested in much more detail.
				</div><div
                class="para">
					<span
                  class="distribution distribution">Experimental</span> is generally used by users who do not mind breaking their system and then repairing it. This distribution gives the possibility to import a package which a user wants to try or use as the need arises. That is exactly how Debian approaches it, since adding it in APT's <code
                  class="filename">sources.list</code> file does not lead to the systematic use of its packages. The line to be added is:
				</div><div
                class="informalexample"><pre
                  class="programlisting">deb http://ftp.debian.org/debian experimental main contrib non-free
</pre></div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="idm139788575665296"></a>6.1.4. Non-Official Resources: <code
                      class="literal">apt-get.org</code> and <code
                      class="literal">mentors.debian.net</code></h3></div></div></div><a
              id="idm139788575663728"
              class="indexterm"></a><a
              id="idm139788575662608"
              class="indexterm"></a><div
              class="para">
				There are numerous non-official sources of Debian packages set up by advanced users who have recompiled some software, by programmers who make their creation available to all, and even by Debian developers who offer pre-versions of their package online. A web site was set up to find these alternative sources more easily. It contains an impressive amount of Debian package sources which can immediately be integrated into <code
                class="filename">sources.list</code> files. However, be careful not to add random packages. Each source is designed for a particular version of Debian (the one used to compile the packages in question); each user should maintain a certain coherence in what they choose to install. <div
                class="url">→ <a
                  href="http://www.apt-get.org/">http://www.apt-get.org/</a></div>
			</div><div
              class="para">
				The <code
                class="literal">mentors.debian.net</code> site is also interesting, since it gathers source packages created by candidates to the status of official Debian developer or by volunteers who wish to create Debian packages without going through that process of integration. These packages are made available without any guarantee regarding their quality; make sure that you check their origin and integrity and then test them before you consider using them in production.
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>COMMUNITY</em></span> The <code
                          class="literal">debian.net</code> sites</strong></p></div></div></div><a
                id="idm139788575655984"
                class="indexterm"></a><div
                class="para">
				The <span
                  class="emphasis"><em>debian.net</em></span> domain is not an official resource of the Debian project. Each Debian developer may use that domain name for their own use. These websites can contain unofficial services (sometimes personal sites) hosted on a machine which does not belong to the project and set up by Debian developers, or even prototypes about to be moved on to <span
                  class="emphasis"><em>debian.org</em></span>. Two reasons can explain why some of these prototypes remain on <span
                  class="emphasis"><em>debian.net</em></span>: either no one has made the necessary effort to transform it into an official service (hosted on the <span
                  class="emphasis"><em>debian.org</em></span> domain, and with a certain guarantee of maintenance), or the service is too controversial to be officialized.
			</div></div><div
              class="para">
				Installing a package means giving root rights to its creator, because they decide on the contents of the initialization scripts which are run under that identity. Official Debian packages are created by volunteers who have been co-opted and reviewed and who can seal their packages so that their origin and integrity can be checked.
			</div><div
              class="para">
				In general, be wary of a package whose origin you don't know and which isn't hosted on one of the official Debian servers: evaluate the degree to which you can trust the creator, and check the integrity of the package. <div
                class="url">→ <a
                  href="http://mentors.debian.net/">http://mentors.debian.net/</a></div>
			</div><div
              class="sidebar"><a
                id="sidebar.snapshot.debian.org"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> Old package versions: <code
                          class="literal">snapshot.debian.org</code></strong></p></div></div></div><a
                id="idm139788575647664"
                class="indexterm"></a><div
                class="para">
				The <code
                  class="literal">snapshot.debian.org</code> service, introduced in April 2010, can be used to “go backwards in time” and to find an old version of a package. It can be used for example to identify which version of a package introduced a regression, and more concretely, to come back to the former version while waiting for the regression fix.
			</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      id="idm139788575644976"></a>6.1.5. Caching Proxy for Debian Packages</h3></div></div></div><a
              id="idm139788575644208"
              class="indexterm"></a><a
              id="idm139788575643248"
              class="indexterm"></a><div
              class="para">
				When an entire network of machines is configured to use the same remote server to download the same updated packages, any administrator knows that it would be beneficial to have an intermediate proxy acting as a network-local cache (see sidebar <a
                class="xref"
                href="sect.apt-cache.html#sidebar.cache"><span
                  class="emphasis"><em>VOCABULARY</em></span> Cache</a>).
			</div><div
              class="para">
				You can configure APT to use a "standard" proxy (see <a
                class="xref"
                href="sect.apt-get.html#sect.apt-config">Section 6.2.4, “Configuration Options”</a> for the APT side, and <a
                class="xref"
                href="sect.http-ftp-proxy.html">Section 11.6, “HTTP/FTP Proxy”</a> for the proxy side), but the Debian ecosystem offers better options to solve this problem. The dedicated software presented in this section are smarter than a plain proxy cache because they can rely on the specific structure of APT repositories (for instance they know when individual files are obsolete or not, and thus adjust the time during which they are kept).
			</div><a
              id="idm139788575638816"
              class="indexterm"></a><a
              id="idm139788575637392"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">apt-cacher</span> and <span
                class="pkg pkg">apt-cacher-ng</span> work like usual proxy cache servers. APT's <code
                class="filename">sources.list</code> is left unchanged, but APT is configured to use them as proxy for outgoing requests.
			</div><a
              id="idm139788575633392"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">approx</span>, on the other hand, acts like an HTTP server that “mirrors” any number of remote repositories in its top-level URLs. The mapping between those top-level directories and the remote URLs of the repositories is stored in <code
                class="filename">/etc/approx/approx.conf</code>:
			</div><pre
              class="programlisting">
# &lt;name&gt; &lt;repository-base-url&gt;
debian   http://ftp.debian.org/debian
security http://security.debian.org
</pre><div
              class="para">
				<span
                class="pkg pkg">approx</span> runs by default on port 9999 via inetd (see <a
                class="xref"
                href="sect.inetd.html">Section 9.6, “The <code
                  class="command">inetd</code> Super-Server”</a>) and requires the users to adjust their <code
                class="filename">sources.list</code> file to point to the approx server:
			</div><pre
              class="programlisting"># Sample sources.list pointing to a local approx server
deb http://apt.falcot.com:9999/security jessie/updates main contrib non-free
deb http://apt.falcot.com:9999/debian jessie main contrib non-free
</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Prev</strong>5.5. Coexistence with Other Packaging Systems</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Up</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Home</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>Next</strong>6.2. aptitude and apt-get Commands</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/apt.html">ar-MA</a></li><li><a
              href="../da-DK/apt.html">da-DK</a></li><li><a
              href="../de-DE/apt.html">de-DE</a></li><li><a
              href="../el-GR/apt.html">el-GR</a></li><li><a
              href="../en-US/apt.html">en-US</a></li><li><a
              href="../es-ES/apt.html">es-ES</a></li><li><a
              href="../fa-IR/apt.html">fa-IR</a></li><li><a
              href="../fr-FR/apt.html">fr-FR</a></li><li><a
              href="../hr-HR/apt.html">hr-HR</a></li><li><a
              href="../id-ID/apt.html">id-ID</a></li><li><a
              href="../it-IT/apt.html">it-IT</a></li><li><a
              href="../ja-JP/apt.html">ja-JP</a></li><li><a
              href="../pl-PL/apt.html">pl-PL</a></li><li><a
              href="../pt-BR/apt.html">pt-BR</a></li><li><a
              href="../ro-RO/apt.html">ro-RO</a></li><li><a
              href="../ru-RU/apt.html">ru-RU</a></li><li><a
              href="../tr-TR/apt.html">tr-TR</a></li><li><a
              href="../zh-CN/apt.html">zh-CN</a></li></ul></div></body></html>
